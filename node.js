export const $APP = {};
export const shadow$provide = {};
export const $jscomp = {};
shadow$provide[0]=function(K,eb,vb,B){function Qa(l,w,F,H){switch(l){case -2:return F<w;case -1:return H>=w&&F<w;case 0:return F<w&&H>w;case 1:return F<=w&&H>w;case 2:return H>w;case 4:return!0}}function Fa(l,w){for(w=l.childBefore(w);w;){let F=w.lastChild;if(!F||F.to!=w.to)break;F.type.isError&&F.from==F.to?(l=w,w=F.prevSibling):w=F}return l}function Ha(l,w,F,H){for(var U;l.from==l.to||(1>F?l.from>=w:l.from>w)||(-1<F?l.to<=w:l.to<w);){var S=!H&&l instanceof ma&&0>l.index?null:l.parent;if(!S)return l;
l=S}S=H?0:Ma.IgnoreOverlays;if(H)for(let da=l,ka=da.parent;ka;da=ka,ka=da.parent)da instanceof ma&&0>da.index&&(null===(U=ka.enter(w,F,S))||void 0===U?void 0:U.from)!=da.from&&(l=ka);for(;;){H=l.enter(w,F,S);if(!H)return l;l=H}}function Wa(l,w,F,H){l=l.cursor();let U=[];if(!l.firstChild())return U;if(null!=F)for(;!l.type.is(F);)if(!l.nextSibling())return U;for(;;){if(null!=H&&l.type.is(H))return U;l.type.is(w)&&U.push(l.node);if(!l.nextSibling())return null==H?U:[]}}function $a(l,w,F=w.length-1){for(l=
l.parent;0<=F;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(w[F]&&w[F]!=l.name)return!1;F--}}return!0}function pa(l){return l.children.some(w=>w instanceof ha||!w.type.isAnonymous||pa(w))}function xa(l){function w(Ca,ra,Ra,kb,ab){let {id:Xa,start:Va,end:ob,size:Cb}=Ga;for(var Bb=Ab;0>Cb;){Ga.next();if(-1==Cb){Ra.push(ua[Xa]);kb.push(Va-Ca);return}if(-3==Cb){Da=Xa;return}if(-4==Cb){Ab=Xa;return}throw new RangeError(`Unrecognized record size: ${Cb}`);}var fb=pb[Xa],ib=Va-Ca,wb;if(wb=ob-Va<=
ia){var gb=Ga.pos-ra;ra=Ga.fork();var Fb=wb=0;let Hb=0,lb=ra.end-ia,xb={size:0,start:0,skip:0};a:for(let Nb=ra.pos-gb;ra.pos>Nb;){let Wb=ra.size;if(ra.id==ab&&0<=Wb){xb.size=wb;xb.start=Fb;xb.skip=Hb;Hb+=4;wb+=4;ra.next();continue}let Db=ra.pos-Wb;if(0>Wb||Db<Nb||ra.start<lb)break;let Qb=ra.id>=Ea?4:0,gc=ra.start;for(ra.next();ra.pos>Db;){if(0>ra.size)if(-3==ra.size)Qb+=4;else break a;else ra.id>=Ea&&(Qb+=4);ra.next()}Fb=gc;wb+=Wb;Hb+=Qb}if(0>ab||wb==gb)xb.size=wb,xb.start=Fb,xb.skip=Hb;wb=gb=4<xb.size?
xb:void 0}if(wb){ib=new Uint16Array(gb.size-gb.skip);fb=Ga.pos-gb.size;for(Bb=ib.length;Ga.pos>fb;)Bb=S(gb.start,ib,Bb);fb=new ha(ib,ob-gb.start,ba);ib=gb.start-Ca}else{gb=Ga.pos-Cb;Ga.next();Ca=[];ab=[];ra=Xa>=Ea?Xa:-1;wb=0;for(Fb=ob;Ga.pos>gb;)0<=ra&&Ga.id==ra&&0<=Ga.size?(Ga.end<=Fb-ia&&(H(Ca,ab,Va,wb,Ga.end,Fb,ra,Bb),wb=Ca.length,Fb=Ga.end),Ga.next()):w(Va,gb,Ca,ab,ra);0<=ra&&0<wb&&wb<Ca.length&&H(Ca,ab,Va,wb,Va,Fb,ra,Bb);Ca.reverse();ab.reverse();-1<ra&&0<wb?(Bb=F(fb),fb=sa(fb,Ca,ab,0,Ca.length,
0,ob-Va,Bb,Bb)):fb=U(fb,Ca,ab,ob-Va,Bb-ob)}Ra.push(fb);kb.push(ib)}function F(Ca){return(ra,Ra,kb)=>{let ab=0,Xa=ra.length-1,Va,ob;if(0<=Xa&&(Va=ra[Xa])instanceof bb){if(!Xa&&Va.type==Ca&&Va.length==kb)return Va;if(ob=Va.prop(va.lookAhead))ab=Ra[Xa]+Va.length+ob}return U(Ca,ra,Ra,kb,ab)}}function H(Ca,ra,Ra,kb,ab,Xa,Va,ob){let Cb=[],Bb=[];for(;Ca.length>kb;)Cb.push(Ca.pop()),Bb.push(ra.pop()+Ra-ab);Ca.push(U(ba.types[Va],Cb,Bb,Xa-ab,ob-Xa));ra.push(ab-Ra)}function U(Ca,ra,Ra,kb,ab=0,Xa){if(Da){let Va=
[va.contextHash,Da];Xa=Xa?[Va].concat(Xa):[Va]}25<ab&&(ab=[va.lookAhead,ab],Xa=Xa?[ab].concat(Xa):[ab]);return new bb(Ca,ra,Ra,kb,Xa)}function S(Ca,ra,Ra){let {id:kb,start:ab,end:Xa,size:Va}=Ga;Ga.next();if(0<=Va&&kb<Ea){let ob=Ra;if(4<Va){let Cb=Ga.pos-(Va-4);for(;Ga.pos>Cb;)Ra=S(Ca,ra,Ra)}ra[--Ra]=ob;ra[--Ra]=Xa-Ca;ra[--Ra]=ab-Ca;ra[--Ra]=kb}else-3==Va?Da=kb:-4==Va&&(Ab=kb);return Ra}var da;let {buffer:ka,nodeSet:ba,maxBufferLength:ia=1024,reused:ua=[],minRepeatType:Ea=ba.types.length}=l,Ga=Array.isArray(ka)?
new ca(ka,ka.length):ka,pb=ba.types,Da=0,Ab=0,Ya=[],yb=[];for(;0<Ga.pos;)w(l.start||0,l.bufferStart||0,Ya,yb,-1);let Rb=null!==(da=l.length)&&void 0!==da?da:Ya.length?yb[0]+Ya[0].length:0;return new bb(pb[l.topID],Ya.reverse(),yb.reverse(),Rb)}function oa(l,w){if(!l.isAnonymous||w instanceof ha||w.type!=l)return 1;let F=m.get(w);if(null==F){F=1;for(let H of w.children){if(H.type!=l||!(H instanceof bb)){F=1;break}F+=oa(l,H)}m.set(w,F)}return F}function sa(l,w,F,H,U,S,da,ka,ba){function ia(Da,Ab,Ya,
yb,Rb){for(;Ya<yb;){let ra=Ya;var Ca=Ab[Ya];let Ra=oa(l,Da[Ya]);for(Ya++;Ya<yb;Ya++){let kb=oa(l,Da[Ya]);if(Ra+kb>=Ea)break;Ra+=kb}if(Ya==ra+1){if(Ra>Ea){Ca=Da[ra];ia(Ca.children,Ca.positions,0,Ca.children.length,Ab[ra]+Rb);continue}Ga.push(Da[ra])}else Ga.push(sa(l,Da,Ab,ra,Ya,Ca,Ab[Ya-1]+Da[Ya-1].length-Ca,null,ba));pb.push(Ca+Rb-S)}}let ua=0;for(let Da=H;Da<U;Da++)ua+=oa(l,w[Da]);let Ea=Math.ceil(1.5*ua/8),Ga=[],pb=[];ia(w,F,H,U,0);return(ka||ba)(Ga,pb,da)}function za(l,w,F){for(let H of l){if(H.from>=
F)break;if(H.to>w)return H.from<=w&&H.to>=F?2:1}return 0}function Oa(l){function w(ia,ua,Ea,Ga,pb){for(var Da=ia;ba[Da+2]+da<=F.from;)Da=ba[Da+3];let Ab=[],Ya=[];if(ia<Da){var yb=ka.buffer[ia+1];Ab.push(ka.slice(ia,Da,yb));Ya.push(yb-Ga)}ia=ba[Da+1];yb=ba[Da+2];Ab.push(ia+da==F.from&&yb+da==F.to&&ba[Da]==F.type.id?F.toTree():w(Da+4,ba[Da+3],ka.set.types[ba[Da]],ia,yb-ia));Ya.push(ia-Ga);Da=ba[Da+3];Da<ua&&(ia=ka.buffer[Da+1],Ab.push(ka.slice(Da,ua,ia)),Ya.push(ia-Ga));return new bb(Ea,Ab,Ya,pb)}let {node:F}=
l,H=0;do l.parent(),H++;while(!l.tree);var U=0;let S=l.tree,da=0;for(;!(da=S.positions[U]+l.from,da<=F.from&&da+S.children[U].length>=F.to);U++);let ka=S.children[U],ba=ka.buffer;S.children[U]=w(0,ba.length,Sa.none,0,ka.length);for(U=0;U<=H;U++)l.childAfter(F.from)}function Aa(l,w){let F=null,H=w;for(let U=1,S=0;U<l.length;U++){let da=l[U-1].to,ka=l[U].from;for(;S<H.length;S++){let ba=H[S];if(ba.from>=ka)break;ba.to<=da||(F||(H=F=w.slice()),ba.from<da?(F[S]=new wa(ba.from,da),ba.to>ka&&F.splice(S+
1,0,new wa(ka,ba.to))):ba.to>ka?F[S--]=new wa(ka,ba.to):F.splice(S--,1))}}return H}function Pa(l,w,F,H){let U=0,S=0,da=!1,ka=!1;var ba=-1E9;let ia=[];for(;;){let ua=U==l.length?1E9:da?l[U].to:l[U].from,Ea=S==w.length?1E9:ka?w[S].to:w[S].from;if(da!=ka){ba=Math.max(ba,F);let Ga=Math.min(ua,Ea,H);ba<Ga&&ia.push(new wa(ba,Ga))}ba=Math.min(ua,Ea);if(1E9==ba)break;ua==ba&&(da?(da=!1,U++):da=!0);Ea==ba&&(ka?(ka=!1,S++):ka=!0)}return ia}function mb(l,w){let F=[];for(let {pos:S,mount:da,frag:ka}of l){l=S+
(da.overlay?da.overlay[0].from:0);var H=l+da.tree.length,U=Math.max(ka.from,l);let ba=Math.min(ka.to,H);if(da.overlay){H=da.overlay.map(ia=>new wa(ia.from+S,ia.to+S));H=Pa(w,H,U,ba);for(let ia=0,ua=U;;ia++){let Ea=(U=ia==H.length)?ba:H[ia].from;Ea>ua&&F.push(new C(ua,Ea,da.tree,-l,ka.from>=ua||ka.openStart,ka.to<=Ea||ka.openEnd));if(U)break;ua=H[ia].to}}else F.push(new C(U,ba,da.tree,-l,ka.from>=l||ka.openStart,ka.to<=H||ka.openEnd))}return F}Object.defineProperty(B,"__esModule",{value:!0});B.parseMixed=
function(l){return(w,F,H,U)=>new ja(w,l,F,H,U)};B.TreeFragment=B.TreeCursor=B.TreeBuffer=B.Tree=B.Parser=B.NodeWeakMap=B.NodeType=B.NodeSet=B.NodeProp=B.MountedTree=B.IterMode=B.DefaultBufferLength=void 0;B.DefaultBufferLength=1024;let Ia=0;class wa{constructor(l,w){this.from=l;this.to=w}}class va{constructor(l={}){this.id=Ia++;this.perNode=!!l.perNode;this.deserialize=l.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function");})}add(l){if(this.perNode)throw new RangeError("Can't add per-node props to node types");
"function"!=typeof l&&(l=Sa.match(l));return w=>{w=l(w);return void 0===w?null:[this,w]}}}B.NodeProp=va;va.closedBy=new va({deserialize:l=>l.split(" ")});va.openedBy=new va({deserialize:l=>l.split(" ")});va.group=new va({deserialize:l=>l.split(" ")});va.contextHash=new va({perNode:!0});va.lookAhead=new va({perNode:!0});va.mounted=new va({perNode:!0});class qb{constructor(l,w,F){this.tree=l;this.overlay=w;this.parser=F}}B.MountedTree=qb;const Ta=Object.create(null);class Sa{constructor(l,w,F,H=0){this.name=
l;this.props=w;this.id=F;this.flags=H}static define(l){let w=l.props&&l.props.length?Object.create(null):Ta,F=new Sa(l.name||"",w,l.id,(l.top?1:0)|(l.skipped?2:0)|(l.error?4:0)|(null==l.name?8:0));if(l.props)for(let H of l.props)if(Array.isArray(H)||(H=H(F)),H){if(H[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");w[H[0].id]=H[1]}return F}prop(l){return this.props[l.id]}get isTop(){return 0<(this.flags&1)}get isSkipped(){return 0<(this.flags&2)}get isError(){return 0<
(this.flags&4)}get isAnonymous(){return 0<(this.flags&8)}is(l){if("string"==typeof l){if(this.name==l)return!0;let w=this.prop(va.group);return w?-1<w.indexOf(l):!1}return this.id==l}static match(l){let w=Object.create(null);for(let F in l)for(let H of F.split(" "))w[H]=l[F];return F=>{for(let H=F.prop(va.group),U=-1;U<(H?H.length:0);U++){let S=w[0>U?F.name:H[U]];if(S)return S}}}}B.NodeType=Sa;Sa.none=new Sa("",Object.create(null),0,8);class Ja{constructor(l){this.types=l;for(let w=0;w<l.length;w++)if(l[w].id!=
w)throw new RangeError("Node type ids should correspond to array positions when creating a node set");}extend(...l){let w=[];for(let F of this.types){let H=null;for(let U of l){let S=U(F);S&&(H||(H=Object.assign({},F.props)),H[S[0].id]=S[1])}w.push(H?new Sa(F.name,H,F.id,F.flags):F)}return new Ja(w)}}B.NodeSet=Ja;const Za=new WeakMap,Gb=new WeakMap;var Ma;B.IterMode=Ma;(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers";l[l.IncludeAnonymous=2]="IncludeAnonymous";l[l.IgnoreMounts=4]="IgnoreMounts";
l[l.IgnoreOverlays=8]="IgnoreOverlays"})(Ma||(B.IterMode=Ma={}));class bb{constructor(l,w,F,H,U){this.type=l;this.children=w;this.positions=F;this.length=H;this.props=null;if(U&&U.length){this.props=Object.create(null);for(let [S,da]of U)this.props["number"==typeof S?S:S.id]=da}}toString(){var l=this.prop(va.mounted);if(l&&!l.overlay)return l.tree.toString();l="";for(let w of this.children){let F=w.toString();F&&(l&&(l+=","),l+=F)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?
JSON.stringify(this.type.name):this.type.name)+(l.length?"("+l+")":""):l}cursor(l=0){return new La(this.topNode,l)}cursorAt(l,w=0,F){F=Za.get(this)||this.topNode;F=new La(F);F.moveTo(l,w);Za.set(this,F._tree);return F}get topNode(){return new ma(this,0,0,null)}resolve(l,w=0){l=Ha(Za.get(this)||this.topNode,l,w,!1);Za.set(this,l);return l}resolveInner(l,w=0){l=Ha(Gb.get(this)||this.topNode,l,w,!0);Gb.set(this,l);return l}iterate(l){let {enter:w,leave:F,from:H=0,to:U=this.length}=l;var S=l.mode||0;
l=0<(S&Ma.IncludeAnonymous);for(S=this.cursor(S|Ma.IncludeAnonymous);;){let da=!1;if(S.from<=U&&S.to>=H&&(!l&&S.type.isAnonymous||!1!==w(S))){if(S.firstChild())continue;da=!0}for(;;){da&&F&&(l||!S.type.isAnonymous)&&F(S);if(S.nextSibling())break;if(!S.parent())return;da=!0}}}prop(l){return l.perNode?this.props?this.props[l.id]:void 0:this.type.prop(l)}get propValues(){let l=[];if(this.props)for(let w in this.props)l.push([+w,this.props[w]]);return l}balance(l={}){return 8>=this.children.length?this:
sa(Sa.none,this.children,this.positions,0,this.children.length,0,this.length,(w,F,H)=>new bb(this.type,w,F,H,this.propValues),l.makeTree||((w,F,H)=>new bb(Sa.none,w,F,H)))}static build(l){return xa(l)}}B.Tree=bb;bb.empty=new bb(Sa.none,[],[],0);class ca{constructor(l,w){this.buffer=l;this.index=w}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=
4}fork(){return new ca(this.buffer,this.index)}}class ha{constructor(l,w,F){this.buffer=l;this.length=w;this.set=F}get type(){return Sa.none}toString(){let l=[];for(let w=0;w<this.buffer.length;)l.push(this.childString(w)),w=this.buffer[w+3];return l.join(",")}childString(l){let w=this.buffer[l+3];var F=this.set.types[this.buffer[l]];let H=F.name;/\W/.test(H)&&!F.isError&&(H=JSON.stringify(H));l+=4;if(w==l)return H;for(F=[];l<w;)F.push(this.childString(l)),l=this.buffer[l+3];return H+"("+F.join(",")+
")"}findChild(l,w,F,H,U){let {buffer:S}=this,da=-1;for(;l!=w&&!(Qa(U,H,S[l+1],S[l+2])&&(da=l,0<F));l=S[l+3]);return da}slice(l,w,F){let H=this.buffer,U=new Uint16Array(w-l),S=0;for(let da=l,ka=0;da<w;){U[ka++]=H[da++];U[ka++]=H[da++]-F;let ba=U[ka++]=H[da++]-F;U[ka++]=H[da++]-l;S=Math.max(S,ba)}return new ha(U,S,this.set)}}B.TreeBuffer=ha;class ma{constructor(l,w,F,H){this._tree=l;this.from=w;this.index=F;this._parent=H}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+
this._tree.length}nextChild(l,w,F,H,U=0){for(let S=this;;){for(let {children:da,positions:ka}=S._tree,ba=0<w?da.length:-1;l!=ba;l+=w){let ia=da[l],ua=ka[l]+S.from;if(Qa(H,F,ua,ua+ia.length))if(ia instanceof ha){if(U&Ma.ExcludeBuffers)continue;let Ea=ia.findChild(0,ia.buffer.length,w,F-ua,H);if(-1<Ea)return new ya(new qa(S,ia,l,ua),null,Ea)}else if(U&Ma.IncludeAnonymous||!ia.type.isAnonymous||pa(ia)){let Ea;if(!(U&Ma.IgnoreMounts)&&ia.props&&(Ea=ia.prop(va.mounted))&&!Ea.overlay)return new ma(Ea.tree,
ua,l,S);l=new ma(ia,ua,l,S);return U&Ma.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(0>w?ia.children.length-1:0,w,F,H)}}if(U&Ma.IncludeAnonymous||!S.type.isAnonymous)return null;l=0<=S.index?S.index+w:0>w?-1:S._parent._tree.children.length;S=S._parent;if(!S)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(l){return this.nextChild(0,1,l,2)}childBefore(l){return this.nextChild(this._tree.children.length-
1,-1,l,-2)}enter(l,w,F=0){let H;if(!(F&Ma.IgnoreOverlays)&&(H=this._tree.prop(va.mounted))&&H.overlay){let U=l-this.from;for(let {from:S,to:da}of H.overlay)if((0<w?S<=U:S<U)&&(0>w?da>=U:da>U))return new ma(H.tree,H.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,l,w,F)}nextSignificantParent(){let l=this;for(;l.type.isAnonymous&&l._parent;)l=l._parent;return l}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&0<=this.index?
this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&0<=this.index?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(l=0){return new La(this,l)}get tree(){return this._tree}toTree(){return this._tree}resolve(l,w=0){return Ha(this,l,w,!1)}resolveInner(l,w=0){return Ha(this,l,w,!0)}enterUnfinishedNodesBefore(l){return Fa(this,l)}getChild(l,w=null,F=null){l=Wa(this,l,w,F);return l.length?l[0]:null}getChildren(l,w=null,F=null){return Wa(this,l,w,F)}toString(){return this._tree.toString()}get node(){return this}matchContext(l){return $a(this,
l)}}class qa{constructor(l,w,F,H){this.parent=l;this.buffer=w;this.index=F;this.start=H}}class ya{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(l,w,F){this.context=l;this._parent=w;this.index=F;this.type=l.buffer.set.types[l.buffer.buffer[F]]}child(l,w,F){let {buffer:H}=this.context;l=H.findChild(this.index+4,H.buffer[this.index+3],l,w-this.context.start,
F);return 0>l?null:new ya(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(l){return this.child(1,l,2)}childBefore(l){return this.child(-1,l,-2)}enter(l,w,F=0){if(F&Ma.ExcludeBuffers)return null;({buffer:F}=this.context);l=F.findChild(this.index+4,F.buffer[this.index+3],0<w?1:-1,l-this.context.start,w);return 0>l?null:new ya(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(l){return this._parent?
null:this.context.parent.nextChild(this.context.index+l,l,0,4)}get nextSibling(){let {buffer:l}=this.context,w=l.buffer[this.index+3];return w<(this._parent?l.buffer[this._parent.index+3]:l.buffer.length)?new ya(this.context,this._parent,w):this.externalSibling(1)}get prevSibling(){let {buffer:l}=this.context,w=this._parent?this._parent.index+4:0;return this.index==w?this.externalSibling(-1):new ya(this.context,this._parent,l.findChild(w,this.index,-1,0,4))}cursor(l=0){return new La(this,l)}get tree(){return null}toTree(){let l=
[],w=[],{buffer:F}=this.context,H=this.index+4,U=F.buffer[this.index+3];U>H&&(l.push(F.slice(H,U,F.buffer[this.index+1])),w.push(0));return new bb(this.type,l,w,this.to-this.from)}resolve(l,w=0){return Ha(this,l,w,!1)}resolveInner(l,w=0){return Ha(this,l,w,!0)}enterUnfinishedNodesBefore(l){return Fa(this,l)}toString(){return this.context.buffer.childString(this.index)}getChild(l,w=null,F=null){l=Wa(this,l,w,F);return l.length?l[0]:null}getChildren(l,w=null,F=null){return Wa(this,l,w,F)}get node(){return this}matchContext(l){return $a(this,
l)}}class La{get name(){return this.type.name}constructor(l,w=0){this.mode=w;this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(l instanceof ma)this.yieldNode(l);else{this._tree=l.context.parent;this.buffer=l.context;for(w=l._parent;w;w=w._parent)this.stack.unshift(w.index);this.bufferNode=l;this.yieldBuf(l.index)}}yieldNode(l){if(!l)return!1;this._tree=l;this.type=l.type;this.from=l.from;this.to=l.to;return!0}yieldBuf(l,w){this.index=l;let {start:F,buffer:H}=this.buffer;this.type=
w||H.set.types[H.buffer[l]];this.from=F+H.buffer[l+1];this.to=F+H.buffer[l+2];return!0}yield(l){if(!l)return!1;if(l instanceof ma)return this.buffer=null,this.yieldNode(l);this.buffer=l.context;return this.yieldBuf(l.index,l.type)}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(l,w,F){if(!this.buffer)return this.yield(this._tree.nextChild(0>l?this._tree._tree.children.length-1:0,l,w,F,this.mode));let {buffer:H}=this.buffer;l=H.findChild(this.index+
4,H.buffer[this.index+3],l,w-this.buffer.start,F);if(0>l)return!1;this.stack.push(this.index);return this.yieldBuf(l)}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(l){return this.enterChild(1,l,2)}childBefore(l){return this.enterChild(-1,l,-2)}enter(l,w,F=this.mode){return this.buffer?F&Ma.ExcludeBuffers?!1:this.enterChild(1,l,w):this.yield(this._tree.enter(l,w,F))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ma.IncludeAnonymous?this._tree._parent:
this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let l=this.mode&Ma.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();this.buffer=null;return this.yieldNode(l)}sibling(l){if(!this.buffer)return this._tree._parent?this.yield(0>this._tree.index?null:this._tree._parent.nextChild(this._tree.index+l,l,0,4,this.mode)):!1;let {buffer:w}=this.buffer,F=this.stack.length-1;if(0>l){var H=0>F?0:this.stack[F]+4;if(this.index!=H)return this.yieldBuf(w.findChild(H,
this.index,-1,0,4))}else if(H=w.buffer[this.index+3],H<(0>F?w.buffer.length:w.buffer[this.stack[F]+3]))return this.yieldBuf(H);return 0>F?this.yield(this.buffer.parent.nextChild(this.buffer.index+l,l,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(l){var w,F;({buffer:F}=this);if(F){if(0<l){if(this.index<F.buffer.buffer.length)return!1}else for(w=0;w<this.index;w++)if(F.buffer.buffer[w+3]<this.index)return!1;({index:w,parent:F}=F)}else({index:w,
_parent:F}=this._tree);for(;F;{index:w,_parent:F}=F)if(-1<w)for(let H=w+l,U=0>l?-1:F._tree.children.length;H!=U;H+=l)if(w=F._tree.children[H],this.mode&Ma.IncludeAnonymous||w instanceof ha||!w.type.isAnonymous||pa(w))return!1;return!0}move(l,w){if(w&&this.enterChild(l,0,4))return!0;for(;;){if(this.sibling(l))return!0;if(this.atLastNode(l)||!this.parent())return!1}}next(l=!0){return this.move(1,l)}prev(l=!0){return this.move(-1,l)}moveTo(l,w=0){for(;(this.from==this.to||(1>w?this.from>=l:this.from>
l)||(-1<w?this.to<=l:this.to<l))&&this.parent(););for(;this.enterChild(1,l,w););return this}get node(){if(!this.buffer)return this._tree;var l=this.bufferNode;let w=null,F=0;if(l&&l.context==this.buffer)a:for(let H=this.index,U=this.stack.length;0<=U;){for(let S=l;S;S=S._parent)if(S.index==H){if(H==this.index)return S;w=S;F=U+1;break a}H=this.stack[--U]}for(l=F;l<this.stack.length;l++)w=new ya(this.buffer,w,this.stack[l]);return this.bufferNode=new ya(this.buffer,w,this.index)}get tree(){return this.buffer?
null:this._tree._tree}iterate(l,w){for(let F=0;;){let H=!1;if(this.type.isAnonymous||!1!==l(this)){if(this.firstChild()){F++;continue}this.type.isAnonymous||(H=!0)}for(;;){H&&w&&w(this);if(this.nextSibling())break;if(!F)return;this.parent();F--;H=!0}}}matchContext(l){if(!this.buffer)return $a(this.node,l);let {buffer:w}=this.buffer,{types:F}=w.set;for(let H=l.length-1,U=this.stack.length-1;0<=H;U--){if(0>U)return $a(this.node,l,H);let S=F[w.buffer[this.stack[U]]];if(!S.isAnonymous){if(l[H]&&l[H]!=
S.name)return!1;H--}}return!0}}B.TreeCursor=La;const m=new WeakMap;class x{constructor(){this.map=new WeakMap}setBuffer(l,w,F){let H=this.map.get(l);H||this.map.set(l,H=new Map);H.set(w,F)}getBuffer(l,w){return(l=this.map.get(l))&&l.get(w)}set(l,w){l instanceof ya?this.setBuffer(l.context.buffer,l.index,w):l instanceof ma&&this.map.set(l.tree,w)}get(l){return l instanceof ya?this.getBuffer(l.context.buffer,l.index):l instanceof ma?this.map.get(l.tree):void 0}cursorSet(l,w){l.buffer?this.setBuffer(l.buffer.buffer,
l.index,w):this.map.set(l.tree,w)}cursorGet(l){return l.buffer?this.getBuffer(l.buffer.buffer,l.index):this.map.get(l.tree)}}B.NodeWeakMap=x;class C{constructor(l,w,F,H,U=!1,S=!1){this.from=l;this.to=w;this.tree=F;this.offset=H;this.open=(U?1:0)|(S?2:0)}get openStart(){return 0<(this.open&1)}get openEnd(){return 0<(this.open&2)}static addTree(l,w=[],F=!1){F=[new C(0,l.length,l,0,!1,F)];for(let H of w)H.to>l.length&&F.push(H);return F}static applyChanges(l,w,F=128){if(!w.length)return l;let H=[],U=
1,S=l.length?l[0]:null;for(let da=0,ka=0,ba=0;;da++){let ia=da<w.length?w[da]:null,ua=ia?ia.fromA:1E9;if(ua-ka>=F)for(;S&&S.from<ua;){let Ea=S;if(ka>=Ea.from||ua<=Ea.to||ba){let Ga=Math.max(Ea.from,ka)-ba,pb=Math.min(Ea.to,ua)-ba;Ea=Ga>=pb?null:new C(Ga,pb,Ea.tree,Ea.offset+ba,0<da,!!ia)}Ea&&H.push(Ea);if(S.to>ua)break;S=U<l.length?l[U++]:null}if(!ia)break;ka=ia.toA;ba=ia.toA-ia.toB}return H}}B.TreeFragment=C;class D{startParse(l,w,F){"string"==typeof l&&(l=new J(l));F=F?F.length?F.map(H=>new wa(H.from,
H.to)):[new wa(0,0)]:[new wa(0,l.length)];return this.createParse(l,w||[],F)}parse(l,w,F){for(l=this.startParse(l,w,F);;)if(w=l.advance())return w}}B.Parser=D;class J{constructor(l){this.string=l}get length(){return this.string.length}chunk(l){return this.string.slice(l)}get lineChunks(){return!1}read(l,w){return this.string.slice(l,w)}}class N{constructor(l,w,F,H,U){this.parser=l;this.parse=w;this.overlay=F;this.target=H;this.ranges=U;if(!U.length||U.some(S=>S.from>=S.to))throw new RangeError("Invalid inner parse ranges given: "+
JSON.stringify(U));}}class M{constructor(l,w,F,H,U,S,da){this.parser=l;this.predicate=w;this.mounts=F;this.index=H;this.start=U;this.target=S;this.prev=da;this.depth=0;this.ranges=[]}}const la=new va({perNode:!0});class ja{constructor(l,w,F,H,U){this.nest=w;this.input=F;this.fragments=H;this.ranges=U;this.inner=[];this.innerDone=0;this.stoppedAt=this.baseTree=null;this.baseParse=l}advance(){if(this.baseParse){var l=this.baseParse.advance();if(!l)return null;this.baseParse=null;this.baseTree=l;this.startInner();
if(null!=this.stoppedAt)for(var w of this.inner)w.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length)return l=this.baseTree,null!=this.stoppedAt&&(l=new bb(l.type,l.children,l.positions,l.length,l.propValues.concat([[la,this.stoppedAt]]))),l;l=this.inner[this.innerDone];if(w=l.parse.advance()){this.innerDone++;let F=Object.assign(Object.create(null),l.target.props);F[va.mounted.id]=new qb(w,l.overlay,l.parser);l.target.props=F}return null}get parsedPos(){if(this.baseParse)return 0;
let l=this.input.length;for(let w=this.innerDone;w<this.inner.length;w++)this.inner[w].ranges[0].from<l&&(l=Math.min(l,this.inner[w].parse.parsedPos));return l}stopAt(l){this.stoppedAt=l;if(this.baseParse)this.baseParse.stopAt(l);else for(let w=this.innerDone;w<this.inner.length;w++)this.inner[w].parse.stopAt(l)}startInner(){let l=new Ua(this.fragments),w=null,F=null,H=new La(new ma(this.baseTree,this.ranges[0].from,0,null),Ma.IncludeAnonymous|Ma.IgnoreMounts);a:for(let S,da;null==this.stoppedAt||
H.from<this.stoppedAt;){var U=!0;let ka;if(l.hasNode(H)){if(w&&(U=w.mounts.find(ba=>ba.frag.from<=H.from&&ba.frag.to>=H.to&&ba.mount.overlay)))for(let ba of U.mount.overlay){let ia=ba.from+U.pos,ua=ba.to+U.pos;ia>=H.from&&ua<=H.to&&!w.ranges.some(Ea=>Ea.from<ua&&Ea.to>ia)&&w.ranges.push({from:ia,to:ua})}U=!1}else if(F&&(da=za(F.ranges,H.from,H.to)))U=2!=da;else if(!H.type.isAnonymous&&H.from<H.to&&(S=this.nest(H,this.input))){H.tree||Oa(H);let ba=l.findMounts(H.from,S.parser);if("function"==typeof S.overlay)w=
new M(S.parser,S.overlay,ba,this.inner.length,H.from,H.tree,w);else{let ia=Aa(this.ranges,S.overlay||[new wa(H.from,H.to)]);ia.length&&this.inner.push(new N(S.parser,S.parser.startParse(this.input,mb(ba,ia),ia),S.overlay?S.overlay.map(ua=>new wa(ua.from-H.from,ua.to-H.from)):null,H.tree,ia));S.overlay?ia.length&&(F={ranges:ia,depth:0,prev:F}):U=!1}}else w&&(ka=w.predicate(H))&&(!0===ka&&(ka=new wa(H.from,H.to)),ka.from<ka.to&&w.ranges.push(ka));if(U&&H.firstChild())w&&w.depth++,F&&F.depth++;else for(;!H.nextSibling();){if(!H.parent())break a;
w&&!--w.depth&&(U=Aa(this.ranges,w.ranges),U.length&&this.inner.splice(w.index,0,new N(w.parser,w.parser.startParse(this.input,mb(w.mounts,U),U),w.ranges.map(ba=>new wa(ba.from-w.start,ba.to-w.start)),w.target,U)),w=w.prev);F&&!--F.depth&&(F=F.prev)}}}}class ea{constructor(l,w){this.offset=w;this.done=!1;this.cursor=l.cursor(Ma.IncludeAnonymous|Ma.IgnoreMounts)}moveTo(l){let {cursor:w}=this,F=l-this.offset;for(;!this.done&&w.from<F;)w.to>=l&&w.enter(F,1,Ma.IgnoreOverlays|Ma.ExcludeBuffers)||w.next(!1)||
(this.done=!0)}hasNode(l){this.moveTo(l.from);if(!this.done&&this.cursor.from+this.offset==l.from&&this.cursor.tree)for(let w=this.cursor.tree;;){if(w==l.tree)return!0;if(w.children.length&&0==w.positions[0]&&w.children[0]instanceof bb)w=w.children[0];else break}return!1}}class Ua{constructor(l){var w;this.fragments=l;this.fragI=this.curTo=0;l.length?(l=this.curFrag=l[0],this.curTo=null!==(w=l.tree.prop(la))&&void 0!==w?w:l.to,this.inner=new ea(l.tree,-l.offset)):this.curFrag=this.inner=null}hasNode(l){for(;this.curFrag&&
l.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=l.from&&this.curTo>=l.to&&this.inner.hasNode(l)}nextFrag(){var l;this.fragI++;if(this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let w=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(l=w.tree.prop(la))&&void 0!==l?l:w.to;this.inner=new ea(w.tree,-w.offset)}}findMounts(l,w){var F;let H=[];if(this.inner)for(this.inner.cursor.moveTo(l,1),l=this.inner.cursor.node;l;l=l.parent){let U=null===(F=l.tree)||
void 0===F?void 0:F.prop(va.mounted);if(U&&U.parser==w)for(let S=this.fragI;S<this.fragments.length;S++){let da=this.fragments[S];if(da.from>=l.to)break;da.tree==this.curFrag.tree&&H.push({frag:da,pos:l.from-da.offset,mount:U})}}return H}}};
shadow$provide[1]=function(K,eb,vb,B){function Qa(d){let g=-1;for(let p of d)g+=p.length+1;return g}function Fa(d,g,p=0,q=1E9){for(let u=0,A=0,I=!0;A<d.length&&u<=q;A++){let P=d[A],T=u+P.length;T>=p&&(T>q&&(P=P.slice(0,q-u)),u<p&&(P=P.slice(p-u)),I?(g[g.length-1]+=P,I=!1):g.push(P));u=T+1}return g}function Ha(d){return 127462<=d&&127487>=d}function Wa(d,g,p=!0,q=!0){return(p?$a:pa)(d,g,q)}function $a(d,g,p){if(g==d.length)return g;var q;if(q=g)q=d.charCodeAt(g),q=56320<=q&&57344>q;q&&(q=d.charCodeAt(g-
1),q=55296<=q&&56320>q);q&&g--;q=xa(d,g);for(g+=oa(q);g<d.length;){var u=xa(d,g),A;if(!(A=8205==q||8205==u)&&(A=p))a:{for(A=1;A<w.length;A+=2)if(w[A]>u){A=w[A-1]<=u;break a}A=!1}if(A)g+=oa(u),q=u;else if(Ha(u)){u=0;for(A=g-2;0<=A&&Ha(xa(d,A));)u++,A-=2;if(0==u%2)break;else g+=2}else break}return g}function pa(d,g,p){for(;0<g;){let q=$a(d,g-2,p);if(q<g)return q;g--}return 0}function xa(d,g){let p=d.charCodeAt(g);if(!(55296<=p&&56320>p)||g+1==d.length)return p;d=d.charCodeAt(g+1);return 56320<=d&&57344>
d?(p-55296<<10)+(d-56320)+65536:p}function oa(d){return 65536>d?1:2}function sa(d,g,p,q=!1){if(!(0==g&&0>=p)){var u=d.length-2;0<=u&&0>=p&&p==d[u+1]?d[u]+=g:0==g&&0==d[u]?d[u+1]+=p:q?(d[u]+=g,d[u+1]+=p):d.push(g,p)}}function za(d,g,p){if(0!=p.length)if(g=g.length-2>>1,g<d.length)d[d.length-1]=d[d.length-1].append(p);else{for(;d.length<g;)d.push(N.empty);d.push(p)}}function Oa(d,g,p){let q=d.inserted;for(let u=0,A=0,I=0;I<d.sections.length;){let P=d.sections[I++],T=d.sections[I++];if(0>T)u+=P,A+=P;
else{let aa=u,na=A,h=N.empty;for(;;){aa+=P;na+=T;T&&q&&(h=h.append(q[I-2>>1]));if(p||I==d.sections.length||0>d.sections[I+1])break;P=d.sections[I++];T=d.sections[I++]}g(u,aa,A,na,h);u=aa;A=na}}}function Aa(d,g,p,q=!1){let u=[];q=q?[]:null;d=new da(d);g=new da(g);for(let P=-1;;)if(-1==d.ins&&-1==g.ins){var A=Math.min(d.len,g.len);sa(u,A,-1);d.forward(A);g.forward(A)}else if(0<=g.ins&&(0>d.ins||P==d.i||0==d.off&&(g.len<d.len||g.len==d.len&&!p))){A=g.len;for(sa(u,g.ins,-1);A;){var I=Math.min(d.len,A);
0<=d.ins&&P<d.i&&d.len<=I&&(sa(u,0,d.ins),q&&za(q,u,d.text),P=d.i);d.forward(I);A-=I}g.next()}else if(0<=d.ins){A=0;for(I=d.len;I;)if(-1==g.ins){let T=Math.min(I,g.len);A+=T;I-=T;g.forward(T)}else if(0==g.ins&&g.len<I)I-=g.len,g.next();else break;sa(u,A,P<d.i?d.ins:0);q&&P<d.i&&za(q,u,d.text);P=d.i;d.forward(d.len-I)}else{if(d.done&&g.done)return q?S.createSet(u,q):U.create(u);throw Error("Mismatched change set lengths");}}function Pa(d,g,p=!1){let q=[];p=p?[]:null;d=new da(d);g=new da(g);for(let u=
!1;;){if(d.done&&g.done)return p?S.createSet(q,p):U.create(q);if(0==d.ins)sa(q,d.len,0,u),d.next();else if(0!=g.len||g.done){if(d.done||g.done)throw Error("Mismatched change set lengths");let A=Math.min(d.len2,g.len),I=q.length;if(-1==d.ins){let P=-1==g.ins?-1:g.off?0:g.ins;sa(q,A,P,u);p&&P&&za(p,q,g.text)}else-1==g.ins?(sa(q,d.off?0:d.len,A,u),p&&za(p,q,d.textBit(A))):(sa(q,d.off?0:d.len,g.off?0:g.ins,u),p&&!g.off&&za(p,q,g.text));u=(d.ins>A||0<=g.ins&&g.len>A)&&(u||q.length>I);d.forward2(A);g.forward(A)}else sa(q,
0,g.ins,u),p&&za(p,q,g.text),g.next()}}function mb(d,g){for(let p of d.ranges)if(p.to>g)throw new RangeError("Selection points outside of document");}function Ia(d,g){return d==g||d.length==g.length&&d.every((p,q)=>p===g[q])}function wa(d,g,p){if(d.length!=g.length)return!1;for(let q=0;q<d.length;q++)if(!p(d[q],g[q]))return!1;return!0}function va(d,g){let p=!1;for(let q of g)Ja(d,q)&1&&(p=!0);return p}function qb(d,g,p){function q(T){let aa=[];for(let na=0;na<u.length;na++){let h=Za(T,u[na]);if(2==
A[na])for(let n of h)aa.push(n);else aa.push(h)}return g.combine(aa)}let u=p.map(T=>d[T.id]),A=p.map(T=>T.type),I=u.filter(T=>!(T&1)),P=d[g.id]>>1;return{create(T){for(let aa of u)Ja(T,aa);T.values[P]=q(T);return 1},update(T,aa){if(!va(T,I))return 0;aa=q(T);if(g.compare(aa,T.values[P]))return 0;T.values[P]=aa;return 1},reconfigure(T,aa){var na=va(T,u);let h=aa.config.facets[g.id];aa=aa.facet(g);if(h&&!na&&Ia(p,h))return T.values[P]=aa,0;na=q(T);if(g.compare(na,aa))return T.values[P]=aa,0;T.values[P]=
na;return 1}}}function Ta(d){return g=>new Ab(g,d)}function Sa(d,g,p){function q(I,P){var T=A.get(I);if(null!=T){if(T<=P)return;let aa=u[T].indexOf(I);-1<aa&&u[T].splice(aa,1);I instanceof yb&&p.delete(I.compartment)}A.set(I,P);if(Array.isArray(I))for(let aa of I)q(aa,P);else if(I instanceof yb){if(p.has(I.compartment))throw new RangeError("Duplicate use of compartment in extensions");T=g.get(I.compartment)||I.inner;p.set(I.compartment,T);q(T,P)}else if(I instanceof Ab)q(I.inner,I.prec);else if(I instanceof
pb)u[P].push(I),I.provides&&q(I.provides,P);else if(I instanceof Ea)u[P].push(I),I.facet.extensions&&q(I.facet.extensions,Da.default);else{T=I.extension;if(!T)throw Error(`Unrecognized extension value in extension set (${I}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);q(T,P)}}let u=[[],[],[],[],[]],A=new Map;q(d,Da.default);return u.reduce((I,P)=>I.concat(P))}function Ja(d,g){if(g&1)return 2;g>>=1;var p=d.status[g];if(4==p)throw Error("Cyclic dependency between fields and/or facets");
if(p&2)return p;d.status[g]=4;p=d.computeSlot(d,d.config.dynamicSlots[g]);return d.status[g]=2|p}function Za(d,g){return g&1?d.config.staticValues[g>>1]:d.values[g>>1]}function Gb(d,g,p){var q;let u,A;p?(p=g.changes,u=S.empty(g.changes.length),A=d.changes.compose(g.changes)):(p=g.changes.map(d.changes),u=d.changes.mapDesc(g.changes,!0),A=d.changes.compose(p));return{changes:A,selection:g.selection?g.selection.map(u):null===(q=d.selection)||void 0===q?void 0:q.map(p),effects:fb.mapEffects(d.effects,
p).concat(fb.mapEffects(g.effects,u)),annotations:d.annotations.length?d.annotations.concat(g.annotations):g.annotations,scrollIntoView:d.scrollIntoView||g.scrollIntoView}}function Ma(d,g,p){let q=g.selection,u=ca(g.annotations);g.userEvent&&(u=u.concat(ib.userEvent.of(g.userEvent)));return{changes:g.changes instanceof S?g.changes:S.of(g.changes||[],p,d.facet(Ra)),selection:q&&(q instanceof ba?q:ba.single(q.anchor,q.head)),effects:ca(g.effects),annotations:u,scrollIntoView:!!g.scrollIntoView}}function bb(d,
g,p){var q=Ma(d,g.length?g[0]:{},d.doc.length);g.length&&!1===g[0].filter&&(p=!1);for(var u=1;u<g.length;u++){!1===g[u].filter&&(p=!1);var A=!!g[u].sequential;q=Gb(q,Ma(d,g[u],A?q.changes.newLength:d.doc.length),A)}d=ib.create(d,q.changes,q.selection,q.effects,q.annotations,q.scrollIntoView);if(p){p=d.startState;g=!0;for(I of p.facet(kb)){q=I(d);if(!1===q){g=!1;break}if(Array.isArray(q))if(!0===g)g=q;else a:{u=[];for(let P=0,T=0;;){let aa;if(P<g.length&&(T==q.length||q[T]>=g[P]))A=g[P++],aa=g[P++];
else if(T<q.length)A=q[T++],aa=q[T++];else{g=u;break a}!u.length||u[u.length-1]<A?u.push(A,aa):u[u.length-1]<aa&&(u[u.length-1]=aa)}}}if(!0!==g){if(!1===g){g=d.changes.invertedDesc;var I=S.empty(p.doc.length)}else g=d.changes.filter(g),I=g.changes,g=g.filtered.mapDesc(g.changes).invertedDesc;d=ib.create(p,I,d.selection&&d.selection.map(g),fb.mapEffects(d.effects,g),d.annotations,d.scrollIntoView)}I=p.facet(ab);for(g=I.length-1;0<=g;g--)d=I[g](d),d=d instanceof ib?d:Array.isArray(d)&&1==d.length&&
d[0]instanceof ib?d[0]:bb(p,ca(d),!1);I=d}else I=d;p=I.startState;d=p.facet(Xa);g=I;for(q=d.length-1;0<=q;q--)(u=d[q](I))&&Object.keys(u).length&&(g=Gb(g,Ma(p,u,I.changes.newLength),!0));return g==I?I:ib.create(p,I.changes,I.selection,g.effects,g.annotations,g.scrollIntoView)}function ca(d){return null==d?wb:Array.isArray(d)?d:[d]}function ha(d){return g=>{if(!/\S/.test(g))return gb.Space;a:if(Hb)var p=Hb.test(g);else{for(p=0;p<g.length;p++){let q=g[p];if(/\w/.test(q)||"Â€"<q&&(q.toUpperCase()!=q.toLowerCase()||
Fb.test(q))){p=!0;break a}}p=!1}if(p)return gb.Word;for(p=0;p<d.length;p++)if(-1<g.indexOf(d[p]))return gb.Word;return gb.Other}}function ma(d,g){return d.from-g.from||d.value.startSide-g.value.startSide}function qa(d){if(1<d.length)for(let g=d[0],p=1;p<d.length;p++){let q=d[p];if(0<ma(g,q))return d.slice().sort(ma);g=q}return d}function ya(d,g,p){let q=new Map;for(var u of d)for(d=0;d<u.chunk.length;d++)0>=u.chunk[d].maxPoint&&q.set(u.chunk[d],u.chunkPos[d]);u=new Set;for(let A of g)for(g=0;g<A.chunk.length;g++)d=
q.get(A.chunk[g]),null==d||(p?p.mapPos(d):d)!=A.chunkPos[g]||(null===p||void 0===p?0:p.touchesRange(d,d+A.chunk[g].length))||u.add(A.chunk[g]);return u}function La(d,g){for(let p=d[g];;){let q=(g<<1)+1;if(q>=d.length)break;let u=d[q];q+1<d.length&&0<=u.compare(d[q+1])&&(u=d[q+1],q++);if(0>p.compare(u))break;d[q]=p;d[g]=u;g=q}}function m(d,g,p,q,u,A){d.goto(g);p.goto(q);u=q+u;let I=q;for(g=q-g;;){q=d.to+g-p.to||d.endSide-p.endSide;let P=0>q?d.to+g:p.to,T=Math.min(P,u);d.point||p.point?d.point&&p.point&&
(d.point==p.point||d.point.eq(p.point))&&x(d.activeForPoint(d.to),p.activeForPoint(p.to))||A.comparePoint(I,T,d.point,p.point):T>I&&!x(d.active,p.active)&&A.compareRange(I,T,d.active,p.active);if(P>u)break;I=P;0>=q&&d.next();0<=q&&p.next()}}function x(d,g){if(d.length!=g.length)return!1;for(let p=0;p<d.length;p++)if(d[p]!=g[p]&&!d[p].eq(g[p]))return!1;return!0}function C(d,g){for(let p=g,q=d.length-1;p<q;p++)d[p]=d[p+1];d.pop()}function D(d,g,p){for(let q=d.length-1;q>=g;q--)d[q+1]=d[q];d[g]=p}function J(d,
g){let p=-1,q=1E9;for(let u=0;u<g.length;u++)0>(g[u]-q||d[u].endSide-d[p].endSide)&&(p=u,q=g[u]);return p}Object.defineProperty(B,"__esModule",{value:!0});B.codePointAt=xa;B.codePointSize=oa;B.combineConfig=function(d,g,p={}){let q={};for(let u of d)for(let A of Object.keys(u)){d=u[A];let I=q[A];if(void 0===I)q[A]=d;else if(I!==d&&void 0!==d)if(Object.hasOwnProperty.call(p,A))q[A]=p[A](I,d);else throw Error("Config merge conflict for field "+A);}for(let u in g)void 0===q[u]&&(q[u]=g[u]);return q};
B.countColumn=function(d,g,p=d.length){let q=0;for(let u=0;u<p;)9==d.charCodeAt(u)?(q+=g-q%g,u++):(q++,u=Wa(d,u));return q};B.findClusterBreak=Wa;B.findColumn=function(d,g,p,q){for(let u=0,A=0;;){if(A>=g)return u;if(u==d.length)break;A+=9==d.charCodeAt(u)?p-A%p:1;u=Wa(d,u)}return!0===q?-1:d.length};B.fromCodePoint=function(d){if(65535>=d)return String.fromCharCode(d);d-=65536;return String.fromCharCode((d>>10)+55296,(d&1023)+56320)};B.Transaction=B.Text=B.StateField=B.StateEffectType=B.StateEffect=
B.SelectionRange=B.RangeValue=B.RangeSetBuilder=B.RangeSet=B.Range=B.Prec=B.MapMode=B.Line=B.Facet=B.EditorState=B.EditorSelection=B.Compartment=B.CharCategory=B.ChangeSet=B.ChangeDesc=B.AnnotationType=B.Annotation=void 0;class N{lineAt(d){if(0>d||d>this.length)throw new RangeError(`Invalid position ${d} in document of length ${this.length}`);return this.lineInner(d,!1,1,0)}line(d){if(1>d||d>this.lines)throw new RangeError(`Invalid line number ${d} in ${this.lines}-line document`);return this.lineInner(d,
!0,1,0)}replace(d,g,p){let q=[];this.decompose(0,d,q,2);p.length&&p.decompose(0,p.length,q,3);this.decompose(g,this.length,q,1);return la.from(q,this.length-(g-d)+p.length)}append(d){return this.replace(this.length,this.length,d)}slice(d,g=this.length){let p=[];this.decompose(d,g,p,0);return la.from(p,g-d)}eq(d){if(d==this)return!0;if(d.length!=this.length||d.lines!=this.lines)return!1;let g=this.scanIdentical(d,1),p=this.length-this.scanIdentical(d,-1),q=new ja(this);d=new ja(d);for(let u=g,A=g;;){q.next(u);
d.next(u);u=0;if(q.lineBreak!=d.lineBreak||q.done!=d.done||q.value!=d.value)return!1;A+=q.value.length;if(q.done||A>=p)return!0}}iter(d=1){return new ja(this,d)}iterRange(d,g=this.length){return new ea(this,d,g)}iterLines(d,g){null==d?g=this.iter():(null==g&&(g=this.lines+1),d=this.line(d).from,g=this.iterRange(d,Math.max(d,g==this.lines+1?this.length:1>=g?0:this.line(g-1).to)));return new Ua(g)}toString(){return this.sliceString(0)}toJSON(){let d=[];this.flatten(d);return d}constructor(){}static of(d){if(0==
d.length)throw new RangeError("A document must have at least one line");return 1!=d.length||d[0]?32>=d.length?new M(d):la.from(M.split(d,[])):N.empty}}B.Text=N;class M extends N{constructor(d,g=Qa(d)){super();this.text=d;this.length=g}get lines(){return this.text.length}get children(){return null}lineInner(d,g,p,q){for(let u=0;;u++){let A=this.text[u],I=q+A.length;if((g?p:I)>=d)return new l(q,I,p,A);q=I+1;p++}}decompose(d,g,p,q){d=0>=d&&g>=this.length?this:new M(Fa(this.text,[""],d,g),Math.min(g,
this.length)-Math.max(0,d));q&1?(g=p.pop(),q=Fa(d.text,g.text.slice(),0,d.length),32>=q.length?p.push(new M(q,g.length+d.length)):(d=q.length>>1,p.push(new M(q.slice(0,d)),new M(q.slice(d))))):p.push(d)}replace(d,g,p){if(!(p instanceof M))return super.replace(d,g,p);let q=Fa(this.text,Fa(p.text,Fa(this.text,[""],0,d)),g);d=this.length+p.length-(g-d);return 32>=q.length?new M(q,d):la.from(M.split(q,[]),d)}sliceString(d,g=this.length,p="\n"){let q="";for(let u=0,A=0;u<=g&&A<this.text.length;A++){let I=
this.text[A],P=u+I.length;u>d&&A&&(q+=p);d<P&&g>u&&(q+=I.slice(Math.max(0,d-u),g-u));u=P+1}return q}flatten(d){for(let g of this.text)d.push(g)}scanIdentical(){return 0}static split(d,g){let p=[],q=-1;for(let u of d)p.push(u),q+=u.length+1,32==p.length&&(g.push(new M(p,q)),p=[],q=-1);-1<q&&g.push(new M(p,q));return g}}class la extends N{constructor(d,g){super();this.children=d;this.length=g;this.lines=0;for(let p of d)this.lines+=p.lines}lineInner(d,g,p,q){for(let u=0;;u++){let A=this.children[u],
I=q+A.length,P=p+A.lines-1;if((g?P:I)>=d)return A.lineInner(d,g,p,q);q=I+1;p=P+1}}decompose(d,g,p,q){for(let u=0,A=0;A<=g&&u<this.children.length;u++){let I=this.children[u],P=A+I.length;if(d<=P&&g>=A){let T=q&((A<=d?1:0)|(P>=g?2:0));A>=d&&P<=g&&!T?p.push(I):I.decompose(d-A,g-A,p,T)}A=P+1}}replace(d,g,p){if(p.lines<this.lines)for(let A=0,I=0;A<this.children.length;A++){var q=this.children[A],u=I+q.length;if(d>=I&&g<=u){let P=q.replace(d-I,g-I,p);q=this.lines-q.lines+P.lines;return P.lines<q>>4&&P.lines>
q>>6?(u=this.children.slice(),u[A]=P,new la(u,this.length-(g-d)+p.length)):super.replace(I,u,P)}I=u+1}return super.replace(d,g,p)}sliceString(d,g=this.length,p="\n"){let q="";for(let u=0,A=0;u<this.children.length&&A<=g;u++){let I=this.children[u],P=A+I.length;A>d&&u&&(q+=p);d<P&&g>A&&(q+=I.sliceString(d-A,g-A,p));A=P+1}return q}flatten(d){for(let g of this.children)g.flatten(d)}scanIdentical(d,g){if(!(d instanceof la))return 0;let p=0,[q,u,A,I]=0<g?[0,0,this.children.length,d.children.length]:[this.children.length-
1,d.children.length-1,-1,-1];for(;;q+=g,u+=g){if(q==A||u==I)return p;let P=this.children[q],T=d.children[u];if(P!=T)return p+P.scanIdentical(T,g);p+=P.length+1}}static from(d,g=d.reduce((p,q)=>p+q.length+1,-1)){function p(n){let v;if(n.lines>I&&n instanceof la)for(let y of n.children)p(y);else n.lines>P&&(aa>P||!aa)?(q(),T.push(n)):n instanceof M&&aa&&(v=h[h.length-1])instanceof M&&32>=n.lines+v.lines?(aa+=n.lines,na+=n.length+1,h[h.length-1]=new M(v.text.concat(n.text),v.length+1+n.length)):(aa+
n.lines>A&&q(),aa+=n.lines,na+=n.length+1,h.push(n))}function q(){0!=aa&&(T.push(1==h.length?h[0]:la.from(h,na)),na=-1,aa=h.length=0)}var u=0;for(let n of d)u+=n.lines;if(32>u){u=[];for(let n of d)n.flatten(u);return new M(u,g)}let A=Math.max(32,u>>5),I=A<<1,P=A>>1,T=[],aa=0,na=-1,h=[];for(let n of d)p(n);q();return 1==T.length?T[0]:new la(T,g)}}N.empty=new M([""],0);class ja{constructor(d,g=1){this.dir=g;this.lineBreak=this.done=!1;this.value="";this.nodes=[d];this.offsets=[0<g?1:(d instanceof M?
d.text.length:d.children.length)<<1]}nextInner(d,g){for(this.done=this.lineBreak=!1;;){let q=this.nodes.length-1;var p=this.nodes[q];let u=this.offsets[q],A=u>>1,I=p instanceof M?p.text.length:p.children.length;if(A==(0<g?I:0)){if(0==q)return this.done=!0,this.value="",this;0<g&&this.offsets[q-1]++;this.nodes.pop();this.offsets.pop()}else if((u&1)==(0<g?0:1)){this.offsets[q]+=g;if(0==d)return this.lineBreak=!0,this.value="\n",this;d--}else if(p instanceof M){p=p.text[A+(0>g?-1:0)];this.offsets[q]+=
g;if(p.length>Math.max(0,d))return this.value=0==d?p:0<g?p.slice(d):p.slice(0,p.length-d),this;d-=p.length}else p=p.children[A+(0>g?-1:0)],d>p.length?(d-=p.length,this.offsets[q]+=g):(0>g&&this.offsets[q]--,this.nodes.push(p),this.offsets.push(0<g?1:(p instanceof M?p.text.length:p.children.length)<<1))}}next(d=0){0>d&&(this.nextInner(-d,-this.dir),d=this.value.length);return this.nextInner(d,this.dir)}}class ea{constructor(d,g,p){this.value="";this.done=!1;this.cursor=new ja(d,g>p?-1:1);this.pos=
g>p?d.length:0;this.from=Math.min(g,p);this.to=Math.max(g,p)}nextInner(d,g){if(0>g?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;d+=Math.max(0,0>g?this.pos-this.to:this.from-this.pos);let p=0>g?this.pos-this.from:this.to-this.pos;d>p&&(d=p);p-=d;let {value:q}=this.cursor.next(d);this.pos+=(q.length+d)*g;this.value=q.length<=p?q:0>g?q.slice(q.length-p):q.slice(0,p);this.done=!this.value;return this}next(d=0){0>d?d=Math.max(d,this.from-this.pos):0<d&&(d=Math.min(d,this.to-
this.pos));return this.nextInner(d,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Ua{constructor(d){this.inner=d;this.afterBreak=!0;this.value="";this.done=!1}next(d=0){let {done:g,lineBreak:p,value:q}=this.inner.next(d);g?(this.done=!0,this.value=""):p?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=q,this.afterBreak=!1);return this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(N.prototype[Symbol.iterator]=function(){return this.iter()},
ja.prototype[Symbol.iterator]=ea.prototype[Symbol.iterator]=Ua.prototype[Symbol.iterator]=function(){return this});class l{constructor(d,g,p,q){this.from=d;this.to=g;this.number=p;this.text=q}get length(){return this.to-this.from}}B.Line=l;let w="lc 34 7n 7 7b 19    2  2   20 b 1c l g  2t 7 2 6 2 2  4 z  u r 2j b 1m 9 9  o 4  9  3  5 17 3 3b f  w 1j    4 8 4  3 7 a 2 t  1m    2 4 8  9  a 2 q  2 2 1l  4 2 4 2 2 3 3  u 2 3  b 2 1l  4 5  2 4  k 2 m 6   1m   2  4 8  7 3 a 2 u  1n    c  9  14  3  1l 3 5 3  4 7 2 b 2 t  1m  2  2  3  5 2 7 2 b 2 s 2 1l 2   2 4 8  9  a 2 t  20  4  2 3   8  29  2 7 c 8 2q  2 9 b 6 22 2 r      1j e  5  2 5 b  10 9  2u 4  6  2 2 2 p 2 4 3 g 4 d  2 2 6  f  jj 3 qa 3 t 3 t 2 u 2 1s 2  7 8  2 b 9  19 3 3b 2 y  3a 3 4 2 9  6 3 63 2 2  1m   7     2 8 6 a 2  1c h 1r 4 1c 7   5  14 9 c 2 w 4 2 2  3 1k   2 3   3 1m 8 2 2 48 3  d  7 4  6  3 2 5i 1m  5 ek  5f x 2da 3 3x  2o w fe 6 2x 2 n9w 4  a w 2 28 2 7k  3  4  p 2 5  47 2 q i d  12 8 p b 1a 3 1c  2 4 2 2 13  1v 6 2 2 2 2 c  8  1b  1f   3 2 2 5 2   16 2 8  6m  2  4  fn4  kh g g g a6 2 gt  6a  45 5 1ae 3  2 5 4 14 3 4  4l 2 fx 4 ar 2 49 b 4w  1i f 1k 3 1d 4 2 2 1x 3 10 5  8 1q  c 2 1g 9 a 4 2  2n 3 2   2 6  4g  3 8 l 2 1l 2     m  e 7 3 5 5f 8 2 3   n  29  2 6   2   2  2 6j  2 4 6 2  2 r 2 2d 8 2   2 2y    2 6   2t 3 2 4  5 77 9  2 6t  a 2   4  40 4 2 2 4  w a 14 6 2 4 8  9 6 2 3 1a d  2 ba 7  6   2a m 2 7  2  2 3e 6 3   2  7   20 2 3    9n 2 f0b 5 1n 7 t4  1r 4 29  f5k 2 43q   3 4 5 8 8 2 7 u 4 44 3 1iz 1j 4 1e 8  e  m 5  f 11s 7  h 2 7  2  5 79 7 c5 4 15s 7 31 7 240 5 gx7k 2o 3k 6o".split(" ").map(d=>
d?parseInt(d,36):1);for(K=1;K<w.length;K++)w[K]+=w[K-1];const F=/\r\n?|\n/;var H=function(d){d[d.Simple=0]="Simple";d[d.TrackDel=1]="TrackDel";d[d.TrackBefore=2]="TrackBefore";d[d.TrackAfter=3]="TrackAfter";return d}(H||(B.MapMode=H={}));B.MapMode=H;class U{constructor(d){this.sections=d}get length(){let d=0;for(let g=0;g<this.sections.length;g+=2)d+=this.sections[g];return d}get newLength(){let d=0;for(let g=0;g<this.sections.length;g+=2){let p=this.sections[g+1];d+=0>p?this.sections[g]:p}return d}get empty(){return 0==
this.sections.length||2==this.sections.length&&0>this.sections[1]}iterGaps(d){for(let g=0,p=0,q=0;g<this.sections.length;){let u=this.sections[g++],A=this.sections[g++];0>A?(d(p,q,u),q+=u):q+=A;p+=u}}iterChangedRanges(d,g=!1){Oa(this,d,g)}get invertedDesc(){let d=[];for(let g=0;g<this.sections.length;){let p=this.sections[g++],q=this.sections[g++];0>q?d.push(p,q):d.push(q,p)}return new U(d)}composeDesc(d){return this.empty?d:d.empty?this:Pa(this,d)}mapDesc(d,g=!1){return d.empty?this:Aa(this,d,g)}mapPos(d,
g=-1,p=H.Simple){let q=0,u=0;for(let A=0;A<this.sections.length;){let I=this.sections[A++],P=this.sections[A++],T=q+I;if(0>P){if(T>d)return u+(d-q);u+=I}else{if(p!=H.Simple&&T>=d&&(p==H.TrackDel&&q<d&&T>d||p==H.TrackBefore&&q<d||p==H.TrackAfter&&T>d))return null;if(T>d||T==d&&0>g&&!I)return d==q||0>g?u:u+P;u+=P}q=T}if(d>q)throw new RangeError(`Position ${d} is out of range for changeset of length ${q}`);return u}touchesRange(d,g=d){for(let q=0,u=0;q<this.sections.length&&u<=g;){var p=this.sections[q++];
let A=this.sections[q++];p=u+p;if(0<=A&&u<=g&&p>=d)return u<d&&p>g?"cover":!0;u=p}return!1}toString(){let d="";for(let g=0;g<this.sections.length;){let p=this.sections[g++],q=this.sections[g++];d+=(d?" ":"")+p+(0<=q?":"+q:"")}return d}toJSON(){return this.sections}static fromJSON(d){if(!Array.isArray(d)||d.length%2||d.some(g=>"number"!=typeof g))throw new RangeError("Invalid JSON representation of ChangeDesc");return new U(d)}static create(d){return new U(d)}}B.ChangeDesc=U;class S extends U{constructor(d,
g){super(d);this.inserted=g}apply(d){if(this.length!=d.length)throw new RangeError("Applying change set to a document with the wrong length");Oa(this,(g,p,q,u,A)=>d=d.replace(q,q+(p-g),A),!1);return d}mapDesc(d,g=!1){return Aa(this,d,g,!0)}invert(d){let g=this.sections.slice(),p=[];for(let u=0,A=0;u<g.length;u+=2){let I=g[u];var q=g[u+1];if(0<=q){g[u]=q;g[u+1]=I;for(q=u>>1;p.length<q;)p.push(N.empty);p.push(I?d.slice(A,A+I):N.empty)}A+=I}return new S(g,p)}compose(d){return this.empty?d:d.empty?this:
Pa(this,d,!0)}map(d,g=!1){return d.empty?this:Aa(this,d,g,!0)}iterChanges(d,g=!1){Oa(this,d,g)}get desc(){return U.create(this.sections)}filter(d){let g=[],p=[],q=[],u=new da(this);a:for(let P=0,T=0;;){for(var A=P==d.length?1E9:d[P++];T<A||T==A&&0==u.len;){if(u.done)break a;var I=Math.min(u.len,A-T);sa(q,I,-1);let aa=-1==u.ins?-1:0==u.off?u.ins:0;sa(g,I,aa);0<aa&&za(p,g,u.text);u.forward(I);T+=I}for(A=d[P++];T<A;){if(u.done)break a;I=Math.min(u.len,A-T);sa(g,I,-1);sa(q,I,-1==u.ins?-1:0==u.off?u.ins:
0);u.forward(I);T+=I}}return{changes:new S(g,p),filtered:U.create(q)}}toJSON(){let d=[];for(let g=0;g<this.sections.length;g+=2){let p=this.sections[g],q=this.sections[g+1];0>q?d.push(p):0==q?d.push([p]):d.push([p].concat(this.inserted[g>>1].toJSON()))}return d}static of(d,g,p){function q(aa=!1){if(aa||A.length)P<g&&sa(A,g-P,-1),aa=new S(A,I),T=T?T.compose(aa.map(T)):aa,A=[],I=[],P=0}function u(aa){if(Array.isArray(aa))for(var na of aa)u(na);else if(aa instanceof S){if(aa.length!=g)throw new RangeError(`Mismatched change set length (got ${aa.length}, expected ${g})`);
q();T=T?T.compose(aa.map(T)):aa}else{let {from:h,to:n=h,insert:v}=aa;if(h>n||0>h||n>g)throw new RangeError(`Invalid change range ${h} to ${n} (in doc of length ${g})`);aa=v?"string"==typeof v?N.of(v.split(p||F)):v:N.empty;na=aa.length;if(h!=n||0!=na)h<P&&q(),h>P&&sa(A,h-P,-1),sa(A,n-h,na),za(I,A,aa),P=n}}let A=[],I=[],P=0,T=null;u(d);q(!T);return T}static empty(d){return new S(d?[d,-1]:[],[])}static fromJSON(d){if(!Array.isArray(d))throw new RangeError("Invalid JSON representation of ChangeSet");
let g=[],p=[];for(let q=0;q<d.length;q++){let u=d[q];if("number"==typeof u)g.push(u,-1);else{if(!Array.isArray(u)||"number"!=typeof u[0]||u.some((A,I)=>I&&"string"!=typeof A))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==u.length)g.push(u[0],0);else{for(;p.length<q;)p.push(N.empty);p[q]=N.of(u.slice(1));g.push(u[0],p[q].length)}}}return new S(g,p)}static createSet(d,g){return new S(d,g)}}B.ChangeSet=S;class da{constructor(d){this.set=d;this.i=0;this.next()}next(){let {sections:d}=
this.set;this.i<d.length?(this.len=d[this.i++],this.ins=d[this.i++]):(this.len=0,this.ins=-2);this.off=0}get done(){return-2==this.ins}get len2(){return 0>this.ins?this.len:this.ins}get text(){let {inserted:d}=this.set,g=this.i-2>>1;return g>=d.length?N.empty:d[g]}textBit(d){let {inserted:g}=this.set,p=this.i-2>>1;return p>=g.length&&!d?N.empty:g[p].slice(this.off,null==d?void 0:this.off+d)}forward(d){d==this.len?this.next():(this.len-=d,this.off+=d)}forward2(d){-1==this.ins?this.forward(d):d==this.ins?
this.next():(this.ins-=d,this.off+=d)}}class ka{constructor(d,g,p){this.from=d;this.to=g;this.flags=p}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let d=this.flags&3;return 3==d?null:d}get goalColumn(){let d=this.flags>>5;return 33554431==d?void 0:d}map(d,g=-1){this.empty?g=d=d.mapPos(this.from,g):(g=d.mapPos(this.from,1),d=d.mapPos(this.to,
-1));return g==this.from&&d==this.to?this:new ka(g,d,this.flags)}extend(d,g=d){return d<=this.anchor&&g>=this.anchor?ba.range(d,g):ba.range(this.anchor,Math.abs(d-this.anchor)>Math.abs(g-this.anchor)?d:g)}eq(d){return this.anchor==d.anchor&&this.head==d.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(d){if(!d||"number"!=typeof d.anchor||"number"!=typeof d.head)throw new RangeError("Invalid JSON representation for SelectionRange");return ba.range(d.anchor,d.head)}static create(d,
g,p){return new ka(d,g,p)}}B.SelectionRange=ka;class ba{constructor(d,g){this.ranges=d;this.mainIndex=g}map(d,g=-1){return d.empty?this:ba.create(this.ranges.map(p=>p.map(d,g)),this.mainIndex)}eq(d){if(this.ranges.length!=d.ranges.length||this.mainIndex!=d.mainIndex)return!1;for(let g=0;g<this.ranges.length;g++)if(!this.ranges[g].eq(d.ranges[g]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new ba([this.main],0)}addRange(d,g=!0){return ba.create([d].concat(this.ranges),
g?0:this.mainIndex+1)}replaceRange(d,g=this.mainIndex){let p=this.ranges.slice();p[g]=d;return ba.create(p,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(d=>d.toJSON()),main:this.mainIndex}}static fromJSON(d){if(!d||!Array.isArray(d.ranges)||"number"!=typeof d.main||d.main>=d.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ba(d.ranges.map(g=>ka.fromJSON(g)),d.main)}static single(d,g=d){return new ba([ba.range(d,g)],0)}static create(d,g=0){if(0==
d.length)throw new RangeError("A selection needs at least one range");for(let p=0,q=0;q<d.length;q++){let u=d[q];if(u.empty?u.from<=p:u.from<p)return ba.normalized(d.slice(),g);p=u.to}return new ba(d,g)}static cursor(d,g=0,p,q){return ka.create(d,d,(0==g?0:0>g?4:8)|(null==p?3:Math.min(2,p))|(null!==q&&void 0!==q?q:33554431)<<5)}static range(d,g,p,q){p=(null!==p&&void 0!==p?p:33554431)<<5|(null==q?3:Math.min(2,q));return g<d?ka.create(g,d,24|p):ka.create(d,g,(g>d?4:0)|p)}static normalized(d,g=0){g=
d[g];d.sort((q,u)=>q.from-u.from);g=d.indexOf(g);for(let q=1;q<d.length;q++){let u=d[q];var p=d[q-1];if(u.empty?u.from<=p.to:u.from<p.to){let A=p.from;p=Math.max(u.to,p.to);q<=g&&g--;d.splice(--q,2,u.anchor>u.head?ba.range(p,A):ba.range(A,p))}}return new ba(d,g)}}B.EditorSelection=ba;let ia=0;class ua{constructor(d,g,p,q,u){this.combine=d;this.compareInput=g;this.compare=p;this.isStatic=q;this.id=ia++;this.default=d([]);this.extensions="function"==typeof u?u(this):u}static define(d={}){return new ua(d.combine||
(g=>g),d.compareInput||((g,p)=>g===p),d.compare||(d.combine?(g,p)=>g===p:Ia),!!d.static,d.enables)}of(d){return new Ea([],this,0,d)}compute(d,g){if(this.isStatic)throw Error("Can't compute a static facet");return new Ea(d,this,1,g)}computeN(d,g){if(this.isStatic)throw Error("Can't compute a static facet");return new Ea(d,this,2,g)}from(d,g){g||(g=p=>p);return this.compute([d],p=>g(p.field(d)))}}B.Facet=ua;class Ea{constructor(d,g,p,q){this.dependencies=d;this.facet=g;this.type=p;this.value=q;this.id=
ia++}dynamicSlot(d){var g;let p=this.value,q=this.facet.compareInput,u=this.id,A=d[u]>>1,I=2==this.type,P=!1,T=!1,aa=[];for(let na of this.dependencies)"doc"==na?P=!0:"selection"==na?T=!0:0==((null!==(g=d[na.id])&&void 0!==g?g:1)&1)&&aa.push(d[na.id]);return{create(na){na.values[A]=p(na);return 1},update(na,h){if(P&&h.docChanged||T&&(h.docChanged||h.selection)||va(na,aa))if(h=p(na),I?!wa(h,na.values[A],q):!q(h,na.values[A]))return na.values[A]=h,1;return 0},reconfigure:(na,h)=>{let n;var v=h.config.address[u];
if(null!=v){if(v=Za(h,v),this.dependencies.every(y=>y instanceof ua?h.facet(y)===na.facet(y):y instanceof pb?h.field(y,!1)==na.field(y,!1):!0)||(I?wa(n=p(na),v,q):q(n=p(na),v)))return na.values[A]=v,0}else n=p(na);na.values[A]=n;return 1}}}}const Ga=ua.define({static:!0});class pb{constructor(d,g,p,q,u){this.id=d;this.createF=g;this.updateF=p;this.compareF=q;this.spec=u;this.provides=void 0}static define(d){let g=new pb(ia++,d.create,d.update,d.compare||((p,q)=>p===q),d);d.provide&&(g.provides=d.provide(g));
return g}create(d){let g=d.facet(Ga).find(p=>p.field==this);return((null===g||void 0===g?void 0:g.create)||this.createF)(d)}slot(d){let g=d[this.id]>>1;return{create:p=>{p.values[g]=this.create(p);return 1},update:(p,q)=>{let u=p.values[g];q=this.updateF(u,q);if(this.compareF(u,q))return 0;p.values[g]=q;return 1},reconfigure:(p,q)=>{if(null!=q.config.address[this.id])return p.values[g]=q.field(this),0;p.values[g]=this.create(p);return 1}}}init(d){return[this,Ga.of({field:this,create:d})]}get extension(){return this}}
B.StateField=pb;const Da={lowest:4,low:3,default:2,high:1,highest:0};K={highest:Ta(Da.highest),high:Ta(Da.high),default:Ta(Da.default),low:Ta(Da.low),lowest:Ta(Da.lowest)};B.Prec=K;class Ab{constructor(d,g){this.inner=d;this.prec=g}}class Ya{of(d){return new yb(this,d)}reconfigure(d){return Ya.reconfigure.of({compartment:this,extension:d})}get(d){return d.config.compartments.get(this)}}B.Compartment=Ya;class yb{constructor(d,g){this.compartment=d;this.inner=g}}class Rb{constructor(d,g,p,q,u,A){this.base=
d;this.compartments=g;this.dynamicSlots=p;this.address=q;this.staticValues=u;this.facets=A;for(this.statusTemplate=[];this.statusTemplate.length<p.length;)this.statusTemplate.push(0)}staticFacet(d){let g=this.address[d.id];return null==g?d.default:this.staticValues[g>>1]}static resolve(d,g,p){var q=[];let u=Object.create(null),A=new Map;for(var I of Sa(d,g,A))I instanceof pb?q.push(I):(u[I.facet.id]||(u[I.facet.id]=[])).push(I);let P=Object.create(null);g=[];I=[];for(let aa of q)P[aa.id]=I.length<<
1,I.push(na=>aa.slot(na));q=null===p||void 0===p?void 0:p.config.facets;for(let aa in u){let na=u[aa],h=na[0].facet;var T=q&&q[aa]||[];if(na.every(n=>0==n.type))P[h.id]=g.length<<1|1,Ia(T,na)?g.push(p.facet(h)):(T=h.combine(na.map(n=>n.value)),g.push(p&&h.compare(T,p.facet(h))?p.facet(h):T));else{for(let n of na)0==n.type?(P[n.id]=g.length<<1|1,g.push(n.value)):(P[n.id]=I.length<<1,I.push(v=>n.dynamicSlot(v)));P[h.id]=I.length<<1;I.push(n=>qb(n,h,na))}}p=I.map(aa=>aa(P));return new Rb(d,A,p,P,g,u)}}
const Ca=ua.define(),ra=ua.define({combine:d=>d.some(g=>g),static:!0}),Ra=ua.define({combine:d=>d.length?d[0]:void 0,static:!0}),kb=ua.define(),ab=ua.define(),Xa=ua.define(),Va=ua.define({combine:d=>d.length?d[0]:!1});class ob{constructor(d,g){this.type=d;this.value=g}static define(){return new Cb}}B.Annotation=ob;class Cb{of(d){return new ob(this,d)}}B.AnnotationType=Cb;class Bb{constructor(d){this.map=d}of(d){return new fb(this,d)}}B.StateEffectType=Bb;class fb{constructor(d,g){this.type=d;this.value=
g}map(d){d=this.type.map(this.value,d);return void 0===d?void 0:d==this.value?this:new fb(this.type,d)}is(d){return this.type==d}static define(d={}){return new Bb(d.map||(g=>g))}static mapEffects(d,g){if(!d.length)return d;let p=[];for(let q of d)(d=q.map(g))&&p.push(d);return p}}B.StateEffect=fb;fb.reconfigure=fb.define();fb.appendConfig=fb.define();class ib{constructor(d,g,p,q,u,A){this.startState=d;this.changes=g;this.selection=p;this.effects=q;this.annotations=u;this.scrollIntoView=A;this._state=
this._doc=null;p&&mb(p,g.newLength);u.some(I=>I.type==ib.time)||(this.annotations=u.concat(ib.time.of(Date.now())))}static create(d,g,p,q,u,A){return new ib(d,g,p,q,u,A)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){this._state||this.startState.applyTransaction(this);return this._state}annotation(d){for(let g of this.annotations)if(g.type==d)return g.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=
this.state.config}isUserEvent(d){let g=this.annotation(ib.userEvent);return!(!g||!(g==d||g.length>d.length&&g.slice(0,d.length)==d&&"."==g[d.length]))}}B.Transaction=ib;ib.time=ob.define();ib.userEvent=ob.define();ib.addToHistory=ob.define();ib.remote=ob.define();const wb=[];var gb=function(d){d[d.Word=0]="Word";d[d.Space=1]="Space";d[d.Other=2]="Other";return d}(gb||(B.CharCategory=gb={}));B.CharCategory=gb;const Fb=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
let Hb;try{Hb=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(d){}class lb{constructor(d,g,p,q,u,A){this.config=d;this.doc=g;this.selection=p;this.values=q;this.status=d.statusTemplate.slice();this.computeSlot=u;A&&(A._state=this);for(d=0;d<this.config.dynamicSlots.length;d++)Ja(this,d<<1);this.computeSlot=null}field(d,g=!0){d=this.config.address[d.id];if(null==d){if(g)throw new RangeError("Field is not present in this state");}else return Ja(this,d),Za(this,d)}update(...d){return bb(this,d,!0)}applyTransaction(d){let g=
this.config,{base:p,compartments:q}=g;for(var u of d.effects)u.is(Ya.reconfigure)?(g&&(q=new Map,g.compartments.forEach((A,I)=>q.set(I,A)),g=null),q.set(u.value.compartment,u.value.extension)):u.is(fb.reconfigure)?(g=null,p=u.value):u.is(fb.appendConfig)&&(g=null,p=ca(p).concat(u.value));g?u=d.startState.values.slice():(g=Rb.resolve(p,q,this),u=(new lb(g,this.doc,this.selection,g.dynamicSlots.map(()=>null),(A,I)=>I.reconfigure(A,this),null)).values);new lb(g,d.newDoc,d.newSelection,u,(A,I)=>I.update(A,
d),d)}replaceSelection(d){"string"==typeof d&&(d=this.toText(d));return this.changeByRange(g=>({changes:{from:g.from,to:g.to,insert:d},range:ba.cursor(g.from+d.length)}))}changeByRange(d){let g=this.selection;var p=d(g.ranges[0]);let q=this.changes(p.changes),u=[p.range];p=ca(p.effects);for(let I=1;I<g.ranges.length;I++){let P=d(g.ranges[I]);var A=this.changes(P.changes);let T=A.map(q);for(let aa=0;aa<I;aa++)u[aa]=u[aa].map(T);A=q.mapDesc(A,!0);u.push(P.range.map(A));q=q.compose(T);p=fb.mapEffects(p,
T).concat(fb.mapEffects(ca(P.effects),A))}return{changes:q,selection:ba.create(u,g.mainIndex),effects:p}}changes(d=[]){return d instanceof S?d:S.of(d,this.doc.length,this.facet(lb.lineSeparator))}toText(d){return N.of(d.split(this.facet(lb.lineSeparator)||F))}sliceDoc(d=0,g=this.doc.length){return this.doc.sliceString(d,g,this.lineBreak)}facet(d){let g=this.config.address[d.id];if(null==g)return d.default;Ja(this,g);return Za(this,g)}toJSON(d){let g={doc:this.sliceDoc(),selection:this.selection.toJSON()};
if(d)for(let p in d){let q=d[p];q instanceof pb&&null!=this.config.address[q.id]&&(g[p]=q.spec.toJSON(this.field(d[p]),this))}return g}static fromJSON(d,g={},p){if(!d||"string"!=typeof d.doc)throw new RangeError("Invalid JSON representation for EditorState");let q=[];if(p)for(let u in p)if(Object.prototype.hasOwnProperty.call(d,u)){let A=p[u],I=d[u];q.push(A.init(P=>A.spec.fromJSON(I,P)))}return lb.create({doc:d.doc,selection:ba.fromJSON(d.selection),extensions:g.extensions?q.concat([g.extensions]):
q})}static create(d={}){let g=Rb.resolve(d.extensions||[],new Map),p=d.doc instanceof N?d.doc:N.of((d.doc||"").split(g.staticFacet(lb.lineSeparator)||F));d=d.selection?d.selection instanceof ba?d.selection:ba.single(d.selection.anchor,d.selection.head):ba.single(0);mb(d,p.length);g.staticFacet(ra)||(d=d.asSingle());return new lb(g,p,d,g.dynamicSlots.map(()=>null),(q,u)=>u.create(q),null)}get tabSize(){return this.facet(lb.tabSize)}get lineBreak(){return this.facet(lb.lineSeparator)||"\n"}get readOnly(){return this.facet(Va)}phrase(d,
...g){for(let p of this.facet(lb.phrases))if(Object.prototype.hasOwnProperty.call(p,d)){d=p[d];break}g.length&&(d=d.replace(/\$(\$|\d*)/g,(p,q)=>{if("$"==q)return"$";q=+(q||1);return!q||q>g.length?p:g[q-1]}));return d}languageDataAt(d,g,p=-1){let q=[];for(let u of this.facet(Ca))for(let A of u(this,g,p))Object.prototype.hasOwnProperty.call(A,d)&&q.push(A[d]);return q}charCategorizer(d){return ha(this.languageDataAt("wordChars",d).join(""))}wordAt(d){let {text:g,from:p,length:q}=this.doc.lineAt(d),
u=this.charCategorizer(d),A=d-p;for(d-=p;0<A;){var I=Wa(g,A,!1);if(u(g.slice(I,A))!=gb.Word)break;A=I}for(;d<q;){I=Wa(g,d);if(u(g.slice(d,I))!=gb.Word)break;d=I}return A==d?null:ba.range(A+p,d+p)}}B.EditorState=lb;lb.allowMultipleSelections=ra;lb.tabSize=ua.define({combine:d=>d.length?d[0]:4});lb.lineSeparator=Ra;lb.readOnly=Va;lb.phrases=ua.define({compare(d,g){let p=Object.keys(d),q=Object.keys(g);return p.length==q.length&&p.every(u=>d[u]==g[u])}});lb.languageData=Ca;lb.changeFilter=kb;lb.transactionFilter=
ab;lb.transactionExtender=Xa;Ya.reconfigure=fb.define();class xb{eq(d){return this==d}range(d,g=d){return Nb.create(d,g,this)}}B.RangeValue=xb;xb.prototype.startSide=xb.prototype.endSide=0;xb.prototype.point=!1;xb.prototype.mapMode=H.TrackDel;class Nb{constructor(d,g,p){this.from=d;this.to=g;this.value=p}static create(d,g,p){return new Nb(d,g,p)}}B.Range=Nb;class Wb{constructor(d,g,p,q){this.from=d;this.to=g;this.value=p;this.maxPoint=q}get length(){return this.to[this.to.length-1]}findIndex(d,g,
p,q=0){let u=p?this.to:this.from;for(let A=q,I=u.length;;){if(A==I)return A;q=A+I>>1;let P=u[q]-d||(p?this.value[q].endSide:this.value[q].startSide)-g;if(q==A)return 0<=P?A:I;0<=P?I=q:A=q+1}}between(d,g,p,q){for(let u=this.findIndex(g,-1E9,!0),A=this.findIndex(p,1E9,!1,u);u<A;u++)if(!1===q(this.from[u]+d,this.to[u]+d,this.value[u]))return!1}map(d,g){let p=[],q=[],u=[],A=-1,I=-1;for(let aa=0;aa<this.value.length;aa++){let na=this.value[aa],h=this.from[aa]+d;var P=this.to[aa]+d,T=void 0;if(h==P){T=
g.mapPos(h,na.startSide,na.mapMode);if(null==T)continue;T=P=T;if(na.startSide!=na.endSide&&(P=g.mapPos(h,na.endSide),P<T))continue}else if(T=g.mapPos(h,na.startSide),P=g.mapPos(P,na.endSide),T>P||T==P&&0<na.startSide&&0>=na.endSide)continue;0>(P-T||na.endSide-na.startSide)||(0>A&&(A=T),na.point&&(I=Math.max(I,P-T)),p.push(na),q.push(T-A),u.push(P-A))}return{mapped:p.length?new Wb(q,u,p,I):null,pos:A}}}class Db{constructor(d,g,p,q){this.chunkPos=d;this.chunk=g;this.nextLayer=p;this.maxPoint=q}static create(d,
g,p,q){return new Db(d,g,p,q)}get length(){let d=this.chunk.length-1;return 0>d?0:Math.max(this.chunkEnd(d),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let d=this.nextLayer.size;for(let g of this.chunk)d+=g.value.length;return d}chunkEnd(d){return this.chunkPos[d]+this.chunk[d].length}update(d){let {add:g=[],sort:p=!1,filterFrom:q=0,filterTo:u=this.length}=d;d=d.filter;if(0==g.length&&!d)return this;p&&(g=g.slice().sort(ma));if(this.isEmpty)return g.length?Db.of(g):this;let A=(new gc(this,
null,-1)).goto(0),I=0,P=[],T=new Qb;for(;A.value||I<g.length;)if(I<g.length&&0<=(A.from-g[I].from||A.startSide-g[I].value.startSide)){let aa=g[I++];T.addInner(aa.from,aa.to,aa.value)||P.push(aa)}else if(1==A.rangeIndex&&A.chunkIndex<this.chunk.length&&(I==g.length||this.chunkEnd(A.chunkIndex)<g[I].from)&&(!d||q>this.chunkEnd(A.chunkIndex)||u<this.chunkPos[A.chunkIndex])&&T.addChunk(this.chunkPos[A.chunkIndex],this.chunk[A.chunkIndex]))A.nextChunk();else{if(!d||q>A.to||u<A.from||d(A.from,A.to,A.value))T.addInner(A.from,
A.to,A.value)||P.push(Nb.create(A.from,A.to,A.value));A.next()}return T.finishInner(this.nextLayer.isEmpty&&!P.length?Db.empty:this.nextLayer.update({add:P,filter:d,filterFrom:q,filterTo:u}))}map(d){if(d.empty||this.isEmpty)return this;let g=[],p=[],q=-1;for(let u=0;u<this.chunk.length;u++){let A=this.chunkPos[u],I=this.chunk[u],P=d.touchesRange(A,A+I.length);if(!1===P)q=Math.max(q,I.maxPoint),g.push(I),p.push(d.mapPos(A));else if(!0===P){let {mapped:T,pos:aa}=I.map(A,d);T&&(q=Math.max(q,T.maxPoint),
g.push(T),p.push(aa))}}d=this.nextLayer.map(d);return 0==g.length?d:new Db(p,g,d||Db.empty,q)}between(d,g,p){if(!this.isEmpty){for(let q=0;q<this.chunk.length;q++){let u=this.chunkPos[q],A=this.chunk[q];if(g>=u&&d<=u+A.length&&!1===A.between(u,d-u,g-u,p))return}this.nextLayer.between(d,g,p)}}iter(d=0){return ec.from([this]).goto(d)}get isEmpty(){return this.nextLayer==this}static iter(d,g=0){return ec.from(d).goto(g)}static compare(d,g,p,q,u=-1){d=d.filter(T=>0<T.maxPoint||!T.isEmpty&&T.maxPoint>=
u);g=g.filter(T=>0<T.maxPoint||!T.isEmpty&&T.maxPoint>=u);let A=ya(d,g,p),I=new Sb(d,A,u),P=new Sb(g,A,u);p.iterGaps((T,aa,na)=>m(I,T,P,aa,na,q));p.empty&&0==p.length&&m(I,0,P,0,0,q)}static eq(d,g,p=0,q){null==q&&(q=1E9-1);var u=d.filter(P=>!P.isEmpty&&0>g.indexOf(P));let A=g.filter(P=>!P.isEmpty&&0>d.indexOf(P));if(u.length!=A.length)return!1;if(!u.length)return!0;let I=ya(u,A);u=(new Sb(u,I,0)).goto(p);for(p=(new Sb(A,I,0)).goto(p);;){if(u.to!=p.to||!x(u.active,p.active)||u.point&&(!p.point||!u.point.eq(p.point)))return!1;
if(u.to>q)return!0;u.next();p.next()}}static spans(d,g,p,q,u=-1){d=(new Sb(d,null,u)).goto(g);u=g;let A=d.openStart;for(;;){let I=Math.min(d.to,p);if(d.point){let P=d.activeForPoint(d.to);q.point(u,I,d.point,P,d.pointFrom<g?P.length+1:Math.min(P.length,A),d.pointRank);A=Math.min(d.openEnd(I),P.length)}else I>u&&(q.span(u,I,d.active,A),A=d.openEnd(I));if(d.to>p)return A+(d.point&&d.to>p?1:0);u=d.to;d.next()}}static of(d,g=!1){let p=new Qb;for(let q of d instanceof Nb?[d]:g?qa(d):d)p.add(q.from,q.to,
q.value);return p.finish()}}B.RangeSet=Db;Db.empty=new Db([],[],null,-1);Db.empty.nextLayer=Db.empty;class Qb{finishChunk(d){this.chunks.push(new Wb(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;d&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[];this.chunkPos=[];this.chunkStart=-1;this.last=null;this.lastTo=this.lastFrom=-1E9;this.from=[];this.to=[];
this.value=[];this.setMaxPoint=this.maxPoint=-1;this.nextLayer=null}add(d,g,p){this.addInner(d,g,p)||(this.nextLayer||(this.nextLayer=new Qb)).add(d,g,p)}addInner(d,g,p){let q=d-this.lastTo||p.startSide-this.last.endSide;if(0>=q&&0>(d-this.lastFrom||p.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");if(0>q)return!1;250==this.from.length&&this.finishChunk(!0);0>this.chunkStart&&(this.chunkStart=d);this.from.push(d-this.chunkStart);this.to.push(g-
this.chunkStart);this.last=p;this.lastFrom=d;this.lastTo=g;this.value.push(p);p.point&&(this.maxPoint=Math.max(this.maxPoint,g-d));return!0}addChunk(d,g){if(0>(d-this.lastTo||g.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,g.maxPoint);this.chunks.push(g);this.chunkPos.push(d);let p=g.value.length-1;this.last=g.value[p];this.lastFrom=g.from[p]+d;this.lastTo=g.to[p]+d;return!0}finish(){return this.finishInner(Db.empty)}finishInner(d){this.from.length&&
this.finishChunk(!1);if(0==this.chunks.length)return d;d=Db.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(d):d,this.setMaxPoint);this.from=null;return d}}B.RangeSetBuilder=Qb;class gc{constructor(d,g,p,q=0){this.layer=d;this.skip=g;this.minPoint=p;this.rank=q}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(d,g=-1E9){this.chunkIndex=this.rangeIndex=0;this.gotoInner(d,g,!1);return this}gotoInner(d,g,p){for(;this.chunkIndex<
this.layer.chunk.length;){let q=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(q)||this.layer.chunkEnd(this.chunkIndex)<d||q.maxPoint<this.minPoint))break;this.chunkIndex++;p=!1}this.chunkIndex<this.layer.chunk.length&&(d=this.layer.chunk[this.chunkIndex].findIndex(d-this.layer.chunkPos[this.chunkIndex],g,!0),(!p||this.rangeIndex<d)&&this.setRangeIndex(d));this.next()}forward(d,g){0>(this.to-d||this.endSide-g)&&this.gotoInner(d,g,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=
this.to=1E9;this.value=null;break}else{let d=this.layer.chunkPos[this.chunkIndex],g=this.layer.chunk[this.chunkIndex];this.from=d+g.from[this.rangeIndex];this.to=d+g.to[this.rangeIndex];this.value=g.value[this.rangeIndex];this.setRangeIndex(this.rangeIndex+1);if(0>this.minPoint||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(d){if(d==this.layer.chunk[this.chunkIndex].value.length){this.chunkIndex++;if(this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;
this.rangeIndex=0}else this.rangeIndex=d}nextChunk(){this.chunkIndex++;this.rangeIndex=0;this.next()}compare(d){return this.from-d.from||this.startSide-d.startSide||this.rank-d.rank||this.to-d.to||this.endSide-d.endSide}}class ec{constructor(d){this.heap=d}static from(d,g=null,p=-1){let q=[];for(let u=0;u<d.length;u++)for(let A=d[u];!A.isEmpty;A=A.nextLayer)A.maxPoint>=p&&q.push(new gc(A,g,p,u));return 1==q.length?q[0]:new ec(q)}get startSide(){return this.value?this.value.startSide:0}goto(d,g=-1E9){for(let p of this.heap)p.goto(d,
g);for(d=this.heap.length>>1;0<=d;d--)La(this.heap,d);this.next();return this}forward(d,g){for(var p of this.heap)p.forward(d,g);for(p=this.heap.length>>1;0<=p;p--)La(this.heap,p);0>(this.to-d||this.value.endSide-g)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1E9,this.value=null,this.rank=-1;else{let d=this.heap[0];this.from=d.from;this.to=d.to;this.value=d.value;this.rank=d.rank;d.value&&d.next();La(this.heap,0)}}}class Sb{constructor(d,g,p){this.minPoint=p;this.active=[];this.activeTo=
[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointRank=this.pointFrom=0;this.to=-1E9;this.endSide=0;this.openStart=-1;this.cursor=ec.from(d,g,p)}goto(d,g=-1E9){this.cursor.goto(d,g);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=d;this.endSide=g;this.openStart=-1;this.next();return this}forward(d,g){for(;-1<this.minActive&&0>(this.activeTo[this.minActive]-d||this.active[this.minActive].endSide-g);)this.removeActive(this.minActive);this.cursor.forward(d,
g)}removeActive(d){C(this.active,d);C(this.activeTo,d);C(this.activeRank,d);this.minActive=J(this.active,this.activeTo)}addActive(d){let g=0,{value:p,to:q,rank:u}=this.cursor;for(;g<this.activeRank.length&&this.activeRank[g]<=u;)g++;D(this.active,g,p);D(this.activeTo,g,q);D(this.activeRank,g,u);d&&D(d,g,this.cursor.from);this.minActive=J(this.active,this.activeTo)}next(){let d=this.to;var g=this.point;this.point=null;let p=0>this.openStart?[]:null;for(;;){var q=this.minActive;if(-1<q&&0>(this.activeTo[q]-
this.cursor.from||this.active[q].endSide-this.cursor.startSide)){if(this.activeTo[q]>d){this.to=this.activeTo[q];this.endSide=this.active[q].endSide;break}this.removeActive(q);p&&C(p,q)}else if(this.cursor.value)if(this.cursor.from>d){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else if(q=this.cursor.value,q.point)if(g&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=q;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;
this.to=this.cursor.to;this.endSide=q.endSide;this.cursor.next();this.forward(this.to,this.endSide);break}else this.addActive(p),this.cursor.next();else{this.to=this.endSide=1E9;break}}if(p)for(this.openStart=0,g=p.length-1;0<=g&&p[g]<d;g--)this.openStart++}activeForPoint(d){if(!this.active.length)return this.active;let g=[];for(let p=this.active.length-1;0<=p&&!(this.activeRank[p]<this.pointRank);p--)(this.activeTo[p]>d||this.activeTo[p]==d&&this.active[p].endSide>=this.point.endSide)&&g.push(this.active[p]);
return g.reverse()}openEnd(d){let g=0;for(let p=this.activeTo.length-1;0<=p&&this.activeTo[p]>d;p--)g++;return g}}};
shadow$provide[2]=function(K,eb,vb,B){Object.defineProperty(B,"__esModule",{value:!0});B.StyleModule=void 0;const Qa="undefined"==typeof Symbol?"__Í¼":Symbol.for("Í¼"),Fa="undefined"==typeof Symbol?"__styleSet"+Math.floor(1E8*Math.random()):Symbol("styleSet"),Ha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Wa{constructor(xa,oa){function sa(Aa){return/^@/.test(Aa)?[Aa]:Aa.split(/,\s*/)}function za(Aa,Pa,mb,Ia){let wa=[],va=/^@(\w+)\b/.exec(Aa[0]),qb=va&&"keyframes"==
va[1];if(va&&null==Pa)return mb.push(Aa[0]+";");for(let Ta in Pa){let Sa=Pa[Ta];if(/&/.test(Ta))za(Ta.split(/,\s*/).map(Ja=>Aa.map(Za=>Ja.replace(/&/,Za))).reduce((Ja,Za)=>Ja.concat(Za)),Sa,mb);else if(Sa&&"object"==typeof Sa){if(!va)throw new RangeError("The value of a property ("+Ta+") should be a primitive value.");za(sa(Ta),Sa,wa,qb)}else null!=Sa&&wa.push(Ta.replace(/_.*/,"").replace(/[A-Z]/g,Ja=>"-"+Ja.toLowerCase())+": "+Sa+";")}(wa.length||qb)&&mb.push((!Oa||va||Ia?Aa:Aa.map(Oa)).join(", ")+
" {"+wa.join(" ")+"}")}this.rules=[];let {finish:Oa}=oa||{};for(let Aa in xa)za(sa(Aa),xa[Aa],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let xa=Ha[Qa]||1;Ha[Qa]=xa+1;return"Í¼"+xa.toString(36)}static mount(xa,oa){(xa[Fa]||new pa(xa)).mount(Array.isArray(oa)?oa:[oa])}}B.StyleModule=Wa;let $a=new Map;class pa{constructor(xa){var oa=xa.ownerDocument||xa;let sa=oa.defaultView;if(!xa.head&&xa.adoptedStyleSheets&&sa.CSSStyleSheet){let za=$a.get(oa);if(za)return xa.adoptedStyleSheets=
[za.sheet,...xa.adoptedStyleSheets],xa[Fa]=za;this.sheet=new sa.CSSStyleSheet;xa.adoptedStyleSheets=[this.sheet,...xa.adoptedStyleSheets];$a.set(oa,this)}else this.styleTag=oa.createElement("style"),oa=xa.head||xa,oa.insertBefore(this.styleTag,oa.firstChild);this.modules=[];xa[Fa]=this}mount(xa){var oa=this.sheet;let sa=0,za=0;for(let Aa=0;Aa<xa.length;Aa++){let Pa=xa[Aa];var Oa=this.modules.indexOf(Pa);Oa<za&&-1<Oa&&(this.modules.splice(Oa,1),za--,Oa=-1);if(-1==Oa){if(this.modules.splice(za++,0,
Pa),oa)for(Oa=0;Oa<Pa.rules.length;Oa++)oa.insertRule(Pa.rules[Oa],sa++)}else{for(;za<Oa;)sa+=this.modules[za++].rules.length;sa+=Pa.rules.length;za++}}if(!oa){xa="";for(oa=0;oa<this.modules.length;oa++)xa+=this.modules[oa].getRules()+"\n";this.styleTag.textContent=xa}}}};
shadow$provide[3]=function(K,eb,vb,B){Object.defineProperty(B,"__esModule",{value:!0});B.keyName=function(pa){pa=!(Ha&&pa.metaKey&&pa.shiftKey&&!pa.ctrlKey&&!pa.altKey||Wa&&pa.shiftKey&&pa.key&&1==pa.key.length||"Unidentified"==pa.key)&&pa.key||(pa.shiftKey?Fa:Qa)[pa.keyCode]||pa.key||"Unidentified";"Esc"==pa&&(pa="Escape");"Del"==pa&&(pa="Delete");"Left"==pa&&(pa="ArrowLeft");"Up"==pa&&(pa="ArrowUp");"Right"==pa&&(pa="ArrowRight");"Down"==pa&&(pa="ArrowDown");return pa};B.shift=B.base=void 0;var Qa=
{8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",
191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};B.base=Qa;var Fa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"\x26",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"\x3c",189:"_",190:"\x3e",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'};B.shift=Fa;var Ha="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Wa="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(K=0;10>K;K++)Qa[48+K]=Qa[96+K]=String(K);for(K=1;24>=
K;K++)Qa[K+111]="F"+K;for(K=65;90>=K;K++)Qa[K]=String.fromCharCode(K+32),Fa[K]=String.fromCharCode(K);for(var $a in Qa)Fa.hasOwnProperty($a)||(Fa[$a]=Qa[$a])};
shadow$provide[4]=function(K,eb,vb,B){function Qa(a){return(11==a.nodeType?a.getSelection?a:a.ownerDocument:a).getSelection()}function Fa(a,b){return b?a==b||a.contains(1!=b.nodeType?b.parentNode:b):!1}function Ha(a,b){if(!b.anchorNode)return!1;try{return Fa(a,b.anchorNode)}catch(c){return!1}}function Wa(a){return 3==a.nodeType?Aa(a,0,a.nodeValue.length).getClientRects():1==a.nodeType?a.getClientRects():[]}function $a(a,b,c,e){return c?xa(a,b,c,e,-1)||xa(a,b,c,e,1):!1}function pa(a){for(var b=0;;b++)if(a=
a.previousSibling,!a)return b}function xa(a,b,c,e,f){for(;;){if(a==c&&b==e)return!0;if(b==(0>f?0:oa(a))){if("DIV"==a.nodeName)return!1;let k=a.parentNode;if(!k||1!=k.nodeType)return!1;b=pa(a)+(0>f?0:1);a=k}else if(1==a.nodeType){a=a.childNodes[b+(0>f?-1:0)];if(1==a.nodeType&&"false"==a.contentEditable)return!1;b=0>f?oa(a):0}else return!1}}function oa(a){return 3==a.nodeType?a.nodeValue.length:a.childNodes.length}function sa(a,b){b=b?a.left:a.right;return{left:b,right:b,top:a.top,bottom:a.bottom}}
function za(a){let b=a.ownerDocument;for(a=a.parentNode;a&&a!=b.body;)if(1==a.nodeType){if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)return a;a=a.assignedSlot||a.parentNode}else if(11==a.nodeType)a=a.host;else break;return null}function Oa(a){if(a.setActive)return a.setActive();if($b)return a.focus($b);let b=[];for(var c=a;c&&(b.push(c,c.scrollTop,c.scrollLeft),c!=c.ownerDocument);c=c.parentNode);a.focus(null==$b?{get preventScroll(){$b={preventScroll:!0};return!0}}:void 0);if(!$b)for($b=
!1,a=0;a<b.length;){c=b[a++];let e=b[a++],f=b[a++];c.scrollTop!=e&&(c.scrollTop=e);c.scrollLeft!=f&&(c.scrollLeft=f)}}function Aa(a,b,c=b){let e=xd||(xd=document.createRange());e.setEnd(a,c);e.setStart(a,b);return e}function Pa(a,b,c){c={key:b,code:b,keyCode:c,which:c,cancelable:!0};b=new KeyboardEvent("keydown",c);b.synthetic=!0;a.dispatchEvent(b);c=new KeyboardEvent("keyup",c);c.synthetic=!0;a.dispatchEvent(c);return b.defaultPrevented||c.defaultPrevented}function mb(a){for(;a;){if(a&&(9==a.nodeType||
11==a.nodeType&&a.host))return a;a=a.assignedSlot||a.parentNode}return null}function Ia(a){for(;a.attributes.length;)a.removeAttributeNode(a.attributes[0])}function wa(a){let b=a.nextSibling;a.parentNode.removeChild(a);return b}function va(a,b,c,e,f,k,r,t,z){let {children:E}=a,G=E.length?E[b]:null,O=k.length?k[k.length-1]:null,W=O?O.breakAfter:r;if(!(b==e&&G&&!r&&!W&&2>k.length&&G.merge(c,f,k.length?O:null,0==c,t,z))){if(e<E.length){let Z=E[e];if(Z&&f<Z.length)b==e&&(Z=Z.split(f),f=0),!W&&O&&Z.merge(0,
f,O,!0,0,z)?k[k.length-1]=Z:(f&&Z.merge(0,f,null,!1,0,z),k.push(Z));else if(null===Z||void 0===Z?0:Z.breakAfter)O?O.breakAfter=1:r=1;e++}G&&(G.breakAfter=r,0<c&&(!r&&k.length&&G.merge(c,G.length,k[0],!1,t,0)?G.breakAfter=k.shift().breakAfter:(c<G.length||G.children.length&&0==G.children[G.children.length-1].length)&&G.merge(c,G.length,null,!1,t,0),b++));for(;b<e&&k.length;)if(E[e-1].become(k[k.length-1]))e--,k.pop(),z=k.length?0:t;else if(E[b].become(k[0]))b++,k.shift(),t=k.length?0:z;else break;
!k.length&&b&&e<E.length&&!E[b-1].breakAfter&&E[e].merge(0,0,E[b-1],!1,t,z)&&b--;(b<e||k.length)&&a.replaceChildren(b,e,k)}}function qb(a,b,c,e,f,k){let r=a.childCursor(),{i:t,off:z}=r.findPos(c,1),{i:E,off:G}=r.findPos(b,-1);b-=c;for(let O of e)b+=O.length;a.length+=b;va(a,E,G,t,z,e,0,f,k)}function Ta(a,b,c){let e=a.nodeValue.length;b>e&&(b=e);let f=b,k=b,r=0;0==b&&0>c||b==e&&0<=c?ta.chrome||ta.gecko||(b?(f--,r=1):k<e&&(k++,r=-1)):0>c?f--:k<e&&k++;a=Aa(a,f,k).getClientRects();if(!a.length)return null;
c=a[(r?0>r:0<=c)?0:a.length-1];ta.safari&&!r&&0==c.width&&(c=Array.prototype.find.call(a,t=>t.width)||c);return r?sa(c,0>r):c||null}function Sa(a,b,c,e,f,k,r){if(c instanceof hc){for(let t=c.dom.firstChild;t;t=t.nextSibling){let z=rb.get(t);if(z){let E=Fa(t,e),G=z.length+(E?f:0);if(a<G||a==G&&0>=z.getSide())return E?Sa(a,b,z,e,f,k,r):k(z,a,b);a-=G}else if(a=Ja(a,b,t,r),"number"!=typeof a)return a}return k(c,c.length,-1)}return c.dom==e?r(e,a,b):k(c,a,b)}function Ja(a,b,c,e){if(3==c.nodeType){let f=
c.nodeValue.length;if(a<=f)return e(c,a,b);a-=f}else if(1==c.nodeType&&"false"!=c.contentEditable)for(c=c.firstChild;c;c=c.nextSibling)if(a=Ja(a,b,c,e),"number"!=typeof a)return a;return a}function Za(a,b,c,e,f){if(c instanceof hc){let r=0;for(let t=c.dom.firstChild;t;t=t.nextSibling){var k=rb.get(t);if(k){let z=Fa(t,e);if(Fa(t,a))return r+(z?Za(a,b,k,e,f):k.localPosFromDOM(a,b));r+=k.length+(z?f:0)}else{k=Gb(a,b,t);if(null!=k.result)return r+k.result;r+=k.size}}}else if(c.dom==e)return Math.min(b,
e.nodeValue.length);return c.localPosFromDOM(a,b)}function Gb(a,b,c){if(3==c.nodeType)return a==c?{result:b}:{size:c.nodeValue.length};if(1==c.nodeType&&"false"!=c.contentEditable){let e=0;for(let f=c.firstChild,k=0;;f=f.nextSibling,k++){if(a==c&&k==b)return{result:e};if(!f)return{size:e};let r=Gb(a,b,f);if(null!=r.result)return{result:b+r.result};e+=r.size}}else return c.contains(a)?{result:0}:{size:0}}function Ma(a,b){let c=a.dom;({children:a}=a);var e=0;for(var f=0;e<a.length;e++){let k=a[e],r=
f+k.length;if(!(r==f&&0>=k.getSide())){if(b>f&&b<r&&k.dom.parentNode==c)return k.domAtPos(b-f);if(b<=f)break;f=r}}for(b=e;0<b;b--)if(f=a[b-1],f.dom.parentNode==c)return f.domAtPos(f.length);for(;e<a.length;e++)if(b=a[e],b.dom.parentNode==c)return b.domAtPos(0);return new Ib(c,0)}function bb(a,b,c){let e,{children:f}=a;0<c&&b instanceof hc&&f.length&&(e=f[f.length-1])instanceof hc&&e.mark.eq(b.mark)?bb(e,b.children[0],c-1):(f.push(b),b.setParent(a));a.length+=b.length}function ca(a,b,c){function e(z,
E){for(let G=0,O=0;G<z.children.length&&O<=E;G++){let W=z.children[G],Z=O+W.length;if(Z>=E)if(W.children.length)e(W,E-O);else if((!r||r.isHidden&&0<c)&&(Z>E||O==Z&&0<W.getSide()))r=W,t=E-O;else if(O<E||O==Z&&0>W.getSide()&&!W.isHidden)f=W,k=E-O;O=Z}}let f=null,k=-1,r=null,t=-1;e(a,b);return(b=(0>c?f:r)||f||r)?b.coordsAt(Math.max(0,b==f?k:t),c):ha(a)}function ha(a){let b=a.dom.lastChild;if(!b)return a.dom.getBoundingClientRect();a=Wa(b);return a[a.length-1]||null}function ma(a,b){for(let c in a)"class"==
c&&b.class?b.class+=" "+a.class:"style"==c&&b.style?b.style+=";"+a.style:b[c]=a[c];return b}function qa(a,b){if(a==b)return!0;if(!a||!b)return!1;let c=Object.keys(a),e=Object.keys(b);if(c.length!=e.length)return!1;for(let f of c)if(-1==e.indexOf(f)||a[f]!==b[f])return!1;return!0}function ya(a,b,c){let e=null;if(b)for(let f in b)c&&f in c||a.removeAttribute(e=f);if(c)for(let f in c)b&&b[f]==c[f]||a.setAttribute(e=f,c[f]);return!!e}function La(a,b=!1){let {inclusiveStart:c,inclusiveEnd:e}=a;null==c&&
(c=a.inclusive);null==e&&(e=a.inclusive);return{start:null!==c&&void 0!==c?c:b,end:null!==e&&void 0!==e?e:b}}function m(a,b,c,e=0){let f=c.length-1;0<=f&&c[f]+e>=a?c[f]=Math.max(c[f],b):c.push(a,b)}function x(a,b){for(let c of b)a=new hc(c,[a],a.length);return a}function C(a,b,c){a=a.facet(yd);if(a.length)a[0](b);else if(window.onerror)window.onerror(String(b),c,void 0,void 0,b);else c?console.error(c+":",b):console.error(b)}function D(a){let b=0,c=0,e=0,f=0;for(let k of a.state.facet(zd)){let r=
k(a);r&&(null!=r.left&&(b=Math.max(b,r.left)),null!=r.right&&(c=Math.max(c,r.right)),null!=r.top&&(e=Math.max(e,r.top)),null!=r.bottom&&(f=Math.max(f,r.bottom)))}return{left:b,right:c,top:e,bottom:f}}function J(a){let b=[];for(let c=0;c<a.length;c++)b.push(1<<+a[c]);return b}function N(a,b){let c=a.length;var e=b==Tc?1:2;b=b==Tc?2:1;if(!a||1==e&&!Ee.test(a))return[new ic(0,c,0)];for(let t=0,z=e,E=e;t<c;t++){var f=a.charCodeAt(t);f=247>=f?Fe[f]:1424<=f&&1524>=f?2:1536<=f&&1785>=f?Ge[f-1536]:1774<=
f&&2220>=f?4:8192<=f&&8203>=f?256:64336<=f&&65023>=f?4:8204==f?256:1;512==f?f=z:8==f&&4==E&&(f=16);tb[t]=4==f?2:f;f&7&&(E=f);z=f}for(let t=0,z=e,E=e;t<c;t++){f=tb[t];if(128==f)t<c-1&&z==tb[t+1]&&z&24?f=tb[t]=z:tb[t]=256;else if(64==f){for(var k=t+1;k<c&&64==tb[k];)k++;var r=t&&8==z||k<c&&8==tb[k]?1==E?1:8:256;for(let G=t;G<k;G++)tb[G]=r;t=k-1}else 8==f&&1==E&&(tb[t]=1);z=f;f&7&&(E=f)}for(let t=0,z=0,E=0,G,O,W;t<c;t++)if(O=Uc[G=a.charCodeAt(t)])if(0>O)for(f=z-3;0<=f;f-=3){if(Xb[f+1]==-O){k=Xb[f+2];
(k=k&2?e:k&4?k&1?b:e:0)&&(tb[t]=tb[Xb[f]]=k);z=f;break}}else if(189==Xb.length)break;else Xb[z++]=t,Xb[z++]=G,Xb[z++]=E;else if(2==(W=tb[t])||1==W)for(E=(f=W==e)?0:1,k=z-3;0<=k;k-=3){r=Xb[k+2];if(r&2)break;if(f)Xb[k+2]|=2;else{if(r&4)break;Xb[k+2]|=4}}for(b=0;b<c;b++)if(256==tb[b]){for(a=b+1;a<c&&256==tb[a];)a++;f=1==(b?tb[b-1]:e);for(f=f==(1==(a<c?tb[a]:e))?f?1:2:e;b<a;b++)tb[b]=f;b=a-1}a=[];if(1==e)for(e=0;e<c;){b=e;for(f=1!=tb[e++];e<c&&f==(1!=tb[e]);)e++;if(f)for(f=e;f>b;){k=f;for(r=2!=tb[--f];f>
b&&r==(2!=tb[f-1]);)f--;a.push(new ic(f,k,r?2:1))}else a.push(new ic(b,e,0))}else for(e=0;e<c;){b=e;for(f=2==tb[e++];e<c&&f==(2==tb[e]);)e++;a.push(new ic(b,e,f?1:2))}return a}function M(a,b,c,e,f){var k;let r=e.head-a.from,t=-1;if(0==r){if(!f||!a.length)return null;b[0].level!=c&&(r=b[0].side(!1,c),t=0)}else if(r==a.length){if(f)return null;var z=b[b.length-1];z.level!=c&&(r=z.side(!0,c),t=b.length-1)}0>t&&(t=ic.find(b,r,null!==(k=e.bidiLevel)&&void 0!==k?k:-1,e.assoc));e=b[t];r==e.side(f,c)&&(e=
b[t+=f?1:-1],r=e.side(!f,c));z=f==(e.dir==c);k=(0,Q.findClusterBreak)(a.text,r,z);Ad=a.text.slice(Math.min(r,k),Math.max(r,k));return k!=e.side(f,c)?Q.EditorSelection.cursor(k+a.from,z?-1:1,e.level):(b=t==(f?b.length-1:0)?null:b[t+(f?1:-1)])||e.level==c?b&&b.level<e.level?Q.EditorSelection.cursor(b.side(!f,c)+a.from,f?1:-1,b.level):Q.EditorSelection.cursor(k+a.from,f?-1:1,e.level):Q.EditorSelection.cursor(f?a.to:a.from,f?-1:1,c)}function la(a){return 1==a.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(a.nodeName)}
function ja(a){var b=a.observer.selectionRange;b=b.focusNode&&Ua(b.focusNode,b.focusOffset,0);if(!b)return null;a=a.docView.nearest(b);if(!a)return null;if(a instanceof Tb){for(var c=b;c.parentNode!=a.dom;)c=c.parentNode;let e=c.previousSibling;for(;e&&!rb.get(e);)e=e.previousSibling;a=e?rb.get(e).posAtEnd:a.posAtStart;return{from:a,to:a,node:c,text:b}}for(;;){({parent:c}=a);if(!c)return null;if(c instanceof Tb)break;a=c}c=a.posAtStart;return{from:c,to:c+a.length,node:a.dom,text:b}}function ea(a,
b){var c=ja(a);if(!c)return hb.none;let {from:e,to:f,node:k,text:r}=c;c=b.mapPos(e,1);b=Math.max(c,b.mapPos(f,-1));({state:a}=a);var t=new Bd([],a);3==k.nodeType?t.readTextNode(k):t.readRange(k.firstChild,null);({text:t}=t);if(-1<t.indexOf("ï¿¿"))return hb.none;if(b-c<t.length)if(a.doc.sliceString(c,Math.min(a.doc.length,c+t.length))==t)b=c+t.length;else if(a.doc.sliceString(Math.max(0,b-t.length),b)==t)c=b-t.length;else return hb.none;else if(a.doc.sliceString(c,b)!=t)return hb.none;a=rb.get(k);a instanceof
Cd?a=a.widget.topView:a&&(a.parent=null);return hb.set(hb.replace({widget:new He(k,r,a),inclusive:!0}).range(c,b))}function Ua(a,b,c){if(0>=c)for(let e=a,f=b;;){if(3==e.nodeType)return e;if(1==e.nodeType&&0<f)e=e.childNodes[f-1],f=oa(e);else break}if(0<=c)for(let e=a,f=b;;){if(3==e.nodeType)return e;if(1==e.nodeType&&f<e.childNodes.length&&0<=c)e=e.childNodes[f],f=0;else break}return null}function l(a,b,c){let e=new Ie;Q.RangeSet.compare(a,b,c,e);return e.changes}function w(a,b,c=1){let e=a.charCategorizer(b);
a=a.doc.lineAt(b);var f=b-a.from;if(0==a.length)return Q.EditorSelection.cursor(b);0==f?c=1:f==a.length&&(c=-1);let k=b=f;0>c?b=(0,Q.findClusterBreak)(a.text,f,!1):k=(0,Q.findClusterBreak)(a.text,f);for(c=e(a.text.slice(b,k));0<b;){f=(0,Q.findClusterBreak)(a.text,b,!1);if(e(a.text.slice(f,b))!=c)break;b=f}for(;k<a.length;){f=(0,Q.findClusterBreak)(a.text,k);if(e(a.text.slice(k,f))!=c)break;k=f}return Q.EditorSelection.range(b+a.from,k+a.from)}function F(a,b){return a.top<b.bottom-1&&a.bottom>b.top+
1}function H(a,b){return b<a.top?{top:b,left:a.left,right:a.right,bottom:a.bottom}:a}function U(a,b){return b>a.bottom?{top:a.top,left:a.left,right:a.right,bottom:b}:a}function S(a,b,c){let e,f;let k;var r=!1;let t,z,E,G;for(let W=a.firstChild;W;W=W.nextSibling){let Z=Wa(W);for(let fa=0;fa<Z.length;fa++){let Y=Z[fa];f&&F(f,Y)&&(Y=H(U(Y,f.bottom),f.top));let Ka=Y.left>b?Y.left-b:Math.max(0,b-Y.right),Ba=Y.top>c?Y.top-c:Math.max(0,c-Y.bottom);if(0==Ka&&0==Ba)return 3==W.nodeType?da(W,b,c):S(W,b,c);
if(!e||k>Ba||k==Ba&&O>Ka){e=W;f=Y;var O=Ka;r=(k=Ba)?c<Y.top?-1:1:Ka?b<Y.left?-1:1:0;r=!r||(0<r?fa<Z.length-1:0<fa)}0==Ka?c>Y.bottom&&(!E||E.bottom<Y.bottom)?(t=W,E=Y):c<Y.top&&(!G||G.top>Y.top)&&(z=W,G=Y):E&&F(E,Y)?E=U(E,Y.bottom):G&&F(G,Y)&&(G=H(G,Y.top))}}E&&E.bottom>=c?(e=t,f=E):G&&G.top<=c&&(e=z,f=G);if(!e)return{node:a,offset:0};O=Math.max(f.left,Math.min(f.right,b));if(3==e.nodeType)return da(e,O,c);if(r&&"false"!=e.contentEditable)return S(e,O,c);b=Array.prototype.indexOf.call(a.childNodes,
e)+(b>=(f.left+f.right)/2?1:0);return{node:a,offset:b}}function da(a,b,c){let e=a.nodeValue.length;var f=-1,k=1E9;let r=0;for(let t=0;t<e;t++){let z=Aa(a,t,t+1).getClientRects();for(let E=0;E<z.length;E++){let G=z[E];if(G.top==G.bottom)continue;r||(r=b-G.left);let O=(G.top>c?G.top-c:c-G.bottom)-1;if(G.left-1<=b&&G.right+1>=b&&O<k){k=f=b>=(G.left+G.right)/2;(ta.chrome||ta.gecko)&&Aa(a,t).getBoundingClientRect().left==G.right&&(k=!f);if(0>=O)return{node:a,offset:t+(k?1:0)};f=t+(k?1:0);k=O}}}return{node:a,
offset:-1<f?f:0<r?a.nodeValue.length:0}}function ka(a,b,c,e=-1){var f,k,r=a.contentDOM.getBoundingClientRect(),t=r.top+a.viewState.paddingTop;let z;var {docHeight:E}=a.viewState;let {x:G,y:O}=b,W=O-t;if(0>W)return 0;if(W>E)return a.state.doc.length;for(let Y=a.defaultLineHeight/2,Ka=!1;;){z=a.elementAtHeight(W);if(z.type==sb.Text)break;for(;;){W=0<e?z.bottom+Y:z.top-Y;if(0<=W&&W<=E)break;if(Ka)return c?null:0;Ka=!0;e=-e}}O=t+W;e=z.from;if(e<a.viewport.from)return 0==a.viewport.from?0:c?null:ba(a,
r,z,G,O);if(e>a.viewport.to)return a.viewport.to==a.state.doc.length?a.state.doc.length:c?null:ba(a,r,z,G,O);c=a.dom.ownerDocument;E=a.root.elementFromPoint?a.root:c;(t=E.elementFromPoint(G,O))&&!a.contentDOM.contains(t)&&(t=null);t||(G=Math.max(r.left+1,Math.min(r.right-1,G)),(t=E.elementFromPoint(G,O))&&!a.contentDOM.contains(t)&&(t=null));var Z;r=-1;if(t&&0!=(null===(f=a.docView.nearest(t))||void 0===f?void 0:f.isEditable))if(c.caretPositionFromPoint){var fa=c.caretPositionFromPoint(G,O);fa&&({offsetNode:Z,
offset:r}=fa)}else if(c.caretRangeFromPoint&&(f=c.caretRangeFromPoint(G,O))){({startContainer:Z,startOffset:r}=f);if(!(f=!a.contentDOM.contains(Z))&&(f=ta.safari))a:if(f=G,3!=Z.nodeType||r!=(fa=Z.nodeValue.length))f=!1;else{for(c=Z.nextSibling;c;c=c.nextSibling)if(1!=c.nodeType||"BR"!=c.nodeName){f=!1;break a}f=Aa(Z,fa-1,fa).getBoundingClientRect().left>f}if(!(fa=f)&&(fa=ta.chrome))a:if(f=Z,fa=G,0!=r)fa=!1;else{for(c=f;;){t=c.parentNode;if(!t||1!=t.nodeType||t.firstChild!=c){fa=!1;break a}if(t.classList.contains("cm-line"))break;
c=t}f=1==f.nodeType?f.getBoundingClientRect():Aa(f,0,Math.max(f.nodeValue.length,1)).getBoundingClientRect();fa=5<fa-f.left}fa&&(Z=void 0)}if(!Z||!a.docView.dom.contains(Z)){Z=Tb.find(a.docView,e);if(!Z)return W>z.top+z.height/2?z.to:z.from;({node:Z,offset:r}=S(Z.dom,G,O))}a=a.docView.nearest(Z);return a?a.isWidget&&1==(null===(k=a.dom)||void 0===k?void 0:k.nodeType)?(k=a.dom.getBoundingClientRect(),b.y<k.top||b.y<=k.bottom&&b.x<=(k.left+k.right)/2?a.posAtStart:a.posAtEnd):a.localPosFromDOM(Z,r)+
a.posAtStart:null}function ba(a,b,c,e,f){b=Math.round((e-b.left)*a.defaultCharacterWidth);a.lineWrapping&&c.height>1.5*a.defaultLineHeight&&(b+=Math.floor((f-c.top)/a.defaultLineHeight)*a.viewState.heightOracle.lineLength);f=a.state.sliceDoc(c.from,c.to);return c.from+(0,Q.findColumn)(f,b,a.state.tabSize)}function ia(a,b){a=a.lineBlockAt(b);if(Array.isArray(a.type))for(let c of a.type)if(c.to>b||c.to==b&&(c.to==a.to||c.type==sb.Text))return c;return a}function ua(a,b,c,e){let f=a.state.doc.lineAt(b.head),
k=a.bidiSpans(f),r=a.textDirectionAt(f.from);for(let t=b,z=null;;){b=M(f,k,r,t,c);let E=Ad;if(!b){if(f.number==(c?a.state.doc.lines:1))return t;E="\n";f=a.state.doc.line(f.number+(c?1:-1));k=a.bidiSpans(f);b=Q.EditorSelection.cursor(c?f.from:f.to)}if(!z){if(!e)return b;z=e(E)}else if(!z(E))return t;t=b}}function Ea(a,b,c){let e=a.state.charCategorizer(b),f=e(c);return k=>{k=e(k);f==Q.CharCategory.Space&&(f=k);return f==k}}function Ga(a,b,c){for(;;){let e=0;for(let f of a)f.between(b-1,b+1,(k,r,t)=>
{b>k&&b<r&&(t=e||c||(b-k<r-b?-1:1),b=0>t?k:r,e=t)});if(!e)return b}}function pb(a,b,c){b=Ga(a.state.facet(Vc).map(e=>e(a)),c.from,b.head>c.from?-1:1);return b==c.from?c:Q.EditorSelection.cursor(b,b<c.from?1:-1)}function Da(a,b){a=a.state.facet(Dd);return a.length?a[0](b):ta.mac?b.metaKey:b.ctrlKey}function Ab(a,b){a=a.state.facet(Ed);return a.length?a[0](b):ta.mac?!b.altKey:!b.ctrlKey}function Ya(a,b){var {main:c}=a.state.selection;if(c.empty)return!1;a=Qa(a.root);if(!a||0==a.rangeCount)return!0;
a=a.getRangeAt(0).getClientRects();for(c=0;c<a.length;c++){let e=a[c];if(e.left<=b.clientX&&e.right>=b.clientX&&e.top<=b.clientY&&e.bottom>=b.clientY)return!0}return!1}function yb(a,b){if(!b.bubbles)return!0;if(b.defaultPrevented)return!1;for(let c=b.target,e;c!=a.contentDOM;c=c.parentNode)if(!c||11==c.nodeType||(e=rb.get(c))&&e.ignoreEvent(b))return!1;return!0}function Rb(a){let b=a.dom.parentNode;if(b){var c=b.appendChild(document.createElement("textarea"));c.style.cssText="position: fixed; left: -10000px; top: 10px";
c.focus();setTimeout(()=>{a.focus();c.remove();Ca(a,c.value)},50)}}function Ca(a,b){let {state:c}=a,e,f=1,k=c.toText(b),r=k.lines==c.selection.ranges.length;if(null!=Wc&&c.selection.ranges.every(t=>t.empty)&&Wc==k.toString()){let t=-1;e=c.changeByRange(z=>{let E=c.doc.lineAt(z.from);if(E.from==t)return{range:z};t=E.from;let G=c.toText((r?k.line(f++).text:b)+c.lineBreak);return{changes:{from:E.from,insert:G},range:Q.EditorSelection.cursor(z.from+G.length)}})}else e=r?c.changeByRange(t=>{let z=k.line(f++);
return{changes:{from:t.from,to:t.to,insert:z.text},range:Q.EditorSelection.cursor(t.from+z.length)}}):c.replaceSelection(k);a.dispatch(e,{userEvent:"input.paste",scrollIntoView:!0})}function ra(a,b,c,e){if(1==e)return Q.EditorSelection.cursor(b,c);if(2==e)return w(a.state,b,c);c=Tb.find(a.docView,b);b=a.state.doc.lineAt(c?c.posAtEnd:b);e=c?c.posAtStart:b.from;c=c?c.posAtEnd:b.to;c<a.state.doc.length&&c==b.to&&c++;return Q.EditorSelection.range(e,c)}function Ra(a,b){let c=a.posAtCoords({x:b.clientX,
y:b.clientY},!1);{var e=b.clientX;b=b.clientY;let r=Tb.find(a.docView,c);if(r){var f=c-r.posAtStart;if(0==f)e=1;else if(f==r.length)e=-1;else{a=r.coordsAt(f,-1);var k;if(k=a)k=b>=a.top&&b<=a.bottom&&e>=a.left&&e<=a.right;if(k)e=-1;else{if(k=f=r.coordsAt(f,1))k=b>=f.top&&b<=f.bottom&&e>=f.left&&e<=f.right;e=k?1:a&&b>=a.top&&b<=a.bottom?-1:1}}}else e=1}return{pos:c,bias:e}}function kb(a){if(!Je)return a.detail;let b=Fd,c=Gd;Fd=a;Gd=Date.now();return Hd=!b||c>Date.now()-400&&2>Math.abs(b.clientX-a.clientX)&&
2>Math.abs(b.clientY-a.clientY)?(Hd+1)%3:1}function ab(a,b){let c=Ra(a,b),e=kb(b),f=a.state.selection;return{update(k){k.docChanged&&(c.pos=k.changes.mapPos(c.pos),f=f.map(k.changes))},get(k,r,t){var z=Ra(a,k);k=ra(a,z.pos,z.bias,e);if(c.pos!=z.pos&&!r){var E=ra(a,c.pos,c.bias,e);let O=Math.min(E.from,k.from);E=Math.max(E.to,k.to);k=O<k.from?Q.EditorSelection.range(O,E):Q.EditorSelection.range(E,O)}if(r)return f.replaceRange(f.main.extend(k.from,k.to));if(r=t&&1==e&&1<f.ranges.length){a:{var G=f;
z=z.pos;for(r=0;r<G.ranges.length;r++){let {from:O,to:W}=G.ranges[r];if(O<=z&&W>=z){z=Q.EditorSelection.create(G.ranges.slice(0,r).concat(G.ranges.slice(r+1)),G.mainIndex==r?0:G.mainIndex-(G.mainIndex>r?1:0));break a}}z=null}r=G=z}return r?G:t?f.addRange(k):Q.EditorSelection.create([k])}}}function Xa(a,b,c,e){if(c){var f=a.posAtCoords({x:b.clientX,y:b.clientY},!1);b.preventDefault();({mouseSelection:b}=a.inputState);e=e&&b&&b.dragging&&b.dragMove?{from:b.dragging.from,to:b.dragging.to}:null;c={from:f,
insert:c};c=a.state.changes(e?[e,c]:c);a.focus();a.dispatch({changes:c,selection:{anchor:c.mapPos(f,-1),head:c.mapPos(f,1)},userEvent:e?"move.drop":"input.drop"})}}function Va(a,b){let c=a.dom.parentNode;if(c){var e=c.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px";e.value=b;e.focus();e.selectionEnd=b.length;e.selectionStart=0;setTimeout(()=>{e.remove();a.focus()},50)}}function ob(a,b){let c=[];for(let e of a.facet(Id)){let f=e(a,b);f&&
c.push(f)}return c?a.update({effects:c,annotations:Jd.of(!0)}):null}function Cb(a){setTimeout(()=>{var b=a.hasFocus;b!=a.inputState.notifiedFocused&&((b=ob(a.state,b))?a.dispatch(b):a.update([]))},10)}function Bb(a,b){let c,e;null==a[b]&&(c=a[b-1])instanceof Jb&&(e=a[b+1])instanceof Jb&&a.splice(b-1,3,new Jb(c.length+1+e.length))}function fb(a,b,c){let e=new Ke;Q.RangeSet.compare(a,b,c,e,0);return e.changes}function ib(a,b){let c=a.getBoundingClientRect(),e=a.ownerDocument;var f=e.defaultView||window;
let k=Math.max(0,c.left),r=Math.min(f.innerWidth,c.right),t=Math.max(0,c.top);f=Math.min(f.innerHeight,c.bottom);for(let z=a.parentNode;z&&z!=e.body;)if(1==z.nodeType){let E=z,G=window.getComputedStyle(E);if((E.scrollHeight>E.clientHeight||E.scrollWidth>E.clientWidth)&&"visible"!=G.overflow){let O=E.getBoundingClientRect();k=Math.max(k,O.left);r=Math.min(r,O.right);t=Math.max(t,O.top);f=z==a.parentNode?O.bottom:Math.min(f,O.bottom)}z="absolute"==G.position||"fixed"==G.position?E.offsetParent:E.parentNode}else if(11==
z.nodeType)z=z.host;else break;return{left:k-c.left,right:Math.max(k,r)-c.left,top:t-(c.top+b),bottom:Math.max(t,f)-(c.top+b)}}function wb(a,b){a=a.getBoundingClientRect();return{left:0,right:a.right-a.left,top:b,bottom:a.bottom-(a.top+b)}}function gb(a,b,c){let e=[],f=a,k=0;Q.RangeSet.spans(c,a,b,{span(){},point(r,t){r>f&&(e.push({from:f,to:r}),k+=r-f);f=t}},20);f<b&&(e.push({from:f,to:b}),k+=b-f);return{total:k,ranges:e}}function Fb({total:a,ranges:b},c){if(0>=c)return b[0].from;if(1<=c)return b[b.length-
1].to;a=Math.floor(a*c);for(c=0;;c++){let {from:e,to:f}=b[c],k=f-e;if(a<=k)return e+a;a-=k}}function Hb(a,b){let c=0;for(let {from:e,to:f}of a.ranges){if(b<=f){c+=b-e;break}c+=f-e}return c/a.total}function lb(a,b){for(let c of a)if(b(c))return c}function xb(a,b){if(1==b.scale)return a;let c=b.toDOM(a.top),e=b.toDOM(a.bottom);return new ac(a.from,a.length,c,e-c,Array.isArray(a._content)?a._content.map(f=>xb(f,b)):a._content)}function Nb(a,b,c){return new bc.StyleModule(b,{finish(e){return/&/.test(e)?
e.replace(/&\w*/,f=>{if("\x26"==f)return a;if(!c||!c[f])throw new RangeError(`Unsupported selector: ${f}`);return c[f]}):a+" "+e}})}function Wb(a,b){let c;var {newSel:e}=b;let f=a.state.selection.main;var k=a.inputState.lastKeyTime>Date.now()-100?a.inputState.lastKeyCode:-1;if(b.bounds){let {from:t,to:z}=b.bounds;var r=f.from;let E=null;if(8===k||ta.android&&b.text.length<z-t)r=f.to,E="end";if(r=Db(a.state.doc.sliceString(t,z,"ï¿¿"),b.text,r-t,E))ta.chrome&&13==k&&r.toB==r.from+2&&"ï¿¿ï¿¿"==b.text.slice(r.from,
r.toB)&&r.toB--,c={from:t+r.from,to:t+r.toA,insert:Q.Text.of(b.text.slice(r.from,r.toB).split("ï¿¿"))}}else e&&(!a.hasFocus&&a.state.facet(Ec)||e.main.eq(f))&&(e=null);if(!c&&!e)return!1;!c&&b.typeOver&&!f.empty&&e&&e.main.empty?c={from:f.from,to:f.to,insert:a.state.doc.slice(f.from,f.to)}:c&&c.from>=f.from&&c.to<=f.to&&(c.from!=f.from||c.to!=f.to)&&4>=f.to-f.from-(c.to-c.from)?c={from:f.from,to:f.to,insert:a.state.doc.slice(f.from,c.from).append(c.insert).append(a.state.doc.slice(c.to,f.to))}:(ta.mac||
ta.android)&&c&&c.from==c.to&&c.from==f.head-1&&/^\. ?$/.test(c.insert.toString())&&"off"==a.contentDOM.getAttribute("autocorrect")?(e&&2==c.insert.length&&(e=Q.EditorSelection.single(e.main.anchor-1,e.main.head-1)),c={from:f.from,to:f.to,insert:Q.Text.of([" "])}):ta.chrome&&c&&c.from==c.to&&c.from==f.head&&"\n "==c.insert.toString()&&a.lineWrapping&&(e&&(e=Q.EditorSelection.single(e.main.anchor-1,e.main.head-1)),c={from:f.from,to:f.to,insert:Q.Text.of([" "])});if(c){let t=a.state;if(ta.ios&&a.inputState.flushIOSKey(a)||
ta.android&&(c.from==f.from&&c.to==f.to&&1==c.insert.length&&2==c.insert.lines&&Pa(a.contentDOM,"Enter",13)||(c.from==f.from-1&&c.to==f.to&&0==c.insert.length||8==k&&c.insert.length<c.to-c.from)&&Pa(a.contentDOM,"Backspace",8)||c.from==f.from&&c.to==f.to+1&&0==c.insert.length&&Pa(a.contentDOM,"Delete",46)))return!0;let z=c.insert.toString();if(a.state.facet(Kd).some(E=>E(a,c.from,c.to,z)))return!0;0<=a.inputState.composing&&a.inputState.composing++;if(c.from>=f.from&&c.to<=f.to&&c.to-c.from>=(f.to-
f.from)/3&&(!e||e.main.empty&&e.main.from==c.from+c.insert.length)&&0>a.inputState.composing)e=f.from<c.from?t.sliceDoc(f.from,c.from):"",b=f.to>c.to?t.sliceDoc(c.to,f.to):"",e=t.replaceSelection(a.state.toText(e+c.insert.sliceString(0,void 0,a.state.lineBreak)+b));else{let E=t.changes(c),G=e&&e.main.to<=E.newLength?e.main:void 0;if(1<t.selection.ranges.length&&0<=a.inputState.composing&&c.to<=f.to&&c.to>=f.to-10){let O=a.state.sliceDoc(c.from,c.to),W=ja(a)||a.state.doc.lineAt(f.head),Z=f.to-c.to,
fa=f.to-f.from;e=t.changeByRange(Y=>{if(Y.from==f.from&&Y.to==f.to)return{changes:E,range:G||Y.map(E)};var Ka=Y.to-Z,Ba=Ka-O.length;if(Y.to-Y.from!=fa||a.state.sliceDoc(Ba,Ka)!=O||W&&Y.to>=W.from&&Y.from<=W.to)return{range:Y};Ka=t.changes({from:Ba,to:Ka,insert:c.insert});Ba=Y.to-f.to;return{changes:Ka,range:G?Q.EditorSelection.range(Math.max(0,G.anchor+Ba),Math.max(0,G.head+Ba)):Y.map(Ka)}})}else e={changes:E,selection:G&&t.selection.replaceRange(G)}}b="input.type";if(a.composing||a.inputState.compositionPendingChange&&
a.inputState.compositionEndedAt>Date.now()-50)a.inputState.compositionPendingChange=!1,b+=".compose",a.inputState.compositionFirstChange&&(b+=".start",a.inputState.compositionFirstChange=!1);a.dispatch(e,{scrollIntoView:!0,userEvent:b});return!0}return e&&!e.main.eq(f)?(b=!1,k="select",a.inputState.lastSelectionTime>Date.now()-50&&("select"==a.inputState.lastSelectionOrigin&&(b=!0),k=a.inputState.lastSelectionOrigin),a.dispatch({selection:e,scrollIntoView:b,userEvent:k}),!0):!1}function Db(a,b,c,
e){var f=Math.min(a.length,b.length);let k=0;for(;k<f&&a.charCodeAt(k)==b.charCodeAt(k);)k++;if(k==f&&a.length==b.length)return null;f=a.length;let r=b.length;for(;0<f&&0<r&&a.charCodeAt(f-1)==b.charCodeAt(r-1);)f--,r--;"end"==e&&(c-=f+Math.max(0,k-Math.min(f,r))-k);f<k&&a.length<b.length?(k-=c<=k&&c>=f?k-c:0,r=k+(r-f),f=k):r<k&&(k-=c<=k&&c>=r?k-c:0,f=k+(f-r),r=k);return{from:k,toA:f,toB:r}}function Qb(a,b,c){for(;b;){var e=rb.get(b);if(e&&e.parent==a)return e;e=b.parentNode;b=e!=a.dom?e:0<c?b.nextSibling:
b.previousSibling}return null}function gc(a){function b(t){t.preventDefault();t.stopImmediatePropagation();c=t.getTargetRanges()[0]}let c=null;a.contentDOM.addEventListener("beforeinput",b,!0);a.dom.ownerDocument.execCommand("indent");a.contentDOM.removeEventListener("beforeinput",b,!0);if(!c)return null;let e=c.startContainer,f=c.startOffset,k=c.endContainer,r=c.endOffset;a=a.docView.domAtPos(a.state.selection.main.anchor);$a(a.node,a.offset,k,r)&&([e,f,k,r]=[k,r,e,f]);return{anchorNode:e,anchorOffset:f,
focusNode:k,focusOffset:r}}function ec(a,b,c){for(let e=a.state.facet(b),f=e.length-1;0<=f;f--)b=e[f],(b="function"==typeof b?b(a):b)&&ma(b,c);return c}function Sb(a,b,c){b.altKey&&(a="Alt-"+a);b.ctrlKey&&(a="Ctrl-"+a);b.metaKey&&(a="Meta-"+a);!1!==c&&b.shiftKey&&(a="Shift-"+a);return a}function d(a){a=a.facet(Ld);let b=Md.get(a);b||Md.set(a,b=g(a.reduce((c,e)=>c.concat(e),[])));return b}function g(a,b=Le){let c=Object.create(null),e=Object.create(null),f=(t,z)=>{let E=e[t];if(null==E)e[t]=z;else if(E!=
z)throw Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix");},k=(t,z,E,G)=>{var O,W,Z=c[t]||(c[t]=Object.create(null));z=z.split(/ (?!$)/).map(fa=>{fa=fa.split(/-(?!$)/);let Y=fa[fa.length-1];"Space"==Y&&(Y=" ");let Ka,Ba,cb,ub;for(let Ob=0;Ob<fa.length-1;++Ob){const Pb=fa[Ob];if(/^(cmd|meta|m)$/i.test(Pb))ub=!0;else if(/^a(lt)?$/i.test(Pb))Ka=!0;else if(/^(c|ctrl|control)$/i.test(Pb))Ba=!0;else if(/^s(hift)?$/i.test(Pb))cb=!0;else if(/^mod$/i.test(Pb))"mac"==
b?ub=!0:Ba=!0;else throw Error("Unrecognized modifier name: "+Pb);}Ka&&(Y="Alt-"+Y);Ba&&(Y="Ctrl-"+Y);ub&&(Y="Meta-"+Y);cb&&(Y="Shift-"+Y);return Y});for(let fa=1;fa<z.length;fa++){let Y=z.slice(0,fa).join(" ");f(Y,!0);Z[Y]||(Z[Y]={preventDefault:!0,run:[Ka=>{let Ba=jc={view:Ka,prefix:Y,scope:t};setTimeout(()=>{jc==Ba&&(jc=null)},4E3);return!0}]})}z=z.join(" ");f(z,!1);Z=Z[z]||(Z[z]={preventDefault:!1,run:(null===(W=null===(O=Z._any)||void 0===O?void 0:O.run)||void 0===W?void 0:W.slice())||[]});E&&
Z.run.push(E);G&&(Z.preventDefault=!0)};for(let t of a){a=t.scope?t.scope.split(" "):["editor"];if(t.any)for(let z of a){var r=c[z]||(c[z]=Object.create(null));r._any||(r._any={preventDefault:!1,run:[]});for(let E in r)r[E].run.push(t.any)}if(r=t[b]||t.key)for(let z of a)k(z,r,t.run,t.preventDefault),t.shift&&k(z,"Shift-"+r,t.shift,t.preventDefault)}return c}function p(a,b,c,e){let f=(0,cc.keyName)(b);var k=(0,Q.codePointAt)(f,0);k=(0,Q.codePointSize)(k)==f.length&&" "!=f;let r="",t=!1;jc&&jc.view==
c&&jc.scope==e&&(r=jc.prefix+" ",t=0>Nd.indexOf(b.keyCode))&&(jc=null);let z=new Set,E=W=>{if(W){for(let Z of W.run)if(!z.has(Z)&&(z.add(Z),Z(c,b)))return!0;W.preventDefault&&(t=!0)}return!1};a=a[e];let G,O;if(a){if(E(a[r+Sb(f,b,!k)]))return!0;if(k&&(b.altKey||b.metaKey||b.ctrlKey)&&!(ta.windows&&b.ctrlKey&&b.altKey)&&(G=cc.base[b.keyCode])&&G!=f){if(E(a[r+Sb(G,b,!0)])||b.shiftKey&&(O=cc.shift[b.keyCode])!=f&&O!=G&&E(a[r+Sb(O,b,!1)]))return!0}else if(k&&b.shiftKey&&E(a[r+Sb(f,b,!0)]))return!0;if(E(a._any))return!0}return t}
function q(a){let b=a.scrollDOM.getBoundingClientRect();return{left:(a.textDirection==zb.LTR?b.left:b.right-a.scrollDOM.clientWidth)-a.scrollDOM.scrollLeft,top:b.top-a.scrollDOM.scrollTop}}function u(a,b,c){b=Q.EditorSelection.cursor(b);return{from:Math.max(c.from,a.moveToLineBoundary(b,!1,!0).from),to:Math.min(c.to,a.moveToLineBoundary(b,!0,!0).from),type:sb.Text}}function A(a,b,c){function e(cb,ub,Ob,Pb){return new uc(b,cb-W.left,ub-W.top-.01,Ob-cb,Pb-ub+.01)}function f({top:cb,bottom:ub,horizontal:Ob}){let Pb=
[];for(let kc=0;kc<Ob.length;kc+=2)Pb.push(e(Ob[kc],cb,Ob[kc+1],ub));return Pb}function k(cb,ub,Ob){function Pb(Ub,lc,Yb,nc,vc){Ub=a.coordsAtPos(Ub,Ub==Ob.to?-2:2);Yb=a.coordsAtPos(Yb,Yb==Ob.from?2:-2);Ub&&Yb&&(kc=Math.min(Ub.top,Yb.top,kc),Xc=Math.max(Ub.bottom,Yb.bottom,Xc),vc==zb.LTR?Fc.push(E&&lc?Z:Ub.left,E&&nc?fa:Yb.right):Fc.push(!E&&nc?Z:Yb.left,!E&&lc?fa:Ub.right))}let kc=1E9,Xc=-1E9,Fc=[],Gc=null!==cb&&void 0!==cb?cb:Ob.from,Hc=null!==ub&&void 0!==ub?ub:Ob.to;for(let Ub of a.visibleRanges)if(Ub.to>
Gc&&Ub.from<Hc)for(let lc=Math.max(Ub.from,Gc),Yb=Math.min(Ub.to,Hc);;){let nc=a.state.doc.lineAt(lc);for(let vc of a.bidiSpans(nc)){let Yc=vc.from+nc.from,Zc=vc.to+nc.from;if(Yc>=Yb)break;Zc>lc&&Pb(Math.max(Yc,lc),null==cb&&Yc<=Gc,Math.min(Zc,Yb),null==ub&&Zc>=Hc,vc.dir)}lc=nc.to+1;if(lc>=Yb)break}0==Fc.length&&Pb(Gc,null==cb,Hc,null==ub,a.textDirection);return{top:kc,bottom:Xc,horizontal:Fc}}function r(cb,ub){cb=O.top+(ub?cb.top:cb.bottom);return{top:cb,bottom:cb,horizontal:[]}}if(c.to<=a.viewport.from||
c.from>=a.viewport.to)return[];var t=Math.max(c.from,a.viewport.from),z=Math.min(c.to,a.viewport.to);let E=a.textDirection==zb.LTR;var G=a.contentDOM;let O=G.getBoundingClientRect(),W=q(a);G=(G=G.querySelector(".cm-line"))&&window.getComputedStyle(G);let Z=O.left+(G?parseInt(G.paddingLeft)+Math.min(0,parseInt(G.textIndent)):0),fa=O.right-(G?parseInt(G.paddingRight):0);G=ia(a,t);let Y=ia(a,z),Ka=G.type==sb.Text?G:null,Ba=Y.type==sb.Text?Y:null;Ka&&(a.lineWrapping||G.widgetLineBreaks)&&(Ka=u(a,t,Ka));
Ba&&(a.lineWrapping||Y.widgetLineBreaks)&&(Ba=u(a,z,Ba));if(Ka&&Ba&&Ka.from==Ba.from)return f(k(c.from,c.to,Ka));t=Ka?k(c.from,null,Ka):r(G,!1);c=Ba?k(null,c.to,Ba):r(Y,!0);z=[];(Ka||G).to<(Ba||Y).from-(Ka&&Ba?1:0)||1<G.widgetLineBreaks&&t.bottom+a.defaultLineHeight/2<c.top?z.push(e(Z,t.bottom,fa,c.top)):t.bottom<c.top&&a.elementAtHeight((t.bottom+c.top)/2).type==sb.Text&&(t.bottom=c.top=(t.bottom+c.top)/2);return f(t).concat(z).concat(f(c))}function I(a){return[Kb.define(b=>new Me(b,a)),Ic.of(a)]}
function P(a){return a.startState.facet(qc)!=a.state.facet(qc)}function T(a,b,c,e,f){b.lastIndex=0;for(let k=a.iterRange(c,e),r=c,t;!k.next().done;r+=k.value.length)if(!k.lineBreak)for(;t=b.exec(k.value);)f(r+t.index,t)}function aa(a,b){let c=a.visibleRanges;if(1==c.length&&c[0].from==a.viewport.from&&c[0].to==a.viewport.to)return c;let e=[];for(let {from:f,to:k}of c)f=Math.max(a.state.doc.lineAt(f).from,f-b),k=Math.min(a.state.doc.lineAt(k).to,k+b),e.length&&e[e.length-1].to>=f?e[e.length-1].to=
k:e.push({from:f,to:k});return e}function na(){return Od||(Od=Kb.fromClass(class{constructor(a){this.view=a;this.decorations=hb.none;this.decorationCache=Object.create(null);this.decorator=this.makeDecorator(a.state.facet(Jc));this.decorations=this.decorator.createDeco(a)}makeDecorator(a){return new Kc({regexp:a.specialChars,decoration:(b,c,e)=>{var {doc:f}=c.state;b=(0,Q.codePointAt)(b[0],0);return 9==b?(f=f.lineAt(e),c=c.state.tabSize,e=(0,Q.countColumn)(f.text,c,e-f.from),hb.replace({widget:new Ne((c-
e%c)*this.view.defaultCharacterWidth)})):this.decorationCache[b]||(this.decorationCache[b]=hb.replace({widget:new Oe(a,b)}))},boundary:a.replaceTabs?void 0:/[^]/})}update(a){let b=a.state.facet(Jc);a.startState.facet(Jc)!=b?(this.decorator=this.makeDecorator(b),this.decorations=this.decorator.createDeco(a.view)):this.decorations=this.decorator.updateDeco(a,this.decorations)}},{decorations:a=>a.decorations}))}function h(a,b){var c=a.posAtCoords({x:b.clientX,y:b.clientY},!1);let e=a.state.doc.lineAt(c),
f=c-e.from;2E3<f?a=-1:f==e.length?(b=b.clientX,a=(c=a.coordsAtPos(a.viewport.from))?Math.round(Math.abs((c.left-b)/a.defaultCharacterWidth)):-1):a=(0,Q.countColumn)(e.text,a.state.tabSize,c-e.from);return{line:e.number,col:a,off:f}}function n(a,b){let c=h(a,b),e=a.state.selection;return c?{update(f){if(f.docChanged){var k=f.changes.mapPos(f.startState.doc.line(c.line).from);k=f.state.doc.lineAt(k);c={line:k.number,col:c.col,off:Math.min(c.off,k.length)};e=e.map(f.changes)}},get(f,k,r){var t=h(a,f);
if(!t)return e;f=a.state;var z=c,E=Math.min(z.line,t.line);k=Math.max(z.line,t.line);let G=[];if(2E3<z.off||2E3<t.off||0>z.col||0>t.col){var O=Math.min(z.off,t.off);for(t=Math.max(z.off,t.off);E<=k;E++)z=f.doc.line(E),z.length<=t&&G.push(Q.EditorSelection.range(z.from+O,z.to+t))}else for(O=Math.min(z.col,t.col),t=Math.max(z.col,t.col);E<=k;E++){z=f.doc.line(E);let W=(0,Q.findColumn)(z.text,O,f.tabSize,!0);if(0>W)G.push(Q.EditorSelection.cursor(z.to));else{let Z=(0,Q.findColumn)(z.text,t,f.tabSize);
G.push(Q.EditorSelection.range(z.from+W,z.from+Z))}}return G.length?r?Q.EditorSelection.create(G.concat(e.ranges)):Q.EditorSelection.create(G):e}}:null}function v(a){({win:a}=a);return{top:0,left:0,bottom:a.innerHeight,right:a.innerWidth}}function y(a){for(;a;a=a.parentNode)if(1==a.nodeType&&a.classList.contains("cm-tooltip"))return!0;return!1}function L(a){let b=a.nextSibling;a.remove();return b}function V(a){let b=[Pe];a&&!1===a.fixed&&b.push($c.of(!0));return b}function R(a){return Array.isArray(a)?
a:[a]}function X(a,b,c){for(;a.value&&a.from<=c;)a.from==c&&b.push(a.value),a.next()}function Na(a,b){return a.state.facet(rc).formatNumber(b,a.state)}function db(a){let b=9;for(;b<a;)b=10*b+9;return b}function Lb(a){return Kb.define(b=>({decorations:a.createDeco(b),update(c){this.decorations=a.updateDeco(c,this.decorations)}}),{decorations:b=>b.decorations})}Object.defineProperty(B,"__esModule",{value:!0});B.crosshairCursor=function(a={}){let [b,c]=Qe[a.key||"Alt"],e=Kb.fromClass(class{constructor(f){this.view=
f;this.isDown=!1}set(f){this.isDown!=f&&(this.isDown=f,this.view.update([]))}},{eventHandlers:{keydown(f){this.set(f.keyCode==b||c(f))},keyup(f){f.keyCode!=b&&c(f)||this.set(!1)},mousemove(f){this.set(c(f))}}});return[e,jb.contentAttributes.of(f=>{var k;return(null===(k=f.plugin(e))||void 0===k?0:k.isDown)?Re:null})]};B.drawSelection=function(a={}){return[qc.of(a),Se,Te,Ue,Pd.of(!0)]};B.dropCursor=function(){return[wc,Ve]};B.getPanel=function(a,b){b=(a=a.plugin(Qd))?a.specs.indexOf(b):-1;return-1<
b?a.panels[b]:null};B.getTooltip=function(a,b){a=a.plugin(ad);if(!a)return null;b=a.manager.tooltips.indexOf(b);return 0>b?null:a.manager.tooltipViews[b]};B.gutter=function(a){return[V(),xc.of(Object.assign(Object.assign({},We),a))]};B.gutters=V;B.hasHoverTooltips=function(a){return a.facet(yc).some(b=>b)};B.highlightActiveLine=function(){return Xe};B.highlightActiveLineGutter=function(){return Ye};B.highlightSpecialChars=function(a={}){return[Jc.of(a),na()]};B.highlightTrailingWhitespace=function(){return Ze};
B.highlightWhitespace=function(){return $e};B.hoverTooltip=function(a,b={}){let c=Q.StateEffect.define(),e=Q.StateField.define({create(){return null},update(f,k){if(f&&(b.hideOnChange&&(k.docChanged||k.selection)||b.hideOn&&b.hideOn(k,f)))return null;if(f&&k.docChanged){let r=k.changes.mapPos(f.pos,-1,Q.MapMode.TrackDel);if(null==r)return null;let t=Object.assign(Object.create(null),f);t.pos=r;null!=f.end&&(t.end=k.changes.mapPos(f.end));f=t}for(let r of k.effects)r.is(c)&&(f=r.value),r.is(Rd)&&(f=
null);return f},provide:f=>yc.from(f)});return[e,Kb.define(f=>new af(f,a,e,c,b.hoverTime||300)),bf]};B.layer=I;B.lineNumbers=function(a={}){return[rc.of(a),V(),cf]};B.logException=C;B.panels=function(a){return a?[bd.of(a)]:[]};B.placeholder=function(a){return Kb.fromClass(class{constructor(b){this.view=b;this.placeholder=hb.set([hb.widget({widget:new df(a),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?hb.none:this.placeholder}},{decorations:b=>b.decorations})};B.rectangularSelection=
function(a){let b=(null===a||void 0===a?void 0:a.eventFilter)||(c=>c.altKey&&0==c.button);return jb.mouseSelectionStyle.of((c,e)=>b(e)?n(c,e):null)};B.repositionTooltips=function(a){var b;null===(b=a.plugin(ad))||void 0===b?void 0:b.maybeMeasure()};B.runScopeHandlers=function(a,b,c){return p(d(a.state),b,a,c)};B.scrollPastEnd=function(){return[Sd,Lc.of(a=>{var b;return(null===(b=a.plugin(Sd))||void 0===b?void 0:b.attrs)||null})]};B.tooltips=function(a={}){return Mc.of(a)};B.showTooltip=B.showPanel=
B.lineNumberMarkers=B.keymap=B.gutterLineClass=B.closeHoverTooltips=B.__test=B.WidgetType=B.ViewUpdate=B.ViewPlugin=B.RectangleMarker=B.MatchDecorator=B.GutterMarker=B.EditorView=B.Direction=B.Decoration=B.BlockType=B.BlockInfo=B.BidiSpan=void 0;var Q=eb(1),bc=eb(2),cc=eb(3);class cd{constructor(){this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}eq(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==
a.focusOffset}setRange(a){let {anchorNode:b,focusNode:c}=a;this.set(b,Math.min(a.anchorOffset,b?oa(b):0),c,Math.min(a.focusOffset,c?oa(c):0))}set(a,b,c,e){this.anchorNode=a;this.anchorOffset=b;this.focusNode=c;this.focusOffset=e}}let $b=null,xd;class Ib{constructor(a,b,c=!0){this.node=a;this.offset=b;this.precise=c}static before(a,b){return new Ib(a.parentNode,pa(a),b)}static after(a,b){return new Ib(a.parentNode,pa(a)+1,b)}}const dd=[];class rb{constructor(){this.dom=this.parent=null;this.dirty=
2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(a){let b=this.posAtStart;for(let c of this.children){if(c==a)return b;b+=c.length+c.breakAfter}throw new RangeError("Invalid child in posBefore");}posAfter(a){return this.posBefore(a)+a.length}sync(a,b){if(this.dirty&2){var c=this.dom;let e=null,f;for(let k of this.children){if(k.dirty){if(!k.dom&&(f=e?e.nextSibling:c.firstChild)){let r=
rb.get(f);(!r||!r.parent&&r.canReuseDOM(k))&&k.reuseDOM(f)}k.sync(a,b);k.dirty=0}f=e?e.nextSibling:c.firstChild;b&&!b.written&&b.node==c&&f!=k.dom&&(b.written=!0);if(k.dom.parentNode==c)for(;f&&f!=k.dom;)f=wa(f);else c.insertBefore(k.dom,f);e=k.dom}(f=e?e.nextSibling:c.firstChild)&&b&&b.node==c&&(b.written=!0);for(;f;)f=wa(f)}else if(this.dirty&1)for(c of this.children)c.dirty&&(c.sync(a,b),c.dirty=0)}reuseDOM(a){}localPosFromDOM(a,b){if(a==this.dom)a=this.dom.childNodes[b];else{for(b=0==oa(a)?0:
0==b?-1:1;;){let c=a.parentNode;if(c==this.dom)break;0==b&&c.firstChild!=c.lastChild&&(b=a==c.firstChild?-1:1);a=c}a=0>b?a:a.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!rb.get(a);)a=a.nextSibling;if(!a)return this.length;for(let c=0,e=0;;c++){b=this.children[c];if(b.dom==a)return e;e+=b.length+b.breakAfter}}domBoundsAround(a,b,c=0){let e=-1,f=-1,k=-1,r=-1;for(let t=0,z=c,E=c;t<this.children.length;t++){let G=this.children[t],O=z+G.length;if(z<a&&O>b)return G.domBoundsAround(a,b,z);O>=
a&&-1==e&&(e=t,f=z);if(z>b&&G.dom.parentNode==this.dom){k=t;r=E;break}E=O;z=O+G.breakAfter}return{from:f,to:0>r?c+this.length:r,startDOM:(e?this.children[e-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:k<this.children.length&&0<=k?this.children[k].dom:null}}markDirty(a=!1){this.dirty|=2;this.markParentsDirty(a)}markParentsDirty(a){for(let b=this.parent;b;b=b.parent){a&&(b.dirty|=2);if(b.dirty&1)break;b.dirty|=1;a=!1}}setParent(a){this.parent!=a&&(this.parent=a,this.dirty&&this.markParentsDirty(!0))}setDOM(a){this.dom&&
(this.dom.cmView=null);this.dom=a;a.cmView=this}get rootView(){for(let a=this;;){let b=a.parent;if(!b)return a;a=b}}replaceChildren(a,b,c=dd){this.markDirty();for(let e=a;e<b;e++){let f=this.children[e];f.parent==this&&f.destroy()}this.children.splice(a,b-a,...c);for(a=0;a<c.length;a++)c[a].setParent(this)}ignoreMutation(a){return!1}ignoreEvent(a){return!1}childCursor(a=this.length){return new Td(this.children,a,this.children.length)}childPos(a,b=1){return this.childCursor().findPos(a,b)}toString(){let a=
this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==a?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(a){return a.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(a,b,c,e,f,k){return!1}become(a){return!1}canReuseDOM(a){return a.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}rb.prototype.breakAfter=0;class Td{constructor(a,b,c){this.children=
a;this.pos=b;this.i=c;this.off=0}findPos(a,b=1){for(;;){if(a>this.pos||a==this.pos&&(0<b||0==this.i||this.children[this.i-1].breakAfter))return this.off=a-this.pos,this;let c=this.children[--this.i];this.pos-=c.length+c.breakAfter}}}let Vb="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},ed="undefined"!=typeof document?document:{documentElement:{style:{}}};const fd=/Edge\/(\d+)/.exec(Vb.userAgent),Ud=/MSIE \d/.test(Vb.userAgent),gd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vb.userAgent),
Nc=!!(Ud||gd||fd),Vd=!Nc&&/gecko\/(\d+)/i.test(Vb.userAgent),hd=!Nc&&/Chrome\/(\d+)/.exec(Vb.userAgent),Wd="webkitFontSmoothing"in ed.documentElement.style,Xd=!Nc&&/Apple Computer/.test(Vb.vendor),Yd=Xd&&(/Mobile\/\w+/.test(Vb.userAgent)||2<Vb.maxTouchPoints);var ta={mac:Yd||/Mac/.test(Vb.platform),windows:/Win/.test(Vb.platform),linux:/Linux|X11/.test(Vb.platform),ie:Nc,ie_version:Ud?ed.documentMode||6:gd?+gd[1]:fd?+fd[1]:0,gecko:Vd,gecko_version:Vd?+(/Firefox\/(\d+)/.exec(Vb.userAgent)||[0,0])[1]:
0,chrome:!!hd,chrome_version:hd?+hd[1]:0,ios:Yd,android:/Android\b/.test(Vb.userAgent),webkit:Wd,safari:Xd,webkit_version:Wd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=ed.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class sc extends rb{constructor(a){super();this.text=a}get length(){return this.text.length}createDOM(a){this.setDOM(a||document.createTextNode(this.text))}sync(a,b){this.dom||this.createDOM();this.dom.nodeValue!=this.text&&(b&&b.node==this.dom&&
(b.written=!0),this.dom.nodeValue=this.text)}reuseDOM(a){3==a.nodeType&&this.createDOM(a)}merge(a,b,c){if(c&&(!(c instanceof sc)||256<this.length-(b-a)+c.length))return!1;this.text=this.text.slice(0,a)+(c?c.text:"")+this.text.slice(b);this.markDirty();return!0}split(a){let b=new sc(this.text.slice(a));this.text=this.text.slice(0,a);this.markDirty();return b}localPosFromDOM(a,b){return a==this.dom?b:b?this.text.length:0}domAtPos(a){return new Ib(this.dom,a)}domBoundsAround(a,b,c){return{from:c,to:c+
this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(a,b){return Ta(this.dom,a,b)}}class hc extends rb{constructor(a,b=[],c=0){super();this.mark=a;this.children=b;this.length=c;for(let e of b)e.setParent(this)}setAttrs(a){Ia(a);this.mark.class&&(a.className=this.mark.class);if(this.mark.attrs)for(let b in this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);return a}reuseDOM(a){a.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(a),this.dirty|=6)}sync(a,b){this.dom?this.dirty&
4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));super.sync(a,b)}merge(a,b,c,e,f,k){if(c&&(!(c instanceof hc&&c.mark.eq(this.mark))||a&&0>=f||b<this.length&&0>=k))return!1;qb(this,a,b,c?c.children:[],f-1,k-1);this.markDirty();return!0}split(a){let b=[];var c=0;let e=-1,f=0;for(let k of this.children){let r=c+k.length;r>a&&b.push(c<a?k.split(a-c):k);0>e&&c>=a&&(e=f);c=r;f++}c=this.length-a;this.length=a;-1<e&&(this.children.length=e,this.markDirty());
return new hc(this.mark,b,c)}domAtPos(a){return Ma(this,a)}coordsAt(a,b){return ca(this,a,b)}}class oc extends rb{constructor(a,b,c){super();this.widget=a;this.length=b;this.side=c;this.prevWidget=null}static create(a,b,c){return new (a.customView||oc)(a,b,c)}split(a){let b=oc.create(this.widget,this.length-a,this.side);this.length-=a;return b}sync(a){this.dom&&this.widget.updateDOM(this.dom,a)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),
this.dom.contentEditable="false")}getSide(){return this.side}merge(a,b,c,e,f,k){if(c&&(!(c instanceof oc&&this.widget.compare(c.widget))||0<a&&0>=f||b<this.length&&0>=k))return!1;this.length=a+(c?c.length:0)+(this.length-b);return!0}become(a){return a instanceof oc&&a.side==this.side&&this.widget.constructor==a.widget.constructor?(this.widget.compare(a.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=a.widget,this.length=a.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get overrideDOMText(){if(0==
this.length)return Q.Text.empty;for(var a=this;a.parent;)a=a.parent;({view:a}=a);a=a&&a.state.doc;let b=this.posAtStart;return a?a.slice(b,b+this.length):Q.Text.empty}domAtPos(a){return(this.length?0==a:0<this.side)?Ib.before(this.dom):Ib.after(this.dom,a==this.length)}domBoundsAround(){return null}coordsAt(a,b){if(b=this.widget.coordsAt(this.dom,a,b))return b;b=this.dom.getClientRects();let c;if(!b.length)return null;let e=this.side?0>this.side:0<a;for(let f=e?b.length-1:0;!(c=b[f],0<a?0==f:f==b.length-
1||c.top<c.bottom);f+=e?-1:1);return sa(c,!e)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy();this.dom&&this.widget.destroy(this.dom)}}class Cd extends oc{domAtPos(a){let {topView:b,text:c}=this.widget;return b?Sa(a,0,b,c,this.length-b.length,(e,f)=>e.domAtPos(f),(e,f)=>new Ib(e,Math.min(f,e.nodeValue.length))):new Ib(c,Math.min(a,c.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(a,b){let {topView:c,
text:e}=this.widget;return c?Za(a,b,c,e,this.length-c.length):Math.min(b,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(a,b){let {topView:c,text:e}=this.widget;return c?Sa(a,b,c,e,this.length-c.length,(f,k,r)=>f.coordsAt(k,r),(f,k,r)=>Ta(f,k,r)):Ta(e,a,b)}destroy(){var a;super.destroy();null===(a=this.widget.topView)||void 0===a?void 0:a.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}class zc extends rb{constructor(a){super();this.side=a}get length(){return 0}merge(){return!1}become(a){return a instanceof
zc&&a.side==this.side}split(){return new zc(this.side)}sync(){if(!this.dom){let a=document.createElement("img");a.className="cm-widgetBuffer";a.setAttribute("aria-hidden","true");this.setDOM(a)}}getSide(){return this.side}domAtPos(a){return 0<this.side?Ib.before(this.dom):Ib.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(a){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Q.Text.empty}get isHidden(){return!0}}sc.prototype.children=oc.prototype.children=
zc.prototype.children=dd;class mc{eq(a){return!1}updateDOM(a,b){return!1}compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(a){return!0}coordsAt(a,b,c){return null}get customView(){return null}get isHidden(){return!1}destroy(a){}}B.WidgetType=mc;var sb=function(a){a[a.Text=0]="Text";a[a.WidgetBefore=1]="WidgetBefore";a[a.WidgetAfter=2]="WidgetAfter";a[a.WidgetRange=3]="WidgetRange";return a}(sb||(B.BlockType=
sb={}));B.BlockType=sb;class hb extends Q.RangeValue{constructor(a,b,c,e){super();this.startSide=a;this.endSide=b;this.widget=c;this.spec=e}get heightRelevant(){return!1}static mark(a){return new id(a)}static widget(a){let b=Math.max(-1E4,Math.min(1E4,a.side||0)),c=!!a.block;b+=c?0<b?3E8:-4E8:0<b?1E8:-1E8;return new pc(a,b,b,c,a.widget||null,!1)}static replace(a){let b=!!a.block,c,e;if(a.isBlockGap)c=-5E8,e=4E8;else{let {start:f,end:k}=La(a,b);c=(f?b?-3E8:-1:5E8)-1;e=(k?b?2E8:1:-6E8)+1}return new pc(a,
c,e,b,a.widget||null,!0)}static line(a){return new Oc(a)}static set(a,b=!1){return Q.RangeSet.of(a,b)}hasHeight(){return this.widget?-1<this.widget.estimatedHeight:!1}}B.Decoration=hb;hb.none=Q.RangeSet.empty;class id extends hb{constructor(a){let {start:b,end:c}=La(a);super(b?-1:5E8,c?1:-6E8,null,a);this.tagName=a.tagName||"span";this.class=a.class||"";this.attrs=a.attributes||null}eq(a){return this==a||a instanceof id&&this.tagName==a.tagName&&this.class==a.class&&qa(this.attrs,a.attrs)}range(a,
b=a){if(a>=b)throw new RangeError("Mark decorations may not be empty");return super.range(a,b)}}id.prototype.point=!1;class Oc extends hb{constructor(a){super(-2E8,-2E8,null,a)}eq(a){return a instanceof Oc&&this.spec.class==a.spec.class&&qa(this.spec.attributes,a.spec.attributes)}range(a,b=a){if(b!=a)throw new RangeError("Line decoration ranges must be zero-length");return super.range(a,b)}}Oc.prototype.mapMode=Q.MapMode.TrackBefore;Oc.prototype.point=!0;class pc extends hb{constructor(a,b,c,e,f,
k){super(b,c,f,a);this.block=e;this.isReplace=k;this.mapMode=e?0>=b?Q.MapMode.TrackBefore:Q.MapMode.TrackAfter:Q.MapMode.TrackDel}get type(){return this.startSide<this.endSide?sb.WidgetRange:0>=this.startSide?sb.WidgetBefore:sb.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(5<=this.widget.estimatedHeight||0<this.widget.lineBreaks)}eq(a){var b;if(b=a instanceof pc){b=this.widget;var c=a.widget;b=b==c||!!(b&&c&&b.compare(c))}return b&&this.block==a.block&&this.startSide==a.startSide&&
this.endSide==a.endSide}range(a,b=a){if(this.isReplace&&(a>b||a==b&&0<this.startSide&&0>=this.endSide))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&b!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(a,b)}}pc.prototype.point=!0;class Tb extends rb{constructor(){super(...arguments);this.children=[];this.length=0;this.prevAttrs=void 0;this.attrs=null;this.breakAfter=0}merge(a,b,c,e,f,k){if(c){if(!(c instanceof Tb))return!1;
this.dom||c.transferDOM(this)}e&&this.setDeco(c?c.attrs:null);qb(this,a,b,c?c.children:[],f,k);return!0}split(a){let b=new Tb;b.breakAfter=this.breakAfter;if(0==this.length)return b;let {i:c,off:e}=this.childPos(a);e&&(b.append(this.children[c].split(e),0),this.children[c].merge(e,this.children[c].length,null,!1,0,0),c++);for(let f=c;f<this.children.length;f++)b.append(this.children[f],0);for(;0<c&&0==this.children[c-1].length;)this.children[--c].destroy();this.children.length=c;this.markDirty();
this.length=a;return b}transferDOM(a){this.dom&&(this.markDirty(),a.setDOM(this.dom),a.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(a){qa(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=a)}append(a,b){bb(this,a,b)}addLineDeco(a){let b=a.spec.attributes;a=a.spec.class;b&&(this.attrs=ma(b,this.attrs||{}));a&&(this.attrs=ma({class:a},this.attrs||{}))}domAtPos(a){return Ma(this,a)}reuseDOM(a){"DIV"==a.nodeName&&
(this.setDOM(a),this.dirty|=6)}sync(a,b){var c;this.dom?this.dirty&4&&(Ia(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0);void 0!==this.prevAttrs&&(ya(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0);super.sync(a,b);for(a=this.dom.lastChild;a&&rb.get(a)instanceof hc;)a=a.lastChild;a&&this.length&&("BR"==a.nodeName||
0!=(null===(c=rb.get(a))||void 0===c?void 0:c.isEditable)||ta.ios&&this.children.some(e=>e instanceof sc))||(c=document.createElement("BR"),c.cmIgnore=!0,this.dom.appendChild(c))}measureTextSize(){if(0==this.children.length||20<this.length)return null;let a=0;for(let c of this.children){if(!(c instanceof sc)||/[^ -~]/.test(c.text))return null;var b=Wa(c.dom);if(1!=b.length)return null;a+=b[0].width;b=b[0].height}return a?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length,
textHeight:b}:null}coordsAt(a,b){a=ca(this,a,b);if(!this.children.length&&a&&this.parent){({heightOracle:b}=this.parent.view.viewState);let c=a.bottom-a.top;if(2>Math.abs(c-b.lineHeight)&&b.textHeight<c)return b=(c-b.textHeight)/2,{top:a.top+b,bottom:a.bottom-b,left:a.left,right:a.left}}return a}become(a){return!1}get type(){return sb.Text}static find(a,b){for(let c=0,e=0;c<a.children.length;c++){let f=a.children[c],k=e+f.length;if(k>=b){if(f instanceof Tb)return f;if(k>b)break}e=k+f.breakAfter}return null}}
class tc extends rb{constructor(a,b,c){super();this.widget=a;this.length=b;this.type=c;this.breakAfter=0;this.prevWidget=null}merge(a,b,c,e,f,k){if(c&&(!(c instanceof tc&&this.widget.compare(c.widget))||0<a&&0>=f||b<this.length&&0>=k))return!1;this.length=a+(c?c.length:0)+(this.length-b);return!0}domAtPos(a){return 0==a?Ib.before(this.dom):Ib.after(this.dom,a==this.length)}split(a){let b=this.length-a;this.length=a;a=new tc(this.widget,b,this.type);a.breakAfter=this.breakAfter;return a}get children(){return dd}sync(a){this.dom&&
this.widget.updateDOM(this.dom,a)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Q.Text.empty}domBoundsAround(){return null}become(a){return a instanceof tc&&a.widget.constructor==this.widget.constructor?(a.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=
this.widget),this.widget=a.widget,this.length=a.length,this.type=a.type,this.breakAfter=a.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(a,b){return this.widget.coordsAt(this.dom,a,b)}destroy(){super.destroy();this.dom&&this.widget.destroy(this.dom)}}class Zd{constructor(a,b,c,e){this.doc=a;this.pos=b;this.end=c;this.disallowBlockEffectsFor=e;this.content=[];this.curLine=null;this.pendingBuffer=
this.breakAtStart=0;this.bufferMarks=[];this.atCursorPos=!0;this.openEnd=this.openStart=-1;this.text="";this.textOff=0;this.cursor=a.iter();this.skip=b}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let a=this.content[this.content.length-1];return!a.breakAfter&&!(a instanceof tc&&a.type==sb.WidgetBefore)}getLine(){this.curLine||(this.content.push(this.curLine=new Tb),this.atCursorPos=!0);return this.curLine}flushBuffer(a=this.bufferMarks){this.pendingBuffer&&
(this.curLine.append(x(new zc(-1),a),a.length),this.pendingBuffer=0)}addBlockWidget(a){this.flushBuffer();this.curLine=null;this.content.push(a)}finish(a){this.pendingBuffer&&a<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0;this.posCovered()||this.getLine()}buildText(a,b,c){for(;0<a;){if(this.textOff==this.text.length){let {value:f,lineBreak:k,done:r}=this.cursor.next(this.skip);this.skip=0;if(r)throw Error("Ran out of text content when drawing inline views");if(k){this.posCovered()||
this.getLine();this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1;this.flushBuffer();this.curLine=null;this.atCursorPos=!0;a--;continue}else this.text=f,this.textOff=0}let e=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(b.slice(b.length-c));this.getLine().append(x(new sc(this.text.slice(this.textOff,this.textOff+e)),b),c);this.atCursorPos=!0;this.textOff+=e;a-=e;c=0}}span(a,b,c,e){this.buildText(b-a,c,e);this.pos=b;0>this.openStart&&(this.openStart=
e)}point(a,b,c,e,f,k){if(this.disallowBlockEffectsFor[k]&&c instanceof pc){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(b>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins");}k=b-a;if(c instanceof pc)if(c.block)({type:a}=c),a!=sb.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new tc(c.widget||new $d("div"),k,a));else{let r=oc.create(c.widget||new $d("span"),k,k?0:
c.startSide),t=this.atCursorPos&&!r.isEditable&&f<=e.length&&(a<b||0<c.startSide);c=!r.isEditable&&(a<b||f>e.length||0>=c.startSide);let z=this.getLine();2!=this.pendingBuffer||t||r.isEditable||(this.pendingBuffer=0);this.flushBuffer(e);t&&(z.append(x(new zc(1),e),f),f=e.length+Math.max(0,f-e.length));z.append(x(r,e),f);if(this.pendingBuffer=(this.atCursorPos=c)?a<b||f>e.length?1:2:0)this.bufferMarks=e.slice()}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(c);k&&(this.textOff+
k<=this.text.length?this.textOff+=k:(this.skip+=k-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=b);0>this.openStart&&(this.openStart=f)}static build(a,b,c,e,f){a=new Zd(a,b,c,f);a.openEnd=Q.RangeSet.spans(e,b,c,a);0>a.openStart&&(a.openStart=a.openEnd);a.finish(a.openEnd);return a}}class $d extends mc{constructor(a){super();this.tag=a}eq(a){return a.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(a){return a.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}
const Dd=Q.Facet.define(),Ed=Q.Facet.define(),ae=Q.Facet.define(),yd=Q.Facet.define(),jd=Q.Facet.define(),Kd=Q.Facet.define(),Id=Q.Facet.define(),be=Q.Facet.define({combine:a=>a.some(b=>b)}),Pd=Q.Facet.define({combine:a=>a.some(b=>b)});class kd{constructor(a,b="nearest",c="nearest",e=5,f=5){this.range=a;this.y=b;this.x=c;this.yMargin=e;this.xMargin=f}map(a){return a.empty?this:new kd(this.range.map(a),this.y,this.x,this.yMargin,this.xMargin)}}const ce=Q.StateEffect.define({map:(a,b)=>a.map(b)}),Ec=
Q.Facet.define({combine:a=>a.length?a[0]:!0});let ef=0;const Ac=Q.Facet.define();class Kb{constructor(a,b,c,e){this.id=a;this.create=b;this.domEventHandlers=c;this.extension=e(this)}static define(a,b){const {eventHandlers:c,provide:e,decorations:f}=b||{};return new Kb(ef++,a,c,k=>{let r=[Ac.of(k)];f&&r.push(Bc.of(t=>(t=t.plugin(k))?f(t):hb.none));e&&r.push(e(k));return r})}static fromClass(a,b){return Kb.define(c=>new a(c),b)}}B.ViewPlugin=Kb;class ld{constructor(a){this.spec=a;this.value=this.mustUpdate=
null}update(a){if(!this.value){if(this.spec)try{this.value=this.spec.create(a)}catch(b){C(a.state,b,"CodeMirror plugin crashed"),this.deactivate()}}else if(this.mustUpdate&&(a=this.mustUpdate,this.mustUpdate=null,this.value.update))try{this.value.update(a)}catch(b){C(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(c){}this.deactivate()}return this}destroy(a){var b;if(null===(b=this.value)||void 0===b?0:b.destroy)try{this.value.destroy()}catch(c){C(a.state,
c,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const de=Q.Facet.define(),Lc=Q.Facet.define(),Bc=Q.Facet.define(),Vc=Q.Facet.define(),zd=Q.Facet.define(),Cc=Q.Facet.define();class dc{constructor(a,b,c,e){this.fromA=a;this.toA=b;this.fromB=c;this.toB=e}join(a){return new dc(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}addToSet(a){let b=a.length,c=this;for(;0<b;b--){let e=a[b-1];if(!(e.fromA>c.toA)){if(e.toA<c.fromA)break;
c=c.join(e);a.splice(b-1,1)}}a.splice(b,0,c);return a}static extendWithRanges(a,b){if(0==b.length)return a;let c=[];for(let e=0,f=0,k=0,r=0;;e++){let t=e==a.length?null:a[e],z=k-r,E=t?t.fromB:1E9;for(;f<b.length&&b[f]<E;){let G=b[f+1],O=Math.max(r,b[f]),W=Math.min(E,G);O<=W&&(new dc(O+z,W+z,O,W)).addToSet(c);if(G>E)break;else f+=2}if(!t)return c;(new dc(t.fromA,t.toA,t.fromB,t.toB)).addToSet(c);k=t.toA;r=t.toB}}}class Pc{constructor(a,b,c){this.view=a;this.state=b;this.transactions=c;this.flags=0;
this.startState=a.state;this.changes=Q.ChangeSet.empty(this.startState.doc.length);for(let f of c)this.changes=this.changes.compose(f.changes);let e=[];this.changes.iterChangedRanges((f,k,r,t)=>e.push(new dc(f,k,r,t)));this.changedRanges=e}static create(a,b,c){return new Pc(a,b,c)}get viewportChanged(){return 0<(this.flags&4)}get heightChanged(){return 0<(this.flags&2)}get geometryChanged(){return this.docChanged||0<(this.flags&10)}get focusChanged(){return 0<(this.flags&1)}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(a=>
a.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}B.ViewUpdate=Pc;var zb=function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL";return a}(zb||(B.Direction=zb={}));B.Direction=zb;const Tc=zb.LTR,ff=zb.RTL,Fe=J("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ge=J("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),
Uc=Object.create(null),Xb=[];for(let a of["()","[]","{}"]){let b=a.charCodeAt(0),c=a.charCodeAt(1);Uc[b]=c;Uc[c]=-b}const Ee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ic{constructor(a,b,c){this.from=a;this.to=b;this.level=c}get dir(){return this.level%2?ff:Tc}side(a,b){return this.dir==b==a?this.to:this.from}static find(a,b,c,e){let f=-1;for(let k=0;k<a.length;k++){let r=a[k];if(r.from<=b&&r.to>=b){if(r.level==c)return k;if(0>f||(0!=e?0>e?r.from<b:r.to>b:a[f].level>r.level))f=
k}}if(0>f)throw new RangeError("Index out of range");return f}}B.BidiSpan=ic;const tb=[];let Ad="";class Bd{constructor(a,b){this.points=a;this.text="";this.lineSeparator=b.facet(Q.EditorState.lineSeparator)}append(a){this.text+=a}lineBreak(){this.text+="ï¿¿"}readRange(a,b){if(!a)return this;let c=a.parentNode;for(;;){this.findPointBefore(c,a);let e=this.text.length;this.readNode(a);let f=a.nextSibling;if(f==b)break;let k=rb.get(a),r=rb.get(f);(k&&r?k.breakAfter:(k?k.breakAfter:la(a))||la(f)&&("BR"!=
a.nodeName||a.cmIgnore)&&this.text.length>e)&&this.lineBreak();a=f}this.findPointBefore(c,b);return this}readTextNode(a){let b=a.nodeValue;for(var c of this.points)c.node==a&&(c.pos=this.text.length+Math.min(c.offset,b.length));for(let e=0,f=this.lineSeparator?null:/\r\n?|\n/g;;){c=-1;let k=1,r;if(this.lineSeparator)c=b.indexOf(this.lineSeparator,e),k=this.lineSeparator.length;else if(r=f.exec(b))c=r.index,k=r[0].length;this.append(b.slice(e,0>c?b.length:c));if(0>c)break;this.lineBreak();if(1<k)for(let t of this.points)t.node==
a&&t.pos>this.text.length&&(t.pos-=k-1);e=c+k}}readNode(a){if(!a.cmIgnore){var b=rb.get(a);b=b&&b.overrideDOMText;if(null!=b)for(this.findPointInside(a,b.length),a=b.iter();!a.next().done;)a.lineBreak?this.lineBreak():this.append(a.value);else 3==a.nodeType?this.readTextNode(a):"BR"==a.nodeName?a.nextSibling&&this.lineBreak():1==a.nodeType&&this.readRange(a.firstChild,null)}}findPointBefore(a,b){for(let c of this.points)c.node==a&&a.childNodes[c.offset]==b&&(c.pos=this.text.length)}findPointInside(a,
b){for(let c of this.points)if(3==a.nodeType?c.node==a:a.contains(c.node))c.pos=this.text.length+Math.min(b,c.offset)}}class ee{constructor(a,b){this.node=a;this.offset=b;this.pos=-1}}class fe extends rb{constructor(a){super();this.view=a;this.compositionDeco=hb.none;this.decorations=[];this.dynamicDecorationMap=[];this.minWidthTo=this.minWidthFrom=this.minWidth=0;this.impreciseHead=this.impreciseAnchor=null;this.forceSelection=!1;this.lastUpdate=Date.now();this.setDOM(a.contentDOM);this.children=
[new Tb];this.children[0].setParent(this);this.updateDeco();this.updateInner([new dc(0,0,0,a.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(a){let b=a.changedRanges;0<this.minWidth&&b.length&&(b.every(({fromA:f,toA:k})=>k<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);if(0>this.view.inputState.composing)this.compositionDeco=
hb.none;else if(a.transactions.length||this.dirty)this.compositionDeco=ea(this.view,a.changes);(ta.ie||ta.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines&&(this.forceSelection=!0);var c=this.decorations;let e=this.updateDeco();c=l(c,e,a.changes);b=dc.extendWithRanges(b,c);if(0==this.dirty&&0==b.length)return!1;this.updateInner(b,a.startState.doc.length);a.transactions.length&&(this.lastUpdate=Date.now());return!0}updateInner(a,b){this.view.viewState.mustMeasureContent=
!0;this.updateChildren(a,b);let {observer:c}=this.view;c.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px";this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=ta.chrome||ta.ios?{node:c.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e);this.dirty=0;e&&(e.written||c.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0);this.dom.style.height=""});a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof
tc&&e.widget instanceof ge&&a.push(e.dom);c.updateGaps(a)}updateChildren(a,b){b=this.childCursor(b);for(let c=a.length-1;;c--){let e=0<=c?a[c]:null;if(!e)break;let {fromA:f,toA:k,fromB:r,toB:t}=e,{content:z,breakAtStart:E,openStart:G,openEnd:O}=Zd.build(this.view.state.doc,r,t,this.decorations,this.dynamicDecorationMap),{i:W,off:Z}=b.findPos(k,1),{i:fa,off:Y}=b.findPos(f,-1);va(this,fa,Y,W,Z,z,E,G,O)}}updateSelection(a=!1,b=!1){!a&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();
let c=this.view.root.activeElement;a=c==this.dom;let e=!a&&Ha(this.dom,this.view.observer.selectionRange)&&!(c&&this.dom.contains(c));if(a||b||e){b=this.forceSelection;this.forceSelection=!1;var f=this.view.state.selection.main,k=this.domAtPos(f.anchor),r=f.empty?k:this.domAtPos(f.head);if(ta.gecko&&f.empty&&!this.compositionDeco.size&&1==k.node.nodeType&&k.node.firstChild&&(0==k.offset||"false"==k.node.childNodes[k.offset-1].contentEditable)&&(k.offset==k.node.childNodes.length||"false"==k.node.childNodes[k.offset].contentEditable)){let z=
document.createTextNode("");this.view.observer.ignore(()=>k.node.insertBefore(z,k.node.childNodes[k.offset]||null));k=r=new Ib(z,0);b=!0}var t=this.view.observer.selectionRange;!b&&t.focusNode&&$a(k.node,k.offset,t.anchorNode,t.anchorOffset)&&$a(r.node,r.offset,t.focusNode,t.focusOffset)||(this.view.observer.ignore(()=>{var z;if(z=ta.android&&ta.chrome&&this.dom.contains(t.focusNode))a:{for(z=t.focusNode;z&&z!=this.dom;z=z.assignedSlot||z.parentNode)if(1==z.nodeType&&"false"==z.contentEditable){z=
!0;break a}z=!1}z&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));if(z=Qa(this.view.root))if(f.empty){if(ta.gecko){var E=k.node;var G=k.offset;E=1!=E.nodeType?0:(G&&"false"==E.childNodes[G-1].contentEditable?1:0)|(G<E.childNodes.length&&"false"==E.childNodes[G].contentEditable?2:0);E&&3!=E&&(G=Ua(k.node,k.offset,1==E?1:-1))&&(k=new Ib(G,1==E?0:G.nodeValue.length))}z.collapse(k.node,k.offset);null!=f.bidiLevel&&null!=t.cursorBidiLevel&&(t.cursorBidiLevel=f.bidiLevel)}else if(z.extend){z.collapse(k.node,
k.offset);try{z.extend(r.node,r.offset)}catch(O){}}else E=document.createRange(),f.anchor>f.head&&([k,r]=[r,k]),E.setEnd(r.node,r.offset),E.setStart(k.node,k.offset),z.removeAllRanges(),z.addRange(E);e&&this.view.root.activeElement==this.dom&&(this.dom.blur(),c&&c.focus())}),this.view.observer.setSelectionRange(k,r));this.impreciseAnchor=k.precise?null:new Ib(t.anchorNode,t.anchorOffset);this.impreciseHead=r.precise?null:new Ib(t.focusNode,t.focusOffset)}}enforceCursorAssoc(){if(!this.compositionDeco.size){var {view:a}=
this,b=a.state.selection.main,c=Qa(a.root),{anchorNode:e,anchorOffset:f}=a.observer.selectionRange;if(c&&b.empty&&b.assoc&&c.modify){var k=Tb.find(this,b.head);if(k){var r=k.posAtStart;b.head!=r&&b.head!=r+k.length&&(k=this.coordsAt(b.head,-1),r=this.coordsAt(b.head,1),!k||!r||k.bottom>r.top||(k=this.domAtPos(b.head+b.assoc),c.collapse(k.node,k.offset),c.modify("move",0>b.assoc?"forward":"backward","lineboundary"),a.observer.readSelectionRange(),k=a.observer.selectionRange,a.docView.posFromDOM(k.anchorNode,
k.anchorOffset)!=b.from&&c.collapse(e,f)))}}}}nearest(a){for(;a;){let b=rb.get(a);if(b&&b.rootView==this)return b;a=a.parentNode}return null}posFromDOM(a,b){let c=this.nearest(a);if(!c)throw new RangeError("Trying to find position for a DOM position outside of the document");return c.localPosFromDOM(a,b)+c.posAtStart}domAtPos(a){let {i:b,off:c}=this.childCursor().findPos(a,-1);for(;b<this.children.length-1;){a=this.children[b];if(c<a.length||a instanceof Tb)break;b++;c=0}return this.children[b].domAtPos(c)}coordsAt(a,
b){for(let c=this.length,e=this.children.length-1;;e--){let f=this.children[e],k=c-f.breakAfter-f.length;if(a>k||a==k&&f.type!=sb.WidgetBefore&&f.type!=sb.WidgetAfter&&(!e||2==b||this.children[e-1].breakAfter||this.children[e-1].type==sb.WidgetBefore&&-2<b))return f.coordsAt(a-k,b);c=k}}measureVisibleLineHeights(a){let b=[],{from:c,to:e}=a;a=this.view.contentDOM.clientWidth;let f=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,k=-1,r=this.view.textDirection==zb.LTR;for(let E=0,G=0;G<this.children.length;G++){let O=
this.children[G],W=E+O.length;if(W>e)break;if(E>=c){var t=O.dom.getBoundingClientRect();b.push(t.height);if(f){var z=O.dom.lastChild;z=z?Wa(z):[];z.length&&(z=z[z.length-1],t=r?z.right-t.left:t.right-z.left,t>k&&(k=t,this.minWidth=a,this.minWidthFrom=E,this.minWidthTo=W))}}E=W+O.breakAfter}return b}textDirectionAt(a){({i:a}=this.childPos(a,1));return"rtl"==getComputedStyle(this.children[a].dom).direction?zb.RTL:zb.LTR}measureTextSize(){for(let f of this.children)if(f instanceof Tb){let k=f.measureTextSize();
if(k)return k}let a=document.createElement("div"),b,c,e;a.className="cm-line";a.style.width="99999px";a.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(()=>{this.dom.appendChild(a);let f=Wa(a.firstChild)[0];b=a.getBoundingClientRect().height;c=f?f.width/27:7;e=f?f.height:b;a.remove()});return{lineHeight:b,charWidth:c,textHeight:e}}childCursor(a=this.length){let b=this.children.length;b&&(a-=this.children[--b].length);return new Td(this.children,a,b)}computeBlockGapDeco(){let a=
[],b=this.view.viewState;for(let c=0,e=0;;e++){let f=e==b.viewports.length?null:b.viewports[e],k=f?f.from-1:this.length;if(k>c){let r=b.lineBlockAt(k).bottom-b.lineBlockAt(c).top;a.push(hb.replace({widget:new ge(r),block:!0,inclusive:!0,isBlockGap:!0}).range(c,k))}if(!f)break;c=f.to+1}return hb.set(a)}updateDeco(){let a=this.view.state.facet(Bc).map((b,c)=>(this.dynamicDecorationMap[c]="function"==typeof b)?b(this.view):b);for(let b=a.length;b<a.length+3;b++)this.dynamicDecorationMap[b]=!1;return this.decorations=
[...a,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(a){var {range:b}=a,c=this.coordsAt(b.head,b.empty?b.assoc:b.head>b.anchor?-1:1),e;if(c){!b.empty&&(e=this.coordsAt(b.anchor,b.anchor>b.head?-1:1))&&(c={left:Math.min(c.left,e.left),top:Math.min(c.top,e.top),right:Math.max(c.right,e.right),bottom:Math.max(c.bottom,e.bottom)});e=D(this.view);var f=this.view.scrollDOM;c={left:c.left-e.left,top:c.top-e.top,right:c.right+e.right,bottom:c.bottom+e.bottom};
b=b.head<b.anchor?-1:1;e=a.x;var k=a.y,r=a.xMargin;a=a.yMargin;for(var t=this.view.textDirection==zb.LTR,z=f.ownerDocument,E=z.defaultView||window;f;)if(1==f.nodeType){let Ka=f==z.body;if(Ka){var G=0;var O=E.innerWidth;var W=0;var Z=E.innerHeight}else{if(f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}var fa=f.getBoundingClientRect();G=fa.left;O=fa.left+f.clientWidth;W=fa.top;Z=fa.top+f.clientHeight}var Y=fa=0;"nearest"==k?c.top<W?(Y=-(W-c.top+
a),0<b&&c.bottom>Z+Y&&(Y=c.bottom-Z+Y+a)):c.bottom>Z&&(Y=c.bottom-Z+a,0>b&&c.top-Y<W&&(Y=-(W+Y-c.top+a))):(Y=c.bottom-c.top,Z-=W,Y=("center"==k&&Y<=Z?c.top+Y/2-Z/2:"start"==k||"center"==k&&0>b?c.top-a:c.bottom-Z+a)-W);"nearest"==e?c.left<G?(fa=-(G-c.left+r),0<b&&c.right>O+fa&&(fa=c.right-O+fa+r)):c.right>O&&(fa=c.right-O+r,0>b&&c.left<G+fa&&(fa=-(G+fa-c.left+r))):fa=("center"==e?c.left+(c.right-c.left)/2-(O-G)/2:"start"==e==t?c.left-r:c.right-(O-G)+r)-G;if(fa||Y)Ka?E.scrollBy(fa,Y):(O=G=0,Y&&(O=f.scrollTop,
f.scrollTop+=Y,O=f.scrollTop-O),fa&&(G=f.scrollLeft,f.scrollLeft+=fa,G=f.scrollLeft-G),c={left:c.left-G,top:c.top-O,right:c.right-G,bottom:c.bottom-O},G&&1>Math.abs(G-fa)&&(e="nearest"),O&&1>Math.abs(O-Y)&&(k="nearest"));if(Ka)break;f=f.assignedSlot||f.parentNode}else if(11==f.nodeType)f=f.host;else break}}}class ge extends mc{constructor(a){super();this.height=a}toDOM(){let a=document.createElement("div");this.updateDOM(a);return a}eq(a){return a.height==this.height}updateDOM(a){a.style.height=this.height+
"px";return!0}get estimatedHeight(){return this.height}}class He extends mc{constructor(a,b,c){super();this.top=a;this.text=b;this.topView=c}eq(a){return this.top==a.top&&this.text==a.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Cd}}class Ie{constructor(){this.changes=[]}compareRange(a,b){m(a,b,this.changes)}comparePoint(a,b){m(a,b,this.changes)}}class gf{constructor(a){this.lastScrollLeft=this.lastScrollTop=this.lastFocusTime=this.lastTouchTime=this.lastKeyTime=this.lastKeyCode=
0;this.chromeScrollHack=-1;this.pendingIOSKey=void 0;this.lastSelectionOrigin=null;this.lastContextMenu=this.lastEscPress=this.lastSelectionTime=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.compositionPendingChange=this.compositionPendingKey=!1;this.mouseSelection=null;let b=(c,e)=>{this.ignoreDuringComposition(e)||"keydown"==e.type&&this.keydown(a,e)||(this.mustFlushObserver(e)&&a.observer.forceFlush(),
this.runCustomHandlers(e.type,a,e)?e.preventDefault():c(a,e))};for(let c in Eb){let e=Eb[c];a.contentDOM.addEventListener(c,f=>{yb(a,f)&&b(e,f)},md[c]);this.registeredEvents.push(c)}a.scrollDOM.addEventListener("mousedown",c=>{if(c.target==a.scrollDOM&&c.clientY>a.contentDOM.getBoundingClientRect().bottom&&(b(Eb.mousedown,c),!c.defaultPrevented&&2==c.button)){let e=a.contentDOM.style.minHeight;a.contentDOM.style.minHeight="100%";setTimeout(()=>a.contentDOM.style.minHeight=e,200)}});a.scrollDOM.addEventListener("drop",
c=>{c.target==a.scrollDOM&&c.clientY>a.contentDOM.getBoundingClientRect().bottom&&b(Eb.drop,c)});ta.chrome&&102==ta.chrome_version&&a.scrollDOM.addEventListener("wheel",()=>{0>this.chromeScrollHack?a.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack);this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1;a.contentDOM.style.pointerEvents=""},100)},{passive:!0});this.notifiedFocused=a.hasFocus;ta.safari&&a.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(a){this.lastSelectionOrigin=
a;this.lastSelectionTime=Date.now()}ensureHandlers(a,b){var c;this.customHandlers=[];for(let e of b)if(b=null===(c=e.update(a).spec)||void 0===c?void 0:c.domEventHandlers){this.customHandlers.push({plugin:e.value,handlers:b});for(let f in b)0>this.registeredEvents.indexOf(f)&&"scroll"!=f&&(this.registeredEvents.push(f),a.contentDOM.addEventListener(f,k=>{yb(a,k)&&this.runCustomHandlers(f,a,k)&&k.preventDefault()}))}}runCustomHandlers(a,b,c){for(let e of this.customHandlers){let f=e.handlers[a];if(f)try{if(f.call(e.plugin,
c,b)||c.defaultPrevented)return!0}catch(k){C(b.state,k)}}return!1}runScrollHandlers(a,b){this.lastScrollTop=a.scrollDOM.scrollTop;this.lastScrollLeft=a.scrollDOM.scrollLeft;for(let c of this.customHandlers){let e=c.handlers.scroll;if(e)try{e.call(c.plugin,b,a)}catch(f){C(a.state,f)}}}keydown(a,b){this.lastKeyCode=b.keyCode;this.lastKeyTime=Date.now();if(9==b.keyCode&&Date.now()<this.lastEscPress+2E3)return!0;27!=b.keyCode&&0>Nd.indexOf(b.keyCode)&&(a.inputState.lastEscPress=0);if(ta.android&&ta.chrome&&
!b.synthetic&&(13==b.keyCode||8==b.keyCode))return a.observer.delayAndroidKey(b.key,b.keyCode),!0;let c;return!ta.ios||b.synthetic||b.altKey||b.metaKey||!((c=he.find(e=>e.keyCode==b.keyCode))&&!b.ctrlKey||-1<"dthko".indexOf(b.key)&&b.ctrlKey&&!b.shiftKey)?!1:(this.pendingIOSKey=c||b,setTimeout(()=>this.flushIOSKey(a),250),!0)}flushIOSKey(a){let b=this.pendingIOSKey;if(!b)return!1;this.pendingIOSKey=void 0;return Pa(a.contentDOM,b.key,b.keyCode)}ignoreDuringComposition(a){return/^key/.test(a.type)?
0<this.composing?!0:ta.safari&&!ta.ios&&this.compositionPendingKey&&100>Date.now()-this.compositionEndedAt?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(a){return"keydown"==a.type&&229!=a.keyCode}startMouseSelection(a){this.mouseSelection&&this.mouseSelection.destroy();this.mouseSelection=a}update(a){this.mouseSelection&&this.mouseSelection.update(a);a.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const he=
[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Nd=[16,17,18,20,91,92,224,225];class hf{constructor(a,b,c,e){this.view=a;this.style=c;this.mustSelect=e;this.scrollSpeed={x:0,y:0};this.scrolling=-1;this.lastEvent=b;this.scrollParent=za(a.contentDOM);this.atoms=a.state.facet(Vc).map(f=>f(a));c=a.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this));
c.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=b.shiftKey;this.multiple=a.state.facet(Q.EditorState.allowMultipleSelections)&&Da(a,b);this.dragMove=Ab(a,b);this.dragging=Ya(a,b)&&1==kb(b)?null:!1}start(a){!1===this.dragging&&(a.preventDefault(),this.select(a))}move(a){var b;if(0==a.buttons)return this.destroy();if(!1===this.dragging){this.select(this.lastEvent=a);var c=0,e=0,f=(null===(b=this.scrollParent)||void 0===b?void 0:b.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,
bottom:this.view.win.innerHeight};b=D(this.view);a.clientX-b.left<=f.left+6?c=-(.7*Math.max(0,f.left-a.clientX)+8):a.clientX+b.right>=f.right-6&&(c=.7*Math.max(0,a.clientX-f.right)+8);a.clientY-b.top<=f.top+6?e=-(.7*Math.max(0,f.top-a.clientY)+8):a.clientY+b.bottom>=f.bottom-6&&(e=.7*Math.max(0,a.clientY-f.bottom)+8);this.setScrollSpeed(c,e)}}up(a){null==this.dragging&&this.select(this.lastEvent);this.dragging||a.preventDefault();this.destroy()}destroy(){this.setScrollSpeed(0,0);let a=this.view.contentDOM.ownerDocument;
a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=null}setScrollSpeed(a,b){this.scrollSpeed={x:a,y:b};a||b?0>this.scrolling&&(this.scrolling=setInterval(()=>this.scroll(),50)):-1<this.scrolling&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y);
!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(a){let b=null;for(let e=0;e<a.ranges.length;e++){let f=a.ranges[e],k=null;if(f.empty){var c=Ga(this.atoms,f.from,0);c!=f.from&&(k=Q.EditorSelection.cursor(c,-1))}else{c=Ga(this.atoms,f.from,-1);let r=Ga(this.atoms,f.to,1);if(c!=f.from||r!=f.to)k=Q.EditorSelection.range(f.from==f.anchor?c:r,f.from==f.head?c:r)}k&&(b||(b=a.ranges.slice()),b[e]=k)}return b?Q.EditorSelection.create(b,a.mainIndex):a}select(a){let {view:b}=this;a=this.skipAtoms(this.style.get(a,
this.extend,this.multiple));!this.mustSelect&&a.eq(b.state.selection)&&a.main.assoc==b.state.selection.main.assoc||this.view.dispatch({selection:a,userEvent:"select.pointer"});this.mustSelect=!1}update(a){a.docChanged&&this.dragging&&(this.dragging=this.dragging.map(a.changes));this.style.update(a)&&setTimeout(()=>this.select(this.lastEvent),20)}}const Eb=Object.create(null),md=Object.create(null),ie=ta.ie&&15>ta.ie_version||ta.ios&&604>ta.webkit_version;Eb.keydown=(a,b)=>{a.inputState.setSelectionOrigin("select");
27==b.keyCode&&(a.inputState.lastEscPress=Date.now())};Eb.touchstart=(a,b)=>{a.inputState.lastTouchTime=Date.now();a.inputState.setSelectionOrigin("select.pointer")};Eb.touchmove=a=>{a.inputState.setSelectionOrigin("select.pointer")};md.touchstart=md.touchmove={passive:!0};Eb.mousedown=(a,b)=>{a.observer.flush();if(!(a.inputState.lastTouchTime>Date.now()-2E3)){var c=null;for(var e of a.state.facet(ae))if(c=e(a,b))break;c||0!=b.button||(c=ab(a,b));c&&(e=a.root.activeElement!=a.contentDOM,a.inputState.startMouseSelection(new hf(a,
b,c,e)),e&&a.observer.ignore(()=>Oa(a.contentDOM)),a.inputState.mouseSelection&&a.inputState.mouseSelection.start(b))}};const Je=ta.ie&&11>=ta.ie_version;let Fd=null,Hd=0,Gd=0;Eb.dragstart=(a,b)=>{let {selection:{main:c}}=a.state,{mouseSelection:e}=a.inputState;e&&(e.dragging=c);b.dataTransfer&&(b.dataTransfer.setData("Text",a.state.sliceDoc(c.from,c.to)),b.dataTransfer.effectAllowed="copyMove")};Eb.drop=(a,b)=>{if(b.dataTransfer){if(a.state.readOnly)return b.preventDefault();var c=b.dataTransfer.files;
if(c&&c.length){b.preventDefault();let e=Array(c.length),f=0,k=()=>{++f==c.length&&Xa(a,b,e.filter(r=>null!=r).join(a.state.lineBreak),!1)};for(let r=0;r<c.length;r++){let t=new FileReader;t.onerror=k;t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(e[r]=t.result);k()};t.readAsText(c[r])}}else Xa(a,b,b.dataTransfer.getData("Text"),!0)}};Eb.paste=(a,b)=>{if(a.state.readOnly)return b.preventDefault();a.observer.flush();let c=ie?null:b.clipboardData;c?(Ca(a,c.getData("text/plain")||c.getData("text/uri-text")),
b.preventDefault()):Rb(a)};let Wc=null;Eb.copy=Eb.cut=(a,b)=>{var c=a.state;let e=[],f=[];var k=!1;for(var r of c.selection.ranges)r.empty||(e.push(c.sliceDoc(r.from,r.to)),f.push(r));if(!e.length){k=-1;for(let {from:G}of c.selection.ranges)r=c.doc.lineAt(G),r.number>k&&(e.push(r.text),f.push({from:r.from,to:Math.min(c.doc.length,r.to+1)})),k=r.number;k=!0}c={text:e.join(c.lineBreak),ranges:f,linewise:k};let {text:t,ranges:z,linewise:E}=c;if(t||E)Wc=E?t:null,(c=ie?null:b.clipboardData)?(b.preventDefault(),
c.clearData(),c.setData("text/plain",t)):Va(a,t),"cut"!=b.type||a.state.readOnly||a.dispatch({changes:z,scrollIntoView:!0,userEvent:"delete.cut"})};const Jd=Q.Annotation.define();Eb.focus=a=>{a.inputState.lastFocusTime=Date.now();a.scrollDOM.scrollTop||!a.inputState.lastScrollTop&&!a.inputState.lastScrollLeft||(a.scrollDOM.scrollTop=a.inputState.lastScrollTop,a.scrollDOM.scrollLeft=a.inputState.lastScrollLeft);Cb(a)};Eb.blur=a=>{a.observer.clearSelectionRange();Cb(a)};Eb.compositionstart=Eb.compositionupdate=
a=>{null==a.inputState.compositionFirstChange&&(a.inputState.compositionFirstChange=!0);0>a.inputState.composing&&(a.inputState.composing=0)};Eb.compositionend=a=>{a.inputState.composing=-1;a.inputState.compositionEndedAt=Date.now();a.inputState.compositionPendingKey=!0;a.inputState.compositionPendingChange=0<a.observer.pendingRecords().length;a.inputState.compositionFirstChange=null;ta.chrome&&ta.android?a.observer.flushSoon():a.inputState.compositionPendingChange?Promise.resolve().then(()=>a.observer.flush()):
setTimeout(()=>{0>a.inputState.composing&&a.docView.compositionDeco.size&&a.update([])},50)};Eb.contextmenu=a=>{a.inputState.lastContextMenu=Date.now()};Eb.beforeinput=(a,b)=>{var c;let e;if(ta.chrome&&ta.android&&(e=he.find(f=>f.inputType==b.inputType))&&(a.observer.delayAndroidKey(e.key,e.keyCode),"Backspace"==e.key||"Delete"==e.key)){let f=(null===(c=window.visualViewport)||void 0===c?void 0:c.height)||0;setTimeout(()=>{var k;((null===(k=window.visualViewport)||void 0===k?void 0:k.height)||0)>
f+10&&a.hasFocus&&(a.contentDOM.blur(),a.focus())},100)}};const je=["pre-wrap","normal","pre-line","break-spaces"];class ke{constructor(a){this.lineWrapping=a;this.doc=Q.Text.empty;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.textHeight=14;this.lineLength=30;this.heightChanged=!1}heightForGap(a,b){let c=this.doc.lineAt(b).number-this.doc.lineAt(a).number+1;this.lineWrapping&&(c+=Math.max(0,Math.ceil((b-a-c*this.lineLength*.5)/this.lineLength)));return this.lineHeight*c}heightForLine(a){return this.lineWrapping?
(1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(a){this.doc=a;return this}mustRefreshForWrapping(a){return-1<je.indexOf(a)!=this.lineWrapping}mustRefreshForHeights(a){let b=!1;for(let c=0;c<a.length;c++){let e=a[c];0>e?c++:this.heightSamples[Math.floor(10*e)]||(b=!0,this.heightSamples[Math.floor(10*e)]=!0)}return b}refresh(a,b,c,e,f,k){let r=-1<je.indexOf(a);a=Math.round(b)!=Math.round(this.lineHeight)||this.lineWrapping!=r;this.lineWrapping=
r;this.lineHeight=b;this.charWidth=c;this.textHeight=e;this.lineLength=f;if(a)for(this.heightSamples={},b=0;b<k.length;b++)c=k[b],0>c?b++:this.heightSamples[Math.floor(10*c)]=!0;return a}}class le{constructor(a,b){this.from=a;this.heights=b;this.index=0}get more(){return this.index<this.heights.length}}class ac{constructor(a,b,c,e,f){this.from=a;this.length=b;this.top=c;this.height=e;this._content=f}get type(){return"number"==typeof this._content?sb.Text:Array.isArray(this._content)?this._content:
this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof pc?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(a){let b=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(a._content)?a._content:[a]);return new ac(this.from,this.length+a.length,this.top,this.height+a.height,b)}}B.BlockInfo=ac;var nb=function(a){a[a.ByPos=0]="ByPos";a[a.ByHeight=
1]="ByHeight";a[a.ByPosNoHeight=2]="ByPosNoHeight";return a}(nb||(nb={}));class Mb{constructor(a,b,c=2){this.length=a;this.height=b;this.flags=c}get outdated(){return 0<(this.flags&2)}set outdated(a){this.flags=(a?2:0)|this.flags&-3}setHeight(a,b){this.height!=b&&(.001<Math.abs(this.height-b)&&(a.heightChanged=!0),this.height=b)}replace(a,b,c){return Mb.of(c)}decomposeLeft(a,b){b.push(this)}decomposeRight(a,b){b.push(this)}applyChanges(a,b,c,e){let f=this,k=c.doc;for(let t=e.length-1;0<=t;t--){let {fromA:z,
toA:E,fromB:G,toB:O}=e[t];var r=f.lineAt(z,nb.ByPosNoHeight,c.setDoc(b),0,0);let W=r.to>=E?r:f.lineAt(E,nb.ByPosNoHeight,c,0,0);O+=W.to-E;for(E=W.to;0<t&&r.from<=e[t-1].toA;)z=e[t-1].fromA,G=e[t-1].fromB,t--,z<r.from&&(r=f.lineAt(z,nb.ByPosNoHeight,c,0,0));G+=r.from-z;z=r.from;r=me.build(c.setDoc(k),a,G,O);f=f.replace(z,E,r)}return f.updateHeight(c,0)}static empty(){return new Zb(0,0)}static of(a){if(1==a.length)return a[0];let b=0,c=a.length;var e=0;let f=0;for(;;)if(b==c)if(e>2*f){var k=a[b-1];
k.break?a.splice(--b,1,k.left,null,k.right):a.splice(--b,1,k.left,k.right);c+=1+k.break;e-=k.size}else if(f>2*e)k=a[c],k.break?a.splice(c,1,k.left,null,k.right):a.splice(c,1,k.left,k.right),c+=2+k.break,f-=k.size;else break;else e<f?(k=a[b++])&&(e+=k.size):(k=a[--c])&&(f+=k.size);e=0;null==a[b-1]?(e=1,b--):null==a[b]&&(e=1,c++);return new jf(Mb.of(a.slice(0,b)),e,Mb.of(a.slice(c)))}}Mb.prototype.size=1;class ne extends Mb{constructor(a,b,c){super(a,b);this.deco=c}blockAt(a,b,c,e){return new ac(e,
this.length,c,this.height,this.deco||0)}lineAt(a,b,c,e,f){return this.blockAt(0,c,e,f)}forEachLine(a,b,c,e,f,k){a<=f+this.length&&b>=f&&k(this.blockAt(0,c,e,f))}updateHeight(a,b=0,c,e){e&&e.from<=b&&e.more&&this.setHeight(a,e.heights[e.index++]);this.outdated=!1;return this}toString(){return`block(${this.length})`}}class Zb extends ne{constructor(a,b){super(a,b,null);this.breaks=this.widgetHeight=this.collapsed=0}blockAt(a,b,c,e){return new ac(e,this.length,c,this.height,this.breaks)}replace(a,b,
c){a=c[0];return 1==c.length&&(a instanceof Zb||a instanceof Jb&&a.flags&4)&&10>Math.abs(this.length-a.length)?(a instanceof Jb?a=new Zb(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):Mb.of(c)}updateHeight(a,b=0,c=!1,e){e&&e.from<=b&&e.more?this.setHeight(a,e.heights[e.index++]):(c||this.outdated)&&this.setHeight(a,Math.max(this.widgetHeight,a.heightForLine(this.length-this.collapsed))+this.breaks*a.lineHeight);this.outdated=!1;return this}toString(){return`line(${this.length}${this.collapsed?
-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jb extends Mb{constructor(a){super(a,0)}heightMetrics(a,b){let c=a.doc.lineAt(b).number;b=a.doc.lineAt(b+this.length).number;let e=b-c+1,f=0;if(a.lineWrapping){let k=Math.min(this.height,a.lineHeight*e);a=k/e;this.length>e+1&&(f=(this.height-k)/(this.length-e-1))}else a=this.height/e;return{firstLine:c,lastLine:b,perLine:a,perChar:f}}blockAt(a,b,c,e){let {firstLine:f,lastLine:k,perLine:r,perChar:t}=this.heightMetrics(b,e);if(b.lineWrapping)return b=
b.doc.lineAt(e+Math.round(Math.max(0,Math.min(1,(a-c)/this.height))*this.length)),e=r+b.length*t,new ac(b.from,b.length,Math.max(c,a-e/2),e,0);a=Math.max(0,Math.min(k-f,Math.floor((a-c)/r)));let {from:z,length:E}=b.doc.line(f+a);return new ac(z,E,c+r*a,r,0)}lineAt(a,b,c,e,f){if(b==nb.ByHeight)return this.blockAt(a,c,e,f);if(b==nb.ByPosNoHeight){let {from:z,to:E}=c.doc.lineAt(a);return new ac(z,E-z,0,0,0)}let {firstLine:k,perLine:r,perChar:t}=this.heightMetrics(c,f);a=c.doc.lineAt(a);b=r+a.length*
t;c=a.number-k;return new ac(a.from,a.length,Math.max(e,Math.min(e+r*c+t*(a.from-f-c),e+this.height-b)),b,0)}forEachLine(a,b,c,e,f,k){a=Math.max(a,f);b=Math.min(b,f+this.length);let {firstLine:r,perLine:t,perChar:z}=this.heightMetrics(c,f);for(let G=a,O=e;G<=b;){e=c.doc.lineAt(G);if(G==a){var E=e.number-r;O+=t*E+z*(a-f-E)}E=t+z*e.length;k(new ac(e.from,e.length,O,E,0));O+=E;G=e.to+1}}replace(a,b,c){b=this.length-b;if(0<b){let e=c[c.length-1];e instanceof Jb?c[c.length-1]=new Jb(e.length+b):c.push(null,
new Jb(b-1))}0<a&&(b=c[0],b instanceof Jb?c[0]=new Jb(a+b.length):c.unshift(new Jb(a-1),null));return Mb.of(c)}decomposeLeft(a,b){b.push(new Jb(a-1),null)}decomposeRight(a,b){b.push(null,new Jb(this.length-a-1))}updateHeight(a,b=0,c=!1,e){let f=b+this.length;if(e&&e.from<=b+this.length&&e.more){let r=[],t=Math.max(b,e.from);c=-1;for(e.from>b&&r.push((new Jb(e.from-b-1)).updateHeight(a,b));t<=f&&e.more;){let z=a.doc.lineAt(t).length;r.length&&r.push(null);var k=e.heights[e.index++];-1==c?c=k:.001<=
Math.abs(k-c)&&(c=-2);k=new Zb(z,k);k.outdated=!1;r.push(k);t+=z+1}t<=f&&r.push(null,(new Jb(f-t)).updateHeight(a,t));e=Mb.of(r);if(0>c||.001<=Math.abs(e.height-this.height)||.001<=Math.abs(c-this.heightMetrics(a,b).perLine))a.heightChanged=!0;return e}if(c||this.outdated)this.setHeight(a,a.heightForGap(b,b+this.length)),this.outdated=!1;return this}toString(){return`gap(${this.length})`}}class jf extends Mb{constructor(a,b,c){super(a.length+b+c.length,a.height+c.height,b|(a.outdated||c.outdated?
2:0));this.left=a;this.right=c;this.size=a.size+c.size}get break(){return this.flags&1}blockAt(a,b,c,e){let f=c+this.left.height;return a<f?this.left.blockAt(a,b,c,e):this.right.blockAt(a,b,f,e+this.left.length+this.break)}lineAt(a,b,c,e,f){let k=e+this.left.height,r=f+this.left.length+this.break,t=b==nb.ByHeight?a<k:a<r;a=t?this.left.lineAt(a,b,c,e,f):this.right.lineAt(a,b,c,k,r);if(this.break||(t?a.to<r:a.from>r))return a;b=b==nb.ByPosNoHeight?nb.ByPosNoHeight:nb.ByPos;return t?a.join(this.right.lineAt(r,
b,c,k,r)):this.left.lineAt(r,b,c,e,f).join(a)}forEachLine(a,b,c,e,f,k){let r=e+this.left.height,t=f+this.left.length+this.break;if(this.break)a<t&&this.left.forEachLine(a,b,c,e,f,k),b>=t&&this.right.forEachLine(a,b,c,r,t,k);else{let z=this.lineAt(t,nb.ByPos,c,e,f);a<z.from&&this.left.forEachLine(a,z.from-1,c,e,f,k);z.to>=a&&z.from<=b&&k(z);b>z.to&&this.right.forEachLine(z.to+1,b,c,r,t,k)}}replace(a,b,c){var e=this.left.length+this.break;if(b<e)return this.balanced(this.left.replace(a,b,c),this.right);
if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-e,b-e,c));e=[];0<a&&this.decomposeLeft(a,e);let f=e.length;for(let k of c)e.push(k);0<a&&Bb(e,f-1);b<this.length&&(a=e.length,this.decomposeRight(b,e),Bb(e,a));return Mb.of(e)}decomposeLeft(a,b){let c=this.left.length;if(a<=c)return this.left.decomposeLeft(a,b);b.push(this.left);this.break&&(c++,a>=c&&b.push(null));a>c&&this.right.decomposeLeft(a-c,b)}decomposeRight(a,b){let c=this.left.length,e=c+this.break;if(a>=e)return this.right.decomposeRight(a-
e,b);a<c&&this.left.decomposeRight(a,b);this.break&&a<e&&b.push(null);b.push(this.right)}balanced(a,b){if(a.size>2*b.size||b.size>2*a.size)return Mb.of(this.break?[a,null,b]:[a,b]);this.left=a;this.right=b;this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this.break+b.length;return this}updateHeight(a,b=0,c=!1,e){let {left:f,right:k}=this,r=b+f.length+this.break,t=null;e&&e.from<=b+f.length&&e.more?t=f=f.updateHeight(a,b,c,e):f.updateHeight(a,
b,c);e&&e.from<=r+k.length&&e.more?t=k=k.updateHeight(a,r,c,e):k.updateHeight(a,r,c);if(t)return this.balanced(f,k);this.height=this.left.height+this.right.height;this.outdated=!1;return this}toString(){return this.left+(this.break?" ":"-")+this.right}}class me{constructor(a,b){this.pos=a;this.oracle=b;this.nodes=[];this.lineEnd=this.lineStart=-1;this.covering=null;this.writtenTo=a}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(a,b){if(-1<this.lineStart){a=
Math.min(b,this.lineEnd);let c=this.nodes[this.nodes.length-1];c instanceof Zb?c.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new Zb(a-this.pos,-1));this.writtenTo=a;b>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=b}point(a,b,c){if(a<b||c.heightRelevant){let e=c.widget?c.widget.estimatedHeight:0,f=c.widget?c.widget.lineBreaks:0;0>e&&(e=this.oracle.lineHeight);a=b-a;c.block?this.addBlock(new ne(a,e,c)):(a||f||5<=e)&&this.addLineDeco(e,f,a)}else b>a&&this.span(a,
b);-1<this.lineEnd&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(!(-1<this.lineStart)){var {from:a,to:b}=this.oracle.doc.lineAt(this.pos);this.lineStart=a;this.lineEnd=b;this.writtenTo<a&&((this.writtenTo<a-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null));this.pos>a&&this.nodes.push(new Zb(this.pos-a,-1));this.writtenTo=this.pos}}blankContent(a,b){let c=new Jb(b-a);this.oracle.doc.lineAt(a).to==
b&&(c.flags|=4);return c}ensureLine(){this.enterLine();var a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a instanceof Zb)return a;a=new Zb(0,-1);this.nodes.push(a);return a}addBlock(a){var b;this.enterLine();let c=null===(b=a.deco)||void 0===b?void 0:b.type;c!=sb.WidgetAfter||this.isCovered||this.ensureLine();this.nodes.push(a);this.writtenTo=this.pos+=a.length;c!=sb.WidgetBefore&&(this.covering=a)}addLineDeco(a,b,c){let e=this.ensureLine();e.length+=c;e.collapsed+=c;e.widgetHeight=
Math.max(e.widgetHeight,a);e.breaks+=b;this.writtenTo=this.pos+=c}finish(a){let b=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(-1<this.lineStart)||b instanceof Zb||this.isCovered?(this.writtenTo<this.pos||null==b)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Zb(0,-1));for(let c of this.nodes)c instanceof Zb&&c.updateHeight(this.oracle,a),a+=c?c.length:1;return this.nodes}static build(a,b,c,e){a=new me(c,a);Q.RangeSet.spans(b,c,e,a,0);return a.finish(c)}}
class Ke{constructor(){this.changes=[]}compareRange(){}comparePoint(a,b,c,e){(a<b||c&&c.heightRelevant||e&&e.heightRelevant)&&m(a,b,this.changes,5)}}class nd{constructor(a,b,c){this.from=a;this.to=b;this.size=c}static same(a,b){if(a.length!=b.length)return!1;for(let c=0;c<a.length;c++){let e=a[c],f=b[c];if(e.from!=f.from||e.to!=f.to||e.size!=f.size)return!1}return!0}draw(a){return hb.replace({widget:new kf(this.size,a)}).range(this.from,this.to)}}class kf extends mc{constructor(a,b){super();this.size=
a;this.vertical=b}eq(a){return a.size==this.size&&a.vertical==this.vertical}toDOM(){let a=document.createElement("div");this.vertical?a.style.height=this.size+"px":(a.style.width=this.size+"px",a.style.height="2px",a.style.display="inline-block");return a}get estimatedHeight(){return this.vertical?this.size:-1}}class oe{constructor(a){this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=!0;this.scrollTop=this.editorWidth=this.editorHeight=this.contentDOMHeight=
this.contentDOMWidth=this.paddingBottom=this.paddingTop=0;this.scrolledToBottom=!0;this.scrollAnchorPos=0;this.scrollAnchorHeight=-1;this.scaler=pe;this.scrollTarget=null;this.printing=!1;this.mustMeasureContent=!0;this.defaultTextDirection=zb.LTR;this.visibleRanges=[];this.mustEnforceCursorAssoc=!1;let b=a.facet(Lc).some(c=>"function"!=typeof c&&"cm-lineWrapping"==c.class);this.heightOracle=new ke(b);this.stateDeco=a.facet(Bc).filter(c=>"function"!=typeof c);this.heightMap=Mb.empty().applyChanges(this.stateDeco,
Q.Text.empty,this.heightOracle.setDoc(a.doc),[new dc(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.updateViewportLines();this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=hb.set(this.lineGaps.map(c=>c.draw(!1)));this.computeVisibleRanges()}updateForViewport(){let a=[this.viewport],{main:b}=this.state.selection;for(let c=0;1>=c;c++){let e=c?b.head:b.anchor;if(!a.some(({from:f,to:k})=>e>=f&&e<=k)){let {from:f,to:k}=this.lineBlockAt(e);a.push(new Qc(f,
k))}}this.viewports=a.sort((c,e)=>c.from-e.from);this.scaler=7E6>=this.heightMap.height?pe:new lf(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,a=>{this.viewportLines.push(1==this.scaler.scale?a:xb(a,this.scaler))})}update(a,b=null){this.state=a.state;var c=this.stateDeco;this.stateDeco=this.state.facet(Bc).filter(k=>"function"!=typeof k);c=dc.extendWithRanges(a.changedRanges,
fb(c,this.stateDeco,a?a.changes:Q.ChangeSet.empty(this.state.doc.length)));var e=this.heightMap.height;let f=this.scrolledToBottom?null:this.lineBlockAtHeight(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,a.startState.doc,this.heightOracle.setDoc(this.state.doc),c);this.heightMap.height!=e&&(a.flags|=2);f?(this.scrollAnchorPos=a.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);c=c.length?this.mapViewport(this.viewport,
a.changes):this.viewport;if(b&&(b.range.head<c.from||b.range.head>c.to)||!this.viewportIsAppropriate(c))c=this.getViewport(0,b);e=!a.changes.empty||a.flags&2||c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c;this.updateForViewport();e&&this.updateViewportLines();(this.lineGaps.length||4E3<this.viewport.to-this.viewport.from)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));a.flags|=this.computeVisibleRanges();b&&(this.scrollTarget=b);!this.mustEnforceCursorAssoc&&
a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc&&!a.state.facet(Pd)&&(this.mustEnforceCursorAssoc=!0)}measure(a){var b=a.contentDOM,c=window.getComputedStyle(b),e=this.heightOracle,f=c.whiteSpace;this.defaultTextDirection="rtl"==c.direction?zb.RTL:zb.LTR;let k=this.heightOracle.mustRefreshForWrapping(f);var r=b.getBoundingClientRect();let t=k||this.mustMeasureContent||this.contentDOMHeight!=r.height;this.contentDOMHeight=r.height;this.mustMeasureContent=
!1;let z=0,E=0;var G=parseInt(c.paddingTop)||0;c=parseInt(c.paddingBottom)||0;if(this.paddingTop!=G||this.paddingBottom!=c)this.paddingTop=G,this.paddingBottom=c,z|=10;this.editorWidth!=a.scrollDOM.clientWidth&&(e.lineWrapping&&(t=!0),this.editorWidth=a.scrollDOM.clientWidth,z|=8);this.scrollTop!=a.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=a.scrollDOM.scrollTop);this.scrolledToBottom=this.scrollTop>a.scrollDOM.scrollHeight-a.scrollDOM.clientHeight-4;c=(this.printing?wb:ib)(b,
this.paddingTop);b=c.top-this.pixelViewport.top;G=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;c=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;c!=this.inView&&(this.inView=c)&&(t=!0);if(!this.inView&&!this.scrollTarget)return 0;c=r.width;if(this.contentDOMWidth!=c||this.editorHeight!=a.scrollDOM.clientHeight)this.contentDOMWidth=r.width,this.editorHeight=a.scrollDOM.clientHeight,z|=8;if(t){r=a.docView.measureVisibleLineHeights(this.viewport);
e.mustRefreshForHeights(r)&&(k=!0);if(k||e.lineWrapping&&Math.abs(c-this.contentDOMWidth)>e.charWidth){let {lineHeight:O,charWidth:W,textHeight:Z}=a.docView.measureTextSize();if(k=0<O&&e.refresh(f,O,W,Z,c/W,r))a.docView.minWidth=0,z|=8}0<b&&0<G?E=Math.max(b,G):0>b&&0>G&&(E=Math.min(b,G));e.heightChanged=!1;for(let O of this.viewports)f=O.from==this.viewport.from?r:a.docView.measureVisibleLineHeights(O),this.heightMap=(k?Mb.empty().applyChanges(this.stateDeco,Q.Text.empty,this.heightOracle,[new dc(0,
0,0,a.state.doc.length)]):this.heightMap).updateHeight(e,0,k,new le(O.from,f));e.heightChanged&&(z|=2)}if(e=!this.viewportIsAppropriate(this.viewport,E)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to))this.viewport=this.getViewport(E,this.scrollTarget);this.updateForViewport();(z&2||e)&&this.updateViewportLines();(this.lineGaps.length||4E3<this.viewport.to-this.viewport.from)&&this.updateLineGaps(this.ensureLineGaps(k?[]:this.lineGaps,
a));z|=this.computeVisibleRanges();this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,a.docView.enforceCursorAssoc());return z}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(a,b){var c=.5-Math.max(-.5,Math.min(.5,a/1E3/2));a=this.heightMap;let e=this.heightOracle,{visibleTop:f,visibleBottom:k}=this,r=new Qc(a.lineAt(f-1E3*c,nb.ByHeight,e,0,0).from,a.lineAt(k+1E3*(1-c),nb.ByHeight,e,
0,0).to);if(b){let {head:t}=b.range;if(t<r.from||t>r.to){c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top);let z=a.lineAt(t,nb.ByPos,e,0,0);b="center"==b.y?(z.top+z.bottom)/2-c/2:"start"==b.y||"nearest"==b.y&&t<r.from?z.top:z.bottom-c;r=new Qc(a.lineAt(b-500,nb.ByHeight,e,0,0).from,a.lineAt(b+c+500,nb.ByHeight,e,0,0).to)}}return r}mapViewport(a,b){let c=b.mapPos(a.from,-1);a=b.mapPos(a.to,1);return new Qc(this.heightMap.lineAt(c,nb.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(a,
nb.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:a,to:b},c=0){if(!this.inView)return!0;let {top:e}=this.heightMap.lineAt(a,nb.ByPos,this.heightOracle,0,0),{bottom:f}=this.heightMap.lineAt(b,nb.ByPos,this.heightOracle,0,0),{visibleTop:k,visibleBottom:r}=this;return(0==a||e<=k-Math.max(10,Math.min(-c,250)))&&(b==this.state.doc.length||f>=r+Math.max(10,Math.min(c,250)))&&e>k-2E3&&f<r+2E3}mapLineGaps(a,b){if(!a.length||b.empty)return a;let c=[];for(let e of a)b.touchesRange(e.from,e.to)||
c.push(new nd(b.mapPos(e.from),b.mapPos(e.to),e.size));return c}ensureLineGaps(a,b){let c=this.heightOracle.lineWrapping,e=c?1E4:2E3,f=e>>1,k=e<<1;if(this.defaultTextDirection!=zb.LTR&&!c)return[];let r=[],t=(O,W,Z,fa)=>{if(!(W-O<f)){var Y=this.state.selection.main,Ka=[Y.from];Y.empty||Ka.push(Y.to);for(let Ba of Ka)if(Ba>O&&Ba<W){t(O,Ba-10,Z,fa);t(Ba+10,W,Z,fa);return}Y=lb(a,Ba=>Ba.from>=Z.from&&Ba.to<=Z.to&&Math.abs(Ba.from-O)<f&&Math.abs(Ba.to-W)<f&&!Ka.some(cb=>Ba.from<cb&&Ba.to>cb));Y||(W<Z.to&&
b&&c&&b.visibleRanges.some(Ba=>Ba.from<=W&&Ba.to>=W)&&(Y=b.moveToLineBoundary(Q.EditorSelection.cursor(W),!1,!0).head,Y>O&&(W=Y)),Y=new nd(O,W,this.gapSize(Z,O,W,fa)));r.push(Y)}};for(let O of this.viewportLines){if(O.length<k)continue;let W=gb(O.from,O.to,this.stateDeco);if(!(W.total<k)){var z=this.scrollTarget?this.scrollTarget.range.head:null,E=void 0;if(c){E=e/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=z){var G=Hb(W,z);E=((this.visibleBottom-this.visibleTop)/2+E)/O.height;
z=G-E;E=G+E}else z=(this.visibleTop-O.top-E)/O.height,E=(this.visibleBottom-O.top+E)/O.height;z=Fb(W,z);E=Fb(W,E)}else{E=W.total*this.heightOracle.charWidth;G=e*this.heightOracle.charWidth;if(null!=z){let Z=Hb(W,z);E=((this.pixelViewport.right-this.pixelViewport.left)/2+G)/E;z=Z-E;E=Z+E}else z=(this.pixelViewport.left-G)/E,E=(this.pixelViewport.right+G)/E;z=Fb(W,z);E=Fb(W,E)}z>O.from&&t(O.from,z,O,W);E<O.to&&t(E,O.to,O,W)}}return r}gapSize(a,b,c,e){b=Hb(e,c)-Hb(e,b);return this.heightOracle.lineWrapping?
a.height*b:e.total*this.heightOracle.charWidth*b}updateLineGaps(a){nd.same(a,this.lineGaps)||(this.lineGaps=a,this.lineGapDeco=hb.set(a.map(b=>b.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){var a=this.stateDeco;this.lineGaps.length&&(a=a.concat(this.lineGapDeco));let b=[];Q.RangeSet.spans(a,this.viewport.from,this.viewport.to,{span(c,e){b.push({from:c,to:e})},point(){}},20);a=b.length!=this.visibleRanges.length||this.visibleRanges.some((c,e)=>c.from!=b[e].from||c.to!=b[e].to);this.visibleRanges=
b;return a?4:0}lineBlockAt(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(b=>b.from<=a&&b.to>=a)||xb(this.heightMap.lineAt(a,nb.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(a){return xb(this.heightMap.lineAt(this.scaler.fromDOM(a),nb.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(a){return xb(this.heightMap.blockAt(this.scaler.fromDOM(a),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+
this.paddingTop+this.paddingBottom}}class Qc{constructor(a,b){this.from=a;this.to=b}}const pe={toDOM(a){return a},fromDOM(a){return a},scale:1};class lf{constructor(a,b,c){let e=0,f=0,k=0;this.viewports=c.map(({from:r,to:t})=>{let z=b.lineAt(r,nb.ByPos,a,0,0).top,E=b.lineAt(t,nb.ByPos,a,0,0).bottom;e+=E-z;return{from:r,to:t,top:z,bottom:E,domTop:0,domBottom:0}});this.scale=(7E6-e)/(b.height-e);for(let r of this.viewports)r.domTop=k+(r.top-f)*this.scale,k=r.domBottom=r.domTop+(r.bottom-r.top),f=r.bottom}toDOM(a){for(let b=
0,c=0,e=0;;b++){let f=b<this.viewports.length?this.viewports[b]:null;if(!f||a<f.top)return e+(a-c)*this.scale;if(a<=f.bottom)return f.domTop+(a-f.top);c=f.bottom;e=f.domBottom}}fromDOM(a){for(let b=0,c=0,e=0;;b++){let f=b<this.viewports.length?this.viewports[b]:null;if(!f||a<f.domTop)return c+(a-e)/this.scale;if(a<=f.domBottom)return f.top+(a-f.domTop);c=f.bottom;e=f.domBottom}}}const Rc=Q.Facet.define({combine:a=>a.join(" ")}),od=Q.Facet.define({combine:a=>-1<a.indexOf(!0)}),pd=bc.StyleModule.newName(),
qe=bc.StyleModule.newName(),re=bc.StyleModule.newName(),se={"\x26light":"."+qe,"\x26dark":"."+re},mf=Nb("."+pd,{"\x26":{position:"relative !important",boxSizing:"border-box","\x26.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",
whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","\x26[contenteditable\x3dtrue]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"\x26light .cm-content":{caretColor:"black"},"\x26dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style",
"\x26 \x3e *":{position:"absolute"}},"\x26light .cm-selectionBackground":{background:"#d9d9d9"},"\x26dark .cm-selectionBackground":{background:"#222"},"\x26light.cm-focused \x3e .cm-scroller \x3e .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"\x26dark.cm-focused \x3e .cm-scroller \x3e .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"\x26.cm-focused \x3e .cm-scroller \x3e .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},
"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"\x26dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"\x26.cm-focused \x3e .cm-scroller \x3e .cm-cursorLayer .cm-cursor":{display:"block"},"\x26light .cm-activeLine":{backgroundColor:"#cceeff44"},"\x26dark .cm-activeLine":{backgroundColor:"#99eeff33"},
"\x26light .cm-specialChar":{color:"red"},"\x26dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"\x26light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"\x26dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},
".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"\x26light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"\x26dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"\x26light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"\x26light .cm-panels-top":{borderBottom:"1px solid #ddd"},"\x26light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"\x26dark .cm-panels":{backgroundColor:"#333338",
color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"200" height\x3d"20"\x3e\x3cpath stroke\x3d"%23888" stroke-width\x3d"1" fill\x3d"none" d\x3d"M1 10H196L190 5M190 15L196 10M197 4L197 16"/\x3e\x3c/svg\x3e\')',
backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"\x26light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"\x26dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888",
"\x26:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"\x26light .cm-textfield":{backgroundColor:"white"},"\x26dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},se);class nf{constructor(a,b,c,e){this.typeOver=e;this.bounds=null;this.text="";let {impreciseHead:f,impreciseAnchor:k}=a.docView;if(a.state.readOnly&&-1<b)this.newSel=null;else if(-1<b&&(this.bounds=
a.docView.domBoundsAround(b,c,0))){if(f||k)b=[];else if(b=[],a.root.activeElement==a.contentDOM){var {anchorNode:r,anchorOffset:t,focusNode:z,focusOffset:E}=a.observer.selectionRange;r&&(b.push(new ee(r,t)),z==r&&E==t||b.push(new ee(z,E)))}a=new Bd(b,a.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM);this.text=a.text;a=this.bounds.from;0==b.length?a=null:(c=b[0].pos,b=2==b.length?b[1].pos:c,a=-1<c&&-1<b?Q.EditorSelection.single(c+a,b+a):null);this.newSel=a}else c=a.observer.selectionRange,
b=f&&f.node==c.focusNode&&f.offset==c.focusOffset||!Fa(a.contentDOM,c.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(c.focusNode,c.focusOffset),a=k&&k.node==c.anchorNode&&k.offset==c.anchorOffset||!Fa(a.contentDOM,c.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(c.anchorNode,c.anchorOffset),this.newSel=Q.EditorSelection.single(a,b)}}const of={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},qd=ta.ie&&11>=ta.ie_version;class pf{constructor(a){this.view=
a;this.active=!1;this.selectionRange=new cd;this.selectionChanged=!1;this.resizeTimeout=this.delayedFlush=-1;this.queue=[];this.delayedAndroidKey=null;this.flushingAndroidKey=-1;this.lastChange=0;this.scrollTargets=[];this.resizeContent=this.resizeScroll=this.intersection=null;this.intersecting=!1;this.gapIntersection=null;this.gaps=[];this.parentCheck=-1;this.dom=a.contentDOM;this.observer=new MutationObserver(b=>{for(let c of b)this.queue.push(c);(ta.ie&&11>=ta.ie_version||ta.ios&&a.composing)&&
b.some(c=>"childList"==c.type&&c.removedNodes.length||"characterData"==c.type&&c.oldValue.length>c.target.nodeValue.length)?this.flushSoon():this.flush()});qd&&(this.onCharData=b=>{this.queue.push({target:b.target,type:"characterData",oldValue:b.prevValue});this.flushSoon()});this.onSelectionChange=this.onSelectionChange.bind(this);this.onResize=this.onResize.bind(this);this.onPrint=this.onPrint.bind(this);this.onScroll=this.onScroll.bind(this);"function"==typeof ResizeObserver&&(this.resizeScroll=
new ResizeObserver(()=>{var b;if((null===(b=this.view.docView)||void 0===b?void 0:b.lastUpdate)<Date.now()-75)this.onResize()}),this.resizeScroll.observe(a.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(a.contentDOM));this.addWindowListeners(this.win=a.win);this.start();"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(b=>{0>this.parentCheck&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),
1E3));if(0<b.length&&0<b[b.length-1].intersectionRatio!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView))this.onScrollChanged(document.createEvent("Event"))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(b=>{if(0<b.length&&0<b[b.length-1].intersectionRatio)this.onScrollChanged(document.createEvent("Event"))},{}));this.listenForScroll();this.readSelectionRange()}onScrollChanged(a){this.view.inputState.runScrollHandlers(this.view,
a);this.intersecting&&this.view.measure()}onScroll(a){this.intersecting&&this.flush(!1);this.onScrollChanged(a)}onResize(){0>this.resizeTimeout&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1;this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0;this.view.measure();setTimeout(()=>{this.view.viewState.printing=!1;this.view.requestMeasure()},500)}updateGaps(a){if(this.gapIntersection&&(a.length!=this.gaps.length||this.gaps.some((b,c)=>b!=a[c]))){this.gapIntersection.disconnect();
for(let b of a)this.gapIntersection.observe(b);this.gaps=a}}onSelectionChange(a){let b=this.selectionChanged;if(this.readSelectionRange()&&!this.delayedAndroidKey){var {view:c}=this,e=this.selectionRange;if(c.state.facet(Ec)?c.root.activeElement==this.dom:Ha(c.dom,e)){var f=e.anchorNode&&c.docView.nearest(e.anchorNode);f&&f.ignoreEvent(a)?b||(this.selectionChanged=!1):(ta.ie&&11>=ta.ie_version||ta.android&&ta.chrome)&&!c.state.selection.main.empty&&e.focusNode&&$a(e.focusNode,e.focusOffset,e.anchorNode,
e.anchorOffset)?this.flushSoon():this.flush(!1)}}}readSelectionRange(){let {view:a}=this;var b;if(b=ta.safari&&11==a.root.nodeType){for(b=this.dom.ownerDocument.activeElement;b&&b.shadowRoot;)b=b.shadowRoot.activeElement;b=b==this.dom}b=b&&gc(this.view)||Qa(a.root);if(!b||this.selectionRange.eq(b))return!1;let c=Ha(this.dom,b);var e;if(e=c&&!this.selectionChanged&&a.inputState.lastFocusTime>Date.now()-200&&a.inputState.lastTouchTime<Date.now()-300)a:{e=this.dom;let f=b.focusNode,k=b.focusOffset;if(f&&
b.anchorNode==f&&b.anchorOffset==k)for(k=Math.min(k,oa(f));;)if(k){if(1!=f.nodeType){e=!1;break a}let r=f.childNodes[k-1];"false"==r.contentEditable?k--:(f=r,k=oa(f))}else if(f==e){e=!0;break a}else k=pa(f),f=f.parentNode;else e=!1}if(e)return this.view.inputState.lastFocusTime=0,a.docView.updateSelection(),!1;this.selectionRange.setRange(b);c&&(this.selectionChanged=!0);return!0}setSelectionRange(a,b){this.selectionRange.set(a.node,a.offset,b.node,b.offset);this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,
0,null,0)}listenForScroll(){this.parentCheck=-1;let a=0,b=null;for(let c=this.dom;c;)if(1==c.nodeType)!b&&a<this.scrollTargets.length&&this.scrollTargets[a]==c?a++:b||(b=this.scrollTargets.slice(0,a)),b&&b.push(c),c=c.assignedSlot||c.parentNode;else if(11==c.nodeType)c=c.host;else break;a<this.scrollTargets.length&&!b&&(b=this.scrollTargets.slice(0,a));if(b){for(let c of this.scrollTargets)c.removeEventListener("scroll",this.onScroll);for(let c of this.scrollTargets=b)c.addEventListener("scroll",
this.onScroll)}}ignore(a){if(!this.active)return a();try{return this.stop(),a()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,of),qd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),qd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords();this.queue.length=0;this.selectionChanged=!1}delayAndroidKey(a,b){var c;
this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&Pa(this.dom,e.key,e.keyCode))}));this.delayedAndroidKey&&"Enter"!=a||(this.delayedAndroidKey={key:a,keyCode:b,force:this.lastChange<Date.now()-50||!(null===(c=this.delayedAndroidKey)||void 0===c||!c.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey);
this.delayedAndroidKey=null;this.flushingAndroidKey=-1}flushSoon(){0>this.delayedFlush&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1;this.flush()}))}forceFlush(){0<=this.delayedFlush&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1);this.flush()}pendingRecords(){for(let a of this.observer.takeRecords())this.queue.push(a);return this.queue}processRecords(){var a=this.pendingRecords();a.length&&(this.queue=[]);let b=-1,c=-1,e=!1;for(let f of a)if(a=
this.readMutation(f))a.typeOver&&(e=!0),-1==b?{from:b,to:c}=a:(b=Math.min(a.from,b),c=Math.max(a.to,c));return{from:b,to:c,typeOver:e}}readChange(){let {from:a,to:b,typeOver:c}=this.processRecords(),e=this.selectionChanged&&Ha(this.dom,this.selectionRange);if(0>a&&!e)return null;-1<a&&(this.lastChange=Date.now());this.view.inputState.lastFocusTime=0;this.selectionChanged=!1;return new nf(this.view,a,b,c)}flush(a=!0){if(0<=this.delayedFlush||this.delayedAndroidKey)return!1;a&&this.readSelectionRange();
var b=this.readChange();if(!b)return!1;a=this.view.state;b=Wb(this.view,b);this.view.state==a&&this.view.update([]);return b}readMutation(a){let b=this.view.docView.nearest(a.target);if(!b||b.ignoreMutation(a))return null;b.markDirty("attributes"==a.type);"attributes"==a.type&&(b.dirty|=4);if("childList"==a.type){let c=Qb(b,a.previousSibling||a.target.previousSibling,-1);a=Qb(b,a.nextSibling||a.target.nextSibling,1);return{from:c?b.posAfter(c):b.posAtStart,to:a?b.posBefore(a):b.posAtEnd,typeOver:!1}}return"characterData"==
a.type?{from:b.posAtStart,to:b.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}:null}setWindow(a){a!=this.win&&(this.removeWindowListeners(this.win),this.win=a,this.addWindowListeners(this.win))}addWindowListeners(a){a.addEventListener("resize",this.onResize);a.addEventListener("beforeprint",this.onPrint);a.addEventListener("scroll",this.onScroll);a.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(a){a.removeEventListener("scroll",this.onScroll);a.removeEventListener("resize",
this.onResize);a.removeEventListener("beforeprint",this.onPrint);a.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var a,b,c,e;this.stop();null===(a=this.intersection)||void 0===a?void 0:a.disconnect();null===(b=this.gapIntersection)||void 0===b?void 0:b.disconnect();null===(c=this.resizeScroll)||void 0===c?void 0:c.disconnect();null===(e=this.resizeContent)||void 0===e?void 0:e.disconnect();for(let f of this.scrollTargets)f.removeEventListener("scroll",this.onScroll);
this.removeWindowListeners(this.win);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout);this.win.cancelAnimationFrame(this.delayedFlush);this.win.cancelAnimationFrame(this.flushingAndroidKey)}}class jb{constructor(a={}){this.plugins=[];this.pluginMap=new Map;this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=!1;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");
this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: fixed; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=a.dispatch||(b=>this.update([b]));this.dispatch=this.dispatch.bind(this);this._root=a.root||mb(a.parent)||
document;this.viewState=new oe(a.state||Q.EditorState.create(a));this.plugins=this.state.facet(Ac).map(b=>new ld(b));for(let b of this.plugins)b.update(this);this.observer=new pf(this);this.inputState=new gf(this);this.inputState.ensureHandlers(this,this.plugins);this.docView=new fe(this);this.mountStyles();this.updateAttrs();this.updateState=0;this.requestMeasure();a.parent&&a.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return 0<
this.inputState.composing}get compositionStarted(){return 0<=this.inputState.composing}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...a){a=1==a.length&&a[0]instanceof Q.Transaction?a[0]:this.state.update(...a);this._dispatch(a,this)}update(a){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let b=!1,c=!1;var e=this.state;for(var f of a){if(f.startState!=e)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
e=f.state}if(this.destroyed)this.viewState.state=e;else{var k=this.hasFocus;f=0;var r=null;a.some(E=>E.annotation(Jd))?(this.inputState.notifiedFocused=k,f=1):k!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=k,(r=ob(e,k))||(f=1));var t=this.observer.delayedAndroidKey,z=null;if(t){if(this.observer.clearDelayedAndroidKey(),(z=this.observer.readChange())&&!this.state.doc.eq(e.doc)||!this.state.selection.eq(e.selection))z=null}else this.observer.clear();if(e.facet(Q.EditorState.phrases)!=
this.state.facet(Q.EditorState.phrases))return this.setState(e);e=Pc.create(this,e,a);e.flags|=f;f=this.viewState.scrollTarget;try{this.updateState=2;for(let E of a){f&&(f=f.map(E.changes));if(E.scrollIntoView){let {main:G}=E.state.selection;f=new kd(G.empty?G:Q.EditorSelection.cursor(G.head,G.head>G.anchor?-1:1))}for(let G of E.effects)G.is(ce)&&(f=G.value)}this.viewState.update(e,f);this.bidiCache=rd.update(this.bidiCache,e.changes);e.empty||(this.updatePlugins(e),this.inputState.update(e));b=this.docView.update(e);
this.state.facet(Cc)!=this.styleModules&&this.mountStyles();c=this.updateAttrs();this.showAnnouncements(a);this.docView.updateSelection(b,a.some(E=>E.isUserEvent("select.pointer")))}finally{this.updateState=0}e.startState.facet(Rc)!=e.state.facet(Rc)&&(this.viewState.mustMeasureContent=!0);(b||c||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure();if(!e.empty)for(let E of this.state.facet(jd))E(e);(r||z)&&Promise.resolve().then(()=>{r&&this.state==r.startState&&
this.dispatch(r);z&&!Wb(this,z)&&t.force&&Pa(this.contentDOM,t.key,t.keyCode)})}}setState(a){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=a;else{this.updateState=2;var b=this.hasFocus;try{for(let c of this.plugins)c.destroy(this);this.viewState=new oe(a);this.plugins=a.facet(Ac).map(c=>new ld(c));this.pluginMap.clear();for(let c of this.plugins)c.update(this);this.docView=new fe(this);this.inputState.ensureHandlers(this,
this.plugins);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}b&&this.focus();this.requestMeasure()}}updatePlugins(a){let b=a.startState.facet(Ac);var c=a.state.facet(Ac);if(b!=c){var e=[];for(let f of c)c=b.indexOf(f),0>c?e.push(new ld(f)):(c=this.plugins[c],c.mustUpdate=a,e.push(c));for(let f of this.plugins)f.mustUpdate!=a&&f.destroy(this);this.plugins=e;this.pluginMap.clear();this.inputState.ensureHandlers(this,this.plugins)}else for(e of this.plugins)e.mustUpdate=
a;for(a=0;a<this.plugins.length;a++)this.plugins[a].update(this)}measure(a=!0){if(!this.destroyed){-1<this.measureScheduled&&this.win.cancelAnimationFrame(this.measureScheduled);this.measureScheduled=0;a&&this.observer.forceFlush();a=null;var b=this.scrollDOM,{scrollTop:c}=b,{scrollAnchorPos:e,scrollAnchorHeight:f}=this.viewState;this.viewState.scrollAnchorHeight=-1;if(0>f||c!=this.viewState.scrollTop)if(c>b.scrollHeight-b.clientHeight-4)e=-1,f=this.viewState.heightMap.height;else{var k=this.viewState.lineBlockAtHeight(c);
e=k.from;f=k.top}try{for(k=0;;k++){this.updateState=1;let r=this.viewport,t=this.viewState.measure(this);if(!t&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(5<k){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let z=[];t&4||([this.measureRequests,z]=[z,this.measureRequests]);let E=z.map(Z=>{try{return Z.read(this)}catch(fa){return C(this.state,fa),te}}),G=Pc.create(this,this.state,[]),O=!1,W=!1;G.flags|=
t;a?a.flags|=t:a=G;this.updateState=2;G.empty||(this.updatePlugins(G),this.inputState.update(G),this.updateAttrs(),O=this.docView.update(G));for(let Z=0;Z<z.length;Z++)if(E[Z]!=te)try{let fa=z[Z];fa.write&&fa.write(E[Z],this)}catch(fa){C(this.state,fa)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,W=!0;else if(-1<f){let Z=(0>e?this.viewState.heightMap.height:this.viewState.lineBlockAt(e).top)-
f;if(1<Z||-1>Z)b.scrollTop=c+Z,W=!0}O&&this.docView.updateSelection(!0);if(this.viewport.from==r.from&&this.viewport.to==r.to&&!W&&0==this.measureRequests.length)break;f=-1}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let r of this.state.facet(jd))r(a)}}get themeClasses(){return pd+" "+(this.state.facet(od)?re:qe)+" "+this.state.facet(Rc)}updateAttrs(){let a=ec(this,de,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),b={spellcheck:"false",autocorrect:"off",
autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ec)?"true":"false",class:"cm-content",style:`${ta.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(b["aria-readonly"]="true");ec(this,Lc,b);let c=this.observer.ignore(()=>{let e=ya(this.contentDOM,this.contentAttrs,b),f=ya(this.dom,this.editorAttrs,a);return e||f});this.editorAttrs=a;this.contentAttrs=b;return c}showAnnouncements(a){let b=!0;for(let c of a)for(let e of c.effects)e.is(jb.announce)&&
(b&&(this.announceDOM.textContent=""),b=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(Cc);bc.StyleModule.mount(this.root,this.styleModules.concat(mf).reverse())}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&-1<this.measureScheduled&&this.measure(!1)}requestMeasure(a){0>this.measureScheduled&&(this.measureScheduled=this.win.requestAnimationFrame(()=>
this.measure()));if(a&&!(-1<this.measureRequests.indexOf(a))){if(null!=a.key)for(let b=0;b<this.measureRequests.length;b++)if(this.measureRequests[b].key===a.key){this.measureRequests[b]=a;return}this.measureRequests.push(a)}}plugin(a){let b=this.pluginMap.get(a);(void 0===b||b&&b.spec!=a)&&this.pluginMap.set(a,b=this.plugins.find(c=>c.spec==a)||null);return b&&b.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,
bottom:this.viewState.paddingBottom}}elementAtHeight(a){this.readMeasured();return this.viewState.elementAtHeight(a)}lineBlockAtHeight(a){this.readMeasured();return this.viewState.lineBlockAtHeight(a)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(a){return this.viewState.lineBlockAt(a)}get contentHeight(){return this.viewState.contentHeight}moveByChar(a,b,c){return pb(this,a,ua(this,a,b,c))}moveByGroup(a,b){return pb(this,a,ua(this,a,b,c=>Ea(this,a.head,c)))}moveToLineBoundary(a,
b,c=!0){a:{let e=ia(this,a.head);if(a=c&&e.type==sb.Text&&(this.lineWrapping||e.widgetLineBreaks)?this.coordsAtPos(0>a.assoc&&a.head>e.from?a.head-1:a.head):null){c=this.dom.getBoundingClientRect();let f=this.textDirectionAt(e.from);a=this.posAtCoords({x:b==(f==zb.LTR)?c.right-1:c.left+1,y:(a.top+a.bottom)/2});if(null!=a){b=Q.EditorSelection.cursor(a,b?-1:1);break a}}b=Q.EditorSelection.cursor(b?e.to:e.from,b?-1:1)}return b}moveVertically(a,b,c){a:{var e=a.head;let t=b?1:-1;if(e==(b?this.state.doc.length:
0))e=Q.EditorSelection.cursor(e,a.assoc);else{b=a.goalColumn;var f=this.contentDOM.getBoundingClientRect(),k=this.coordsAtPos(e);var r=this.documentTop;k?(null==b&&(b=k.left-f.left),r=0>t?k.top:k.bottom):(k=this.viewState.lineBlockAt(e),null==b&&(b=Math.min(f.right-f.left,this.defaultCharacterWidth*(e-k.from))),r=(0>t?k.top:k.bottom)+r);k=f.left+b;c=null!==c&&void 0!==c?c:this.defaultLineHeight>>1;for(let z=0;;z+=10){let E=r+(c+z)*t,G=ka(this,{x:k,y:E},!1,t);if(E<f.top||E>f.bottom||(0>t?G<e:G>e)){e=
Q.EditorSelection.cursor(G,a.assoc,void 0,b);break a}}}}return pb(this,a,e)}domAtPos(a){return this.docView.domAtPos(a)}posAtDOM(a,b=0){return this.docView.posFromDOM(a,b)}posAtCoords(a,b=!0){this.readMeasured();return ka(this,a,b)}coordsAtPos(a,b=1){this.readMeasured();let c=this.docView.coordsAt(a,b);if(!c||c.left==c.right)return c;let e=this.state.doc.lineAt(a),f=this.bidiSpans(e);a=f[ic.find(f,a-e.from,-1,b)];return sa(c,a.dir==zb.LTR==0<b)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(a){if(!this.state.facet(be)||
a<this.viewport.from||a>this.viewport.to)return this.textDirection;this.readMeasured();return this.docView.textDirectionAt(a)}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(a){if(4096<a.length)return[new ic(0,a.length,0)];let b=this.textDirectionAt(a.from);for(var c of this.bidiCache)if(c.from==a.from&&c.dir==b)return c.order;c=N(a.text,b);this.bidiCache.push(new rd(a.from,a.to,b,c));return c}get hasFocus(){var a;return(this.dom.ownerDocument.hasFocus()||ta.safari&&(null===
(a=this.inputState)||void 0===a?void 0:a.lastContextMenu)>Date.now()-3E4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Oa(this.contentDOM);this.docView.updateSelection()})}setRoot(a){this._root!=a&&(this._root=a,this.observer.setWindow((9==a.nodeType?a:a.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let a of this.plugins)a.destroy(this);this.plugins=[];this.inputState.destroy();this.dom.remove();this.observer.destroy();-1<this.measureScheduled&&
this.win.cancelAnimationFrame(this.measureScheduled);this.destroyed=!0}static scrollIntoView(a,b={}){return ce.of(new kd("number"==typeof a?Q.EditorSelection.cursor(a):a,b.y,b.x,b.yMargin,b.xMargin))}static domEventHandlers(a){return Kb.define(()=>({}),{eventHandlers:a})}static theme(a,b){let c=bc.StyleModule.newName();a=[Rc.of(c),Cc.of(Nb(`.${c}`,a))];b&&b.dark&&a.push(od.of(!0));return a}static baseTheme(a){return Q.Prec.lowest(Cc.of(Nb("."+pd,a,se)))}static findFromDOM(a){var b;let c=a.querySelector(".cm-content");
a=c&&rb.get(c)||rb.get(a);return(null===(b=null===a||void 0===a?void 0:a.rootView)||void 0===b?void 0:b.view)||null}}B.EditorView=jb;jb.styleModule=Cc;jb.inputHandler=Kd;jb.focusChangeEffect=Id;jb.perLineTextDirection=be;jb.exceptionSink=yd;jb.updateListener=jd;jb.editable=Ec;jb.mouseSelectionStyle=ae;jb.dragMovesSelection=Ed;jb.clickAddsSelectionRange=Dd;jb.decorations=Bc;jb.atomicRanges=Vc;jb.scrollMargins=zd;jb.darkTheme=od;jb.contentAttributes=Lc;jb.editorAttributes=de;jb.lineWrapping=jb.contentAttributes.of({"class":"cm-lineWrapping"});
jb.announce=Q.StateEffect.define();const te={};class rd{constructor(a,b,c,e){this.from=a;this.to=b;this.dir=c;this.order=e}static update(a,b){if(b.empty)return a;let c=[],e=a.length?a[a.length-1].dir:zb.LTR;for(let f=Math.max(0,a.length-10);f<a.length;f++){let k=a[f];k.dir!=e||b.touchesRange(k.from,k.to)||c.push(new rd(b.mapPos(k.from,1),b.mapPos(k.to,-1),k.dir,k.order))}return c}}const Le=ta.mac?"mac":ta.windows?"win":ta.linux?"linux":"key",qf=Q.Prec.default(jb.domEventHandlers({keydown(a,b){return p(d(b.state),
a,b,"editor")}})),Ld=Q.Facet.define({enables:qf});B.keymap=Ld;const Md=new WeakMap;let jc=null;class uc{constructor(a,b,c,e,f){this.className=a;this.left=b;this.top=c;this.width=e;this.height=f}draw(){let a=document.createElement("div");a.className=this.className;this.adjust(a);return a}update(a,b){if(b.className!=this.className)return!1;this.adjust(a);return!0}adjust(a){a.style.left=this.left+"px";a.style.top=this.top+"px";null!=this.width&&(a.style.width=this.width+"px");a.style.height=this.height+
"px"}eq(a){return this.left==a.left&&this.top==a.top&&this.width==a.width&&this.height==a.height&&this.className==a.className}static forRange(a,b,c){if(c.empty){c=a.coordsAtPos(c.head,c.assoc||1);if(!c)return[];a=q(a);return[new uc(b,c.left-a.left,c.top-a.top,null,c.bottom-c.top)]}return A(a,b,c)}}B.RectangleMarker=uc;class Me{constructor(a,b){this.view=a;this.layer=b;this.drawn=[];this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)};this.dom=a.scrollDOM.appendChild(document.createElement("div"));
this.dom.classList.add("cm-layer");b.above&&this.dom.classList.add("cm-layer-above");b.class&&this.dom.classList.add(b.class);this.dom.setAttribute("aria-hidden","true");this.setOrder(a.state);a.requestMeasure(this.measureReq);b.mount&&b.mount(this.dom,a)}update(a){a.startState.facet(Ic)!=a.state.facet(Ic)&&this.setOrder(a.state);(this.layer.update(a,this.dom)||a.geometryChanged)&&a.view.requestMeasure(this.measureReq)}setOrder(a){let b=0;for(a=a.facet(Ic);b<a.length&&a[b]!=this.layer;)b++;this.dom.style.zIndex=
String((this.layer.above?150:-1)-b)}measure(){return this.layer.markers(this.view)}draw(a){if(a.length!=this.drawn.length||a.some((c,e)=>{e=this.drawn[e];return!(c.constructor==e.constructor&&c.eq(e))})){let c=this.dom.firstChild;var b=0;for(let e of a)e.update&&c&&e.constructor&&this.drawn[b].constructor&&e.update(c,this.drawn[b])?(c=c.nextSibling,b++):this.dom.insertBefore(e.draw(),c);for(;c;)b=c.nextSibling,c.remove(),c=b;this.drawn=a}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,
this.view);this.dom.remove()}}const Ic=Q.Facet.define(),ue=!ta.ios,qc=Q.Facet.define({combine(a){return(0,Q.combineConfig)(a,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(b,c)=>Math.min(b,c),drawRangeCursor:(b,c)=>b||c})}}),Se=I({above:!0,markers(a){let {state:b}=a,c=b.facet(qc),e=[];for(let k of b.selection.ranges){var f=k==b.selection.main;if(k.empty?!f||ue:c.drawRangeCursor){f=f?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary";let r=k.empty?k:Q.EditorSelection.cursor(k.head,
k.head>k.anchor?-1:1);for(let t of uc.forRange(a,f,r))e.push(t)}}return e},update(a,b){a.transactions.some(e=>e.selection)&&(b.style.animationName="cm-blink"==b.style.animationName?"cm-blink2":"cm-blink");let c=P(a);c&&(b.style.animationDuration=a.state.facet(qc).cursorBlinkRate+"ms");return a.docChanged||a.selectionSet||c},mount(a,b){a.style.animationDuration=b.state.facet(qc).cursorBlinkRate+"ms"},class:"cm-cursorLayer"}),Te=I({above:!1,markers(a){return a.state.selection.ranges.map(b=>b.empty?
[]:uc.forRange(a,"cm-selectionBackground",b)).reduce((b,c)=>b.concat(c))},update(a,b){return a.docChanged||a.selectionSet||a.viewportChanged||P(a)},class:"cm-selectionLayer"}),ve={".cm-line":{"\x26 ::selection":{backgroundColor:"transparent !important"},"\x26::selection":{backgroundColor:"transparent !important"}}};ue&&(ve[".cm-line"].caretColor="transparent !important");const Ue=Q.Prec.highest(jb.theme(ve)),we=Q.StateEffect.define({map(a,b){return null==a?null:b.mapPos(a)}}),wc=Q.StateField.define({create(){return null},
update(a,b){null!=a&&(a=b.changes.mapPos(a));return b.effects.reduce((c,e)=>e.is(we)?e.value:c,a)}}),Ve=Kb.fromClass(class{constructor(a){this.view=a;this.cursor=null;this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(a){var b;let c=a.state.field(wc);null==c?null!=this.cursor&&(null===(b=this.cursor)||void 0===b?void 0:b.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),
(a.startState.field(wc)!=c||a.docChanged||a.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){var a=this.view.state.field(wc);a=null!=a&&this.view.coordsAtPos(a);if(!a)return null;let b=this.view.scrollDOM.getBoundingClientRect();return{left:a.left-b.left+this.view.scrollDOM.scrollLeft,top:a.top-b.top+this.view.scrollDOM.scrollTop,height:a.bottom-a.top}}drawCursor(a){this.cursor&&(a?(this.cursor.style.left=a.left+"px",this.cursor.style.top=a.top+"px",this.cursor.style.height=
a.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(a){this.view.state.field(wc)!=a&&this.view.dispatch({effects:we.of(a)})}},{eventHandlers:{dragover(a){this.setDropPos(this.view.posAtCoords({x:a.clientX,y:a.clientY}))},dragleave(a){a.target!=this.view.contentDOM&&this.view.contentDOM.contains(a.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});class Kc{constructor(a){const {regexp:b,decoration:c,
decorate:e,boundary:f,maxLength:k=1E3}=a;if(!b.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=b;if(e)this.addMatch=(r,t,z,E)=>e(E,z,z+r[0].length,r,t);else if("function"==typeof c)this.addMatch=(r,t,z,E)=>{(t=c(r,t,z))&&E(z,z+r[0].length,t)};else if(c)this.addMatch=(r,t,z,E)=>E(z,z+r[0].length,c);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=f;this.maxLength=
k}createDeco(a){let b=new Q.RangeSetBuilder,c=b.add.bind(b);for(let {from:e,to:f}of aa(a,this.maxLength))T(a.state.doc,this.regexp,e,f,(k,r)=>this.addMatch(r,a,k,c));return b.finish()}updateDeco(a,b){let c=1E9,e=-1;a.docChanged&&a.changes.iterChanges((f,k,r,t)=>{t>a.view.viewport.from&&r<a.view.viewport.to&&(c=Math.min(r,c),e=Math.max(t,e))});return a.viewportChanged||1E3<e-c?this.createDeco(a.view):-1<e?this.updateRange(a.view,b.map(a.changes),c,e):b}updateRange(a,b,c,e){for(let f of a.visibleRanges){let k=
Math.max(f.from,c),r=Math.min(f.to,e);if(r>k){let t=a.state.doc.lineAt(k),z=t.to<r?a.state.doc.lineAt(r):t,E=Math.max(f.from,t.from),G=Math.min(f.to,z.to);if(this.boundary){for(;k>t.from;k--)if(this.boundary.test(t.text[k-1-t.from])){E=k;break}for(;r<z.to;r++)if(this.boundary.test(z.text[r-z.from])){G=r;break}}let O=[],W,Z=(fa,Y,Ka)=>O.push(Ka.range(fa,Y));if(t==z)for(this.regexp.lastIndex=E-t.from;(W=this.regexp.exec(t.text))&&W.index<G-t.from;)this.addMatch(W,a,W.index+t.from,Z);else T(a.state.doc,
this.regexp,E,G,(fa,Y)=>this.addMatch(Y,a,fa,Z));b=b.update({filterFrom:E,filterTo:G,filter:(fa,Y)=>fa<E||Y>G,add:O})}}return b}}B.MatchDecorator=Kc;const sd=null!=/x/.unicode?"gu":"g",rf=RegExp("[\x00-\b\n--ÂŸÂ­Øœâ€‹â€Žâ€â€¨â€©â€­â€®â¦â§â©ï»¿ï¿¹-ï¿¼]",sd),sf={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",
8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let td=null;const Jc=Q.Facet.define({combine(a){a=(0,Q.combineConfig)(a,{render:null,specialChars:rf,addSpecialChars:null});var b;if(null==td&&"undefined"!=typeof document&&document.body){let c=document.body.style;td=null!=(null!==(b=c.tabSize)&&void 0!==b?b:c.MozTabSize)}if(a.replaceTabs=!td)a.specialChars=
new RegExp("\t|"+a.specialChars.source,sd);a.addSpecialChars&&(a.specialChars=new RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,sd));return a}});let Od=null;class Oe extends mc{constructor(a,b){super();this.options=a;this.code=b}eq(a){return a.code==this.code}toDOM(a){var b=this.code;b=32<=b?"â€¢":10==b?"â¤":String.fromCharCode(9216+b);a=a.state.phrase("Control character")+" "+(sf[this.code]||"0x"+this.code.toString(16));var c=this.options.render&&this.options.render(this.code,a,b);if(c)return c;
c=document.createElement("span");c.textContent=b;c.title=a;c.setAttribute("aria-label",a);c.className="cm-specialChar";return c}ignoreEvent(){return!1}}class Ne extends mc{constructor(a){super();this.width=a}eq(a){return a.width==this.width}toDOM(){let a=document.createElement("span");a.textContent="\t";a.className="cm-tab";a.style.width=this.width+"px";return a}ignoreEvent(){return!1}}const Sd=Kb.fromClass(class{constructor(){this.height=1E3;this.attrs={style:"padding-bottom: 1000px"}}update(a){({view:a}=
a);a=a.viewState.editorHeight-a.defaultLineHeight-a.documentPadding.top-.5;0<=a&&a!=this.height&&(this.height=a,this.attrs={style:`padding-bottom: ${a}px`})}}),tf=hb.line({class:"cm-activeLine"}),Xe=Kb.fromClass(class{constructor(a){this.decorations=this.getDeco(a)}update(a){if(a.docChanged||a.selectionSet)this.decorations=this.getDeco(a.view)}getDeco(a){let b=-1,c=[];for(let e of a.state.selection.ranges){let f=a.lineBlockAt(e.head);f.from>b&&(c.push(tf.range(f.from)),b=f.from)}return hb.set(c)}},
{decorations:a=>a.decorations});class df extends mc{constructor(a){super();this.content=a}toDOM(){let a=document.createElement("span");a.className="cm-placeholder";a.style.pointerEvents="none";a.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content);"string"==typeof this.content?a.setAttribute("aria-label","placeholder "+this.content):a.setAttribute("aria-hidden","true");return a}coordsAt(a){var b=a.firstChild?Wa(a.firstChild):[];if(!b.length)return null;a=window.getComputedStyle(a.parentNode);
b=sa(b[0],"rtl"!=a.direction);a=parseInt(a.lineHeight);return b.bottom-b.top>1.5*a?{left:b.left,right:b.right,top:b.top,bottom:b.top+a}:b}ignoreEvent(){return!1}}const Qe={Alt:[18,a=>!!a.altKey],Control:[17,a=>!!a.ctrlKey],Shift:[16,a=>!!a.shiftKey],Meta:[91,a=>!!a.metaKey]},Re={style:"cursor: crosshair"};class xe{constructor(a,b,c){this.facet=b;this.createTooltipView=c;this.input=a.state.facet(b);this.tooltips=this.input.filter(e=>e);this.tooltipViews=this.tooltips.map(c)}update(a){var b;let c=a.state.facet(this.facet),
e=c.filter(r=>r);if(c===this.input){for(var f of this.tooltipViews)f.update&&f.update(a);return!1}f=[];for(let r=0;r<e.length;r++){var k=e[r];let t=-1;if(k){for(let z=0;z<this.tooltips.length;z++){let E=this.tooltips[z];E&&E.create==k.create&&(t=z)}0>t?f[r]=this.createTooltipView(k):(k=f[r]=this.tooltipViews[t],k.update&&k.update(a))}}for(let r of this.tooltipViews)0>f.indexOf(r)&&(r.dom.remove(),null===(b=r.destroy)||void 0===b?void 0:b.call(r));this.input=c;this.tooltips=e;this.tooltipViews=f;return!0}}
const Mc=Q.Facet.define({combine:a=>{var b,c,e;return{position:ta.ios?"absolute":(null===(b=a.find(f=>f.position))||void 0===b?void 0:b.position)||"fixed",parent:(null===(c=a.find(f=>f.parent))||void 0===c?void 0:c.parent)||null,tooltipSpace:(null===(e=a.find(f=>f.tooltipSpace))||void 0===e?void 0:e.tooltipSpace)||v}}}),ye=new WeakMap,ad=Kb.fromClass(class{constructor(a){this.view=a;this.inView=!0;this.lastTransaction=0;this.measureTimeout=-1;let b=a.state.facet(Mc);this.position=b.position;this.parent=
b.parent;this.classes=a.themeClasses;this.createContainer();this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this};this.manager=new xe(a,ud,c=>this.createTooltip(c));this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(c=>{Date.now()>this.lastTransaction-50&&0<c.length&&1>c[c.length-1].intersectionRatio&&this.measureSoon()},{threshold:[1]}):null;this.observeIntersection();a.win.addEventListener("resize",this.measureSoon=
this.measureSoon.bind(this));this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let a of this.manager.tooltipViews)this.intersectionObserver.observe(a.dom)}}measureSoon(){0>this.measureTimeout&&(this.measureTimeout=
setTimeout(()=>{this.measureTimeout=-1;this.maybeMeasure()},50))}update(a){a.transactions.length&&(this.lastTransaction=Date.now());var b=this.manager.update(a);b&&this.observeIntersection();b=b||a.geometryChanged;a=a.state.facet(Mc);if(a.position!=this.position){this.position=a.position;for(let c of this.manager.tooltipViews)c.dom.style.position=this.position;b=!0}if(a.parent!=this.parent){this.parent&&this.container.remove();this.parent=a.parent;this.createContainer();for(let c of this.manager.tooltipViews)this.container.appendChild(c.dom);
b=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);b&&this.maybeMeasure()}createTooltip(a){let b=a.create(this.view);b.dom.classList.add("cm-tooltip");a.arrow&&!b.dom.querySelector(".cm-tooltip \x3e .cm-tooltip-arrow")&&(a=document.createElement("div"),a.className="cm-tooltip-arrow",b.dom.appendChild(a));b.dom.style.position=this.position;b.dom.style.top="-10000px";this.container.appendChild(b.dom);b.mount&&b.mount(this.view);
return b}destroy(){var a,b;this.view.win.removeEventListener("resize",this.measureSoon);for(let c of this.manager.tooltipViews)c.dom.remove(),null===(a=c.destroy)||void 0===a?void 0:a.call(c);null===(b=this.intersectionObserver)||void 0===b?void 0:b.disconnect();clearTimeout(this.measureTimeout)}readMeasure(){let a=this.view.dom.getBoundingClientRect();return{editor:a,parent:this.parent?this.container.getBoundingClientRect():a,pos:this.manager.tooltips.map((b,c)=>{c=this.manager.tooltipViews[c];return c.getCoords?
c.getCoords(b.pos):this.view.coordsAtPos(b.pos)}),size:this.manager.tooltipViews.map(({dom:b})=>b.getBoundingClientRect()),space:this.view.state.facet(Mc).tooltipSpace(this.view)}}writeMeasure(a){var b;let {editor:c,space:e}=a,f=[];for(let t=0;t<this.manager.tooltips.length;t++){var k=this.manager.tooltips[t];let z=this.manager.tooltipViews[t],{dom:E}=z,G=a.pos[t],O=a.size[t];if(!G||G.bottom<=Math.max(c.top,e.top)||G.top>=Math.min(c.bottom,e.bottom)||G.right<Math.max(c.left,e.left)-.1||G.left>Math.min(c.right,
e.right)+.1){E.style.top="-10000px";continue}let W=k.arrow?z.dom.querySelector(".cm-tooltip-arrow"):null,Z=W?7:0;var r=O.right-O.left;let fa=null!==(b=ye.get(z))&&void 0!==b?b:O.bottom-O.top,Y=z.offset||uf,Ka=this.view.textDirection==zb.LTR,Ba=O.width>e.right-e.left?Ka?e.left:e.right-O.width:Ka?Math.min(G.left-(W?14:0)+Y.x,e.right-r):Math.max(e.left,G.left-r+(W?14:0)-Y.x),cb=!!k.above;!k.strictSide&&(cb?G.top-(O.bottom-O.top)-Y.y<e.top:G.bottom+(O.bottom-O.top)+Y.y>e.bottom)&&cb==e.bottom-G.bottom>
G.top-e.top&&(cb=!cb);k=(cb?G.top-e.top:e.bottom-G.bottom)-Z;if(k<fa&&!1!==z.resize){if(k<this.view.defaultLineHeight){E.style.top="-10000px";continue}ye.set(z,fa);E.style.height=(fa=k)+"px"}else E.style.height&&(E.style.height="");k=cb?G.top-fa-Z-Y.y:G.bottom+Z+Y.y;r=Ba+r;if(!0!==z.overlap)for(let ub of f)ub.left<r&&ub.right>Ba&&ub.top<k+fa&&ub.bottom>k&&(k=cb?ub.top-fa-2-Z:ub.bottom+Z+2);"absolute"==this.position?(E.style.top=k-a.parent.top+"px",E.style.left=Ba-a.parent.left+"px"):(E.style.top=
k+"px",E.style.left=Ba+"px");W&&(W.style.left=`${G.left+(Ka?Y.x:-Y.x)-(Ba+14-7)}px`);!0!==z.overlap&&f.push({left:Ba,top:k,right:r,bottom:k+fa});E.classList.toggle("cm-tooltip-above",cb);E.classList.toggle("cm-tooltip-below",!cb);z.positioned&&z.positioned(a.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let a of this.manager.tooltipViews)a.dom.style.top=
"-10000px"}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),vf=jb.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"\x26light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"\x26light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"\x26dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","\x26:before, \x26:after":{content:"''",position:"absolute",
width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above \x26":{bottom:"-7px","\x26:before":{borderTop:"7px solid #bbb"},"\x26:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below \x26":{top:"-7px","\x26:before":{borderBottom:"7px solid #bbb"},"\x26:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"\x26dark .cm-tooltip .cm-tooltip-arrow":{"\x26:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"\x26:after":{borderTopColor:"transparent",
borderBottomColor:"transparent"}}}),uf={x:0,y:0},ud=Q.Facet.define({enables:[ad,vf]});B.showTooltip=ud;const yc=Q.Facet.define();class ze{constructor(a){this.view=a;this.mounted=!1;this.dom=document.createElement("div");this.dom.classList.add("cm-tooltip-hover");this.manager=new xe(a,yc,b=>this.createHostedView(b))}static create(a){return new ze(a)}createHostedView(a){a=a.create(this.view);a.dom.classList.add("cm-tooltip-section");this.dom.appendChild(a.dom);this.mounted&&a.mount&&a.mount(this.view);
return a}mount(a){for(let b of this.manager.tooltipViews)b.mount&&b.mount(a);this.mounted=!0}positioned(a){for(let b of this.manager.tooltipViews)b.positioned&&b.positioned(a)}update(a){this.manager.update(a)}destroy(){var a;for(let b of this.manager.tooltipViews)null===(a=b.destroy)||void 0===a?void 0:a.call(b)}}const bf=ud.compute([yc],a=>{a=a.facet(yc).filter(b=>b);return 0===a.length?null:{pos:Math.min(...a.map(b=>b.pos)),end:Math.max(...a.filter(b=>null!=b.end).map(b=>b.end)),create:ze.create,
above:a[0].above,arrow:a.some(b=>b.arrow)}});class af{constructor(a,b,c,e,f){this.view=a;this.source=b;this.field=c;this.setHover=e;this.hoverTime=f;this.restartTimeout=this.hoverTimeout=-1;this.pending=null;this.lastMove={x:0,y:0,target:a.dom,time:0};this.checkHover=this.checkHover.bind(this);a.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this));a.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),
this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){this.hoverTimeout=-1;if(!this.active){var a=Date.now()-this.lastMove.time;a<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-a):this.startHover()}}startHover(){clearTimeout(this.restartTimeout);var {lastMove:a}=this;let b=this.view.contentDOM.contains(a.target)?this.view.posAtCoords(a):null;if(null!=b){var c=this.view.coordsAtPos(b);if(!(null==c||a.y<
c.top||a.y>c.bottom||a.x<c.left-this.view.defaultCharacterWidth||a.x>c.right+this.view.defaultCharacterWidth)){var e=this.view.bidiSpans(this.view.state.doc.lineAt(b)).find(f=>f.from<=b&&f.to>=b);e=e&&e.dir==zb.RTL?-1:1;a=this.source(this.view,b,a.x<c.left?-e:e);if(null===a||void 0===a?0:a.then){let f=this.pending={pos:b};a.then(k=>{this.pending==f&&(this.pending=null,k&&this.view.dispatch({effects:this.setHover.of(k)}))},k=>C(this.view.state,k,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}}}mousemove(a){var b;
this.lastMove={x:a.clientX,y:a.clientY,target:a.target,time:Date.now()};0>this.hoverTimeout&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var c=this.active;if(c&&!y(this.lastMove.target)||this.pending){var {pos:e}=c||this.pending;c=null!==(b=null===c||void 0===c?void 0:c.end)&&void 0!==b?b:e;if(e==c)e=this.view.posAtCoords(this.lastMove)!=e;else{a:{b=this.view;var f=e,k=c;e=a.clientX;a=a.clientY;c=document.createRange();f=b.domAtPos(f);b=b.domAtPos(k);c.setEnd(b.node,b.offset);c.setStart(f.node,
f.offset);b=c.getClientRects();c.detach();for(c=0;c<b.length;c++)if(f=b[c],6>=Math.max(f.top-a,a-f.bottom,f.left-e,e-f.right)){e=!0;break a}e=!1}e=!e}e&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(a){clearTimeout(this.hoverTimeout);this.hoverTimeout=-1;this.active&&!y(a.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout);this.view.dom.removeEventListener("mouseleave",this.mouseleave);this.view.dom.removeEventListener("mousemove",
this.mousemove)}}const Rd=Q.StateEffect.define(),wf=Rd.of(null);B.closeHoverTooltips=wf;const bd=Q.Facet.define({combine(a){let b,c;for(let e of a)b=b||e.topContainer,c=c||e.bottomContainer;return{topContainer:b,bottomContainer:c}}}),Qd=Kb.fromClass(class{constructor(a){this.input=a.state.facet(vd);this.specs=this.input.filter(c=>c);this.panels=this.specs.map(c=>c(a));let b=a.state.facet(bd);this.top=new Sc(a,!0,b.topContainer);this.bottom=new Sc(a,!1,b.bottomContainer);this.top.sync(this.panels.filter(c=>
c.top));this.bottom.sync(this.panels.filter(c=>!c.top));for(let c of this.panels)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}update(a){var b=a.state.facet(bd);this.top.container!=b.topContainer&&(this.top.sync([]),this.top=new Sc(a.view,!0,b.topContainer));this.bottom.container!=b.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sc(a.view,!1,b.bottomContainer));this.top.syncClasses();this.bottom.syncClasses();b=a.state.facet(vd);if(b!=this.input){var c=b.filter(t=>t);b=[];let f=[],k=
[],r=[];for(let t of c){var e=this.specs.indexOf(t);0>e?(e=t(a.view),r.push(e)):(e=this.panels[e],e.update&&e.update(a));b.push(e);(e.top?f:k).push(e)}this.specs=c;this.panels=b;this.top.sync(f);this.bottom.sync(k);for(let t of r)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(c of this.panels)c.update&&c.update(a)}destroy(){this.top.sync([]);this.bottom.sync([])}},{provide:a=>jb.scrollMargins.of(b=>(b=b.plugin(a))&&{top:b.top.scrollMargin(),bottom:b.bottom.scrollMargin()})});class Sc{constructor(a,
b,c){this.view=a;this.top=b;this.container=c;this.dom=void 0;this.classes="";this.panels=[];this.syncClasses()}sync(a){for(let b of this.panels)b.destroy&&0>a.indexOf(b)&&b.destroy();this.panels=a;this.syncDOM()}syncDOM(){if(0==this.panels.length)this.dom&&(this.dom.remove(),this.dom=void 0);else{if(!this.dom){this.dom=document.createElement("div");this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom";this.dom.style[this.top?"top":"bottom"]="0";var a=this.container||this.view.dom;
a.insertBefore(this.dom,this.top?a.firstChild:null)}a=this.dom.firstChild;for(let b of this.panels)if(b.dom.parentNode==this.dom){for(;a!=b.dom;)a=L(a);a=a.nextSibling}else this.dom.insertBefore(b.dom,a);for(;a;)a=L(a)}}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&
this.classes!=this.view.themeClasses){for(let a of this.classes.split(" "))a&&this.container.classList.remove(a);for(let a of(this.classes=this.view.themeClasses).split(" "))a&&this.container.classList.add(a)}}}const vd=Q.Facet.define({enables:Qd});B.showPanel=vd;class fc extends Q.RangeValue{compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}eq(a){return!1}destroy(a){}}B.GutterMarker=fc;fc.prototype.elementClass="";fc.prototype.toDOM=void 0;fc.prototype.mapMode=Q.MapMode.TrackBefore;
fc.prototype.startSide=fc.prototype.endSide=-1;fc.prototype.point=!0;const Dc=Q.Facet.define();B.gutterLineClass=Dc;const We={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Q.RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},xc=Q.Facet.define(),$c=Q.Facet.define({combine:a=>a.some(b=>b)}),Pe=Kb.fromClass(class{constructor(a){this.view=a;this.prevViewport=a.viewport;this.dom=document.createElement("div");
this.dom.className="cm-gutters";this.dom.setAttribute("aria-hidden","true");this.dom.style.minHeight=this.view.contentHeight+"px";this.gutters=a.state.facet(xc).map(b=>new Ae(a,b));for(let b of this.gutters)this.dom.appendChild(b.dom);if(this.fixed=!a.state.facet($c))this.dom.style.position="sticky";this.syncGutters(!1);a.scrollDOM.insertBefore(this.dom,a.contentDOM)}update(a){if(this.updateGutters(a)){let b=this.prevViewport,c=a.view.viewport;this.syncGutters(Math.min(b.to,c.to)-Math.max(b.from,
c.from)<.8*(c.to-c.from))}a.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px");this.view.state.facet($c)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"");this.prevViewport=a.view.viewport}syncGutters(a){let b=this.dom.nextSibling;a&&this.dom.remove();let c=Q.RangeSet.iter(this.view.state.facet(Dc),this.view.viewport.from),e=[],f=this.gutters.map(k=>new xf(k,this.view.viewport,-this.view.documentPadding.top));for(let k of this.view.viewportLineBlocks)if(e.length&&
(e=[]),Array.isArray(k.type)){let r=!0;for(let t of k.type)if(t.type==sb.Text&&r){X(c,e,t.from);for(let z of f)z.line(this.view,t,e);r=!1}else if(t.widget)for(let z of f)z.widget(this.view,t)}else if(k.type==sb.Text){X(c,e,k.from);for(let r of f)r.line(this.view,k,e)}for(let k of f)k.finish();a&&this.view.scrollDOM.insertBefore(this.dom,b)}updateGutters(a){let b=a.startState.facet(xc);var c=a.state.facet(xc);let e=a.docChanged||a.heightChanged||a.viewportChanged||!Q.RangeSet.eq(a.startState.facet(Dc),
a.state.facet(Dc),a.view.viewport.from,a.view.viewport.to);if(b==c)for(var f of this.gutters)f.update(a)&&(e=!0);else{e=!0;f=[];for(let k of c)c=b.indexOf(k),0>c?f.push(new Ae(this.view,k)):(this.gutters[c].update(a),f.push(this.gutters[c]));for(let k of this.gutters)k.dom.remove(),0>f.indexOf(k)&&k.destroy();for(let k of f)this.dom.appendChild(k.dom);this.gutters=f}return e}destroy(){for(let a of this.gutters)a.destroy();this.dom.remove()}},{provide:a=>jb.scrollMargins.of(b=>{let c=b.plugin(a);return c&&
0!=c.gutters.length&&c.fixed?b.textDirection==zb.LTR?{left:c.dom.offsetWidth}:{right:c.dom.offsetWidth}:null})});class xf{constructor(a,b,c){this.gutter=a;this.height=c;this.i=0;this.cursor=Q.RangeSet.iter(a.markers,b.from)}addElement(a,b,c){let {gutter:e}=this,f=b.top-this.height;this.i==e.elements.length?(a=new Be(a,b.height,f,c),e.elements.push(a),e.dom.appendChild(a.dom)):e.elements[this.i].update(a,b.height,f,c);this.height=b.bottom;this.i++}line(a,b,c){let e=[];X(this.cursor,e,b.from);c.length&&
(e=e.concat(c));(c=this.gutter.config.lineMarker(a,b,e))&&e.unshift(c);c=this.gutter;(0!=e.length||c.config.renderEmptyElements)&&this.addElement(a,b,e)}widget(a,b){let c=this.gutter.config.widgetMarker(a,b.widget,b);c&&this.addElement(a,b,[c])}finish(){let a=this.gutter;for(;a.elements.length>this.i;){let b=a.elements.pop();a.dom.removeChild(b.dom);b.destroy()}}}class Ae{constructor(a,b){this.view=a;this.config=b;this.elements=[];this.spacer=null;this.dom=document.createElement("div");this.dom.className=
"cm-gutter"+(this.config.class?" "+this.config.class:"");for(let c in b.domEventHandlers)this.dom.addEventListener(c,e=>{var f=e.target;if(f!=this.dom&&this.dom.contains(f)){for(;f.parentNode!=this.dom;)f=f.parentNode;f=f.getBoundingClientRect();f=(f.top+f.bottom)/2}else f=e.clientY;f=a.lineBlockAtHeight(f-a.documentTop);b.domEventHandlers[c](a,f,e)&&e.preventDefault()});this.markers=R(b.markers(a));b.initialSpacer&&(this.spacer=new Be(a,0,0,[b.initialSpacer(a)]),this.dom.appendChild(this.spacer.dom),
this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(a){let b=this.markers;this.markers=R(this.config.markers(a.view));if(this.spacer&&this.config.updateSpacer){var c=this.config.updateSpacer(this.spacer.markers[0],a);c!=this.spacer.markers[0]&&this.spacer.update(a.view,0,0,[c])}c=a.view.viewport;return!Q.RangeSet.eq(this.markers,b,c.from,c.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(a):!1)}destroy(){for(let a of this.elements)a.destroy()}}class Be{constructor(a,
b,c,e){this.height=-1;this.above=0;this.markers=[];this.dom=document.createElement("div");this.dom.className="cm-gutterElement";this.update(a,b,c,e)}update(a,b,c,e){this.height!=b&&(this.dom.style.height=(this.height=b)+"px");this.above!=c&&(this.dom.style.marginTop=(this.above=c)?c+"px":"");a:if(b=this.markers,b.length!=e.length)b=!1;else{for(c=0;c<b.length;c++)if(!b[c].compare(e[c])){b=!1;break a}b=!0}b||this.setMarkers(a,e)}setMarkers(a,b){let c="cm-gutterElement",e=this.dom.firstChild;for(let k=
0,r=0;;){let t=r,z=k<b.length?b[k++]:null,E=!1;if(z){var f=z.elementClass;f&&(c+=" "+f);for(f=r;f<this.markers.length;f++)if(this.markers[f].compare(z)){t=f;E=!0;break}}else t=this.markers.length;for(;r<t;)f=this.markers[r++],f.toDOM&&(f.destroy(e),f=e.nextSibling,e.remove(),e=f);if(!z)break;z.toDOM&&(E?e=e.nextSibling:this.dom.insertBefore(z.toDOM(a),e));E&&r++}this.dom.className=c;this.markers=b}destroy(){this.setMarkers(null,[])}}const Ce=Q.Facet.define();B.lineNumberMarkers=Ce;const rc=Q.Facet.define({combine(a){return(0,Q.combineConfig)(a,
{formatNumber:String,domEventHandlers:{}},{domEventHandlers(b,c){b=Object.assign({},b);for(let e in c){let f=b[e],k=c[e];b[e]=f?(r,t,z)=>f(r,t,z)||k(r,t,z):k}return b}})}});class wd extends fc{constructor(a){super();this.number=a}eq(a){return this.number==a.number}toDOM(){return document.createTextNode(this.number)}}const cf=xc.compute([rc],a=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(b){return b.state.facet(Ce)},lineMarker(b,c,e){return e.some(f=>f.toDOM)?null:new wd(Na(b,b.state.doc.lineAt(c.from).number))},
widgetMarker:()=>null,lineMarkerChange:b=>b.startState.facet(rc)!=b.state.facet(rc),initialSpacer(b){return new wd(Na(b,db(b.state.doc.lines)))},updateSpacer(b,c){c=Na(c.view,db(c.view.state.doc.lines));return c==b.number?b:new wd(c)},domEventHandlers:a.facet(rc).domEventHandlers})),yf=new class extends fc{constructor(){super(...arguments);this.elementClass="cm-activeLineGutter"}},Ye=Dc.compute(["selection"],a=>{let b=[],c=-1;for(let e of a.selection.ranges){let f=a.doc.lineAt(e.head).from;f>c&&(c=
f,b.push(yf.range(f)))}return Q.RangeSet.of(b)}),De=new Map,$e=Lb(new Kc({regexp:/\t| +/g,decoration:a=>{a=a[0];let b=De.get(a);b||De.set(a,b=hb.mark({attributes:"\t"===a?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":a.replace(/ /g,"Â·")}}));return b},boundary:/\S/})),Ze=Lb(new Kc({regexp:/\s+$/g,decoration:hb.mark({class:"cm-trailingSpace"}),boundary:/\S/}));B.__test={HeightMap:Mb,HeightOracle:ke,MeasuredHeights:le,QueryType:nb,ChangedRange:dc,computeOrder:N,moveVisually:M}};
shadow$provide[5]=function(K,eb,vb,B){function Qa(ca,ha){return ca.length==ha.length&&ca.every((ma,qa)=>ma==ha[qa])}function Fa(ca){let ha=[[]];for(let ma=0;ma<ca.length;ma++)for(let qa=0,ya=ha.length;qa<ya;qa++)ha.push(ha[qa].concat(ca[ma]));return ha.sort((ma,qa)=>qa.length-ma.length)}function Ha(ca,ha){let ma=Object.create(null);for(let La of ca)if(Array.isArray(La.tag))for(let m of La.tag)ma[m.id]=La.class;else ma[La.tag.id]=La.class;let {scope:qa,all:ya=null}=ha||{};return{style:La=>{let m=ya;
for(let x of La)for(let C of x.set)if(La=ma[C.id]){m=m?m+" "+La:La;break}return m},scope:qa}}function Wa(ca,ha){let ma=null;for(let qa of ca)(ca=qa.style(ha))&&(ma=ma?ma+" "+ca:ca);return ma}function $a(ca){let ha=ca.type.prop(Oa);for(;ha&&ha.context&&!ca.matchContext(ha.context);)ha=ha.next;return ha||null}Object.defineProperty(B,"__esModule",{value:!0});B.getStyleTags=$a;B.highlightTree=function(ca,ha,ma,qa=0,ya=ca.length){ha=new Pa(qa,Array.isArray(ha)?ha:[ha],ma);ha.highlightRange(ca.cursor(),
qa,ya,"",ha.highlighters);ha.flush(ya)};B.styleTags=function(ca){let ha=Object.create(null);for(let La in ca){let m=ca[La];Array.isArray(m)||(m=[m]);for(let x of La.split(" "))if(x){var ma=[];let C=2;var qa=x;for(var ya=0;;){if("..."==qa&&0<ya&&ya+3==x.length){C=1;break}qa=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(qa);if(!qa)throw new RangeError("Invalid path: "+x);ma.push("*"==qa[0]?"":'"'==qa[0][0]?JSON.parse(qa[0]):qa[0]);ya+=qa[0].length;if(ya==x.length)break;qa=x[ya++];if(ya==x.length&&"!"==qa){C=0;
break}if("/"!=qa)throw new RangeError("Invalid path: "+x);qa=x.slice(ya)}qa=ma.length-1;ya=ma[qa];if(!ya)throw new RangeError("Invalid path: "+x);ma=new Aa(m,C,0<qa?ma.slice(0,qa):null);ha[ya]=ma.sort(ha[ya])}}return Oa.add(ha)};B.tagHighlighter=Ha;B.tags=B.classHighlighter=B.Tag=void 0;var pa=eb(0);let xa=0;class oa{constructor(ca,ha,ma){this.set=ca;this.base=ha;this.modified=ma;this.id=xa++}static define(ca){if(null===ca||void 0===ca?0:ca.base)throw Error("Can not derive from a modified tag");let ha=
new oa([],null,[]);ha.set.push(ha);if(ca)for(let ma of ca.set)ha.set.push(ma);return ha}static defineModifier(){let ca=new za;return ha=>-1<ha.modified.indexOf(ca)?ha:za.get(ha.base||ha,ha.modified.concat(ca).sort((ma,qa)=>ma.id-qa.id))}}B.Tag=oa;let sa=0;class za{constructor(){this.instances=[];this.id=sa++}static get(ca,ha){if(!ha.length)return ca;var ma=ha[0].instances.find(La=>La.base==ca&&Qa(ha,La.modified));if(ma)return ma;ma=[];let qa=new oa(ma,ca,ha);for(var ya of ha)ya.instances.push(qa);
ya=Fa(ha);for(let La of ca.set)if(!La.modified.length)for(let m of ya)ma.push(za.get(La,m));return qa}}const Oa=new pa.NodeProp;class Aa{constructor(ca,ha,ma,qa){this.tags=ca;this.mode=ha;this.context=ma;this.next=qa}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(ca){if(!ca||ca.depth<this.depth)return this.next=ca,this;ca.next=this.sort(ca.next);return ca}get depth(){return this.context?this.context.length:0}}Aa.empty=new Aa([],2,null);class Pa{constructor(ca,ha,ma){this.at=
ca;this.highlighters=ha;this.span=ma;this.class=""}startSpan(ca,ha){ha!=this.class&&(this.flush(ca),ca>this.at&&(this.at=ca),this.class=ha)}flush(ca){ca>this.at&&this.class&&this.span(this.at,ca,this.class)}highlightRange(ca,ha,ma,qa,ya){let {type:La,from:m,to:x}=ca;if(!(m>=ma||x<=ha)){La.isTop&&(ya=this.highlighters.filter(M=>!M.scope||M.scope(La)));var C=qa,D=$a(ca)||Aa.empty,J=Wa(ya,D.tags);J&&(C&&(C+=" "),C+=J,1==D.mode&&(qa+=(qa?" ":"")+J));this.startSpan(Math.max(ha,m),C);if(!D.opaque){var N=
ca.tree&&ca.tree.prop(pa.NodeProp.mounted);if(N&&N.overlay){D=ca.node.enter(N.overlay[0].from+m,1);J=this.highlighters.filter(la=>!la.scope||la.scope(N.tree.type));let M=ca.firstChild();for(let la=0,ja=m;;la++){let ea=la<N.overlay.length?N.overlay[la]:null,Ua=ea?ea.from+m:x,l=Math.max(ha,ja),w=Math.min(ma,Ua);if(l<w&&M)for(;ca.from<w&&(this.highlightRange(ca,l,w,qa,ya),this.startSpan(Math.min(w,ca.to),C),!(ca.to>=Ua)&&ca.nextSibling()););if(!ea||Ua>ma)break;ja=ea.to+m;ja>ha&&(this.highlightRange(D.cursor(),
Math.max(ha,ea.from+m),Math.min(ma,ja),"",J),this.startSpan(Math.min(ma,ja),C))}M&&ca.parent()}else if(ca.firstChild()){N&&(qa="");do if(!(ca.to<=ha)){if(ca.from>=ma)break;this.highlightRange(ca,ha,ma,qa,ya);this.startSpan(Math.min(ma,ca.to),C)}while(ca.nextSibling());ca.parent()}}}}}K=oa.define;eb=K();vb=K();const mb=K(vb),Ia=K(vb),wa=K(),va=K(wa),qb=K(wa),Ta=K(),Sa=K(Ta),Ja=K(),Za=K(),Gb=K(),Ma=K(Gb),bb=K();K={comment:eb,lineComment:K(eb),blockComment:K(eb),docComment:K(eb),name:vb,variableName:K(vb),
typeName:mb,tagName:K(mb),propertyName:Ia,attributeName:K(Ia),className:K(vb),labelName:K(vb),namespace:K(vb),macroName:K(vb),literal:wa,string:va,docString:K(va),character:K(va),attributeValue:K(va),number:qb,integer:K(qb),float:K(qb),bool:K(wa),regexp:K(wa),escape:K(wa),color:K(wa),url:K(wa),keyword:Ja,self:K(Ja),null:K(Ja),atom:K(Ja),unit:K(Ja),modifier:K(Ja),operatorKeyword:K(Ja),controlKeyword:K(Ja),definitionKeyword:K(Ja),moduleKeyword:K(Ja),operator:Za,derefOperator:K(Za),arithmeticOperator:K(Za),
logicOperator:K(Za),bitwiseOperator:K(Za),compareOperator:K(Za),updateOperator:K(Za),definitionOperator:K(Za),typeOperator:K(Za),controlOperator:K(Za),punctuation:Gb,separator:K(Gb),bracket:Ma,angleBracket:K(Ma),squareBracket:K(Ma),paren:K(Ma),brace:K(Ma),content:Ta,heading:Sa,heading1:K(Sa),heading2:K(Sa),heading3:K(Sa),heading4:K(Sa),heading5:K(Sa),heading6:K(Sa),contentSeparator:K(Ta),list:K(Ta),quote:K(Ta),emphasis:K(Ta),strong:K(Ta),link:K(Ta),monospace:K(Ta),strikethrough:K(Ta),inserted:K(),
deleted:K(),changed:K(),invalid:K(),meta:bb,documentMeta:K(bb),annotation:K(bb),processingInstruction:K(bb),definition:oa.defineModifier(),constant:oa.defineModifier(),function:oa.defineModifier(),standard:oa.defineModifier(),local:oa.defineModifier(),special:oa.defineModifier()};B.tags=K;K=Ha([{tag:K.link,class:"tok-link"},{tag:K.heading,class:"tok-heading"},{tag:K.emphasis,class:"tok-emphasis"},{tag:K.strong,class:"tok-strong"},{tag:K.keyword,class:"tok-keyword"},{tag:K.atom,class:"tok-atom"},{tag:K.bool,
class:"tok-bool"},{tag:K.url,class:"tok-url"},{tag:K.labelName,class:"tok-labelName"},{tag:K.inserted,class:"tok-inserted"},{tag:K.deleted,class:"tok-deleted"},{tag:K.literal,class:"tok-literal"},{tag:K.string,class:"tok-string"},{tag:K.number,class:"tok-number"},{tag:[K.regexp,K.escape,K.special(K.string)],class:"tok-string2"},{tag:K.variableName,class:"tok-variableName"},{tag:K.local(K.variableName),class:"tok-variableName tok-local"},{tag:K.definition(K.variableName),class:"tok-variableName tok-definition"},
{tag:K.special(K.variableName),class:"tok-variableName2"},{tag:K.definition(K.propertyName),class:"tok-propertyName tok-definition"},{tag:K.typeName,class:"tok-typeName"},{tag:K.namespace,class:"tok-namespace"},{tag:K.className,class:"tok-className"},{tag:K.macroName,class:"tok-macroName"},{tag:K.propertyName,class:"tok-propertyName"},{tag:K.operator,class:"tok-operator"},{tag:K.comment,class:"tok-comment"},{tag:K.meta,class:"tok-meta"},{tag:K.invalid,class:"tok-invalid"},{tag:K.punctuation,class:"tok-punctuation"}]);
B.classHighlighter=K};
shadow$provide[6]=function(K,eb,vb,B){function Qa(h){return J.Facet.define({combine:h?n=>n.concat(h):void 0})}function Fa(h,n,v){var y=h.facet(ia);h=Ha(h).topNode;if(!y||y.allowsNesting)for(y=h;y;y=y.enter(n,v,D.IterMode.ExcludeBuffers))y.type.isTop&&(h=y);return h}function Ha(h){return(h=h.field(l.state,!1))?h.tree:D.Tree.empty}function Wa(h,n,v=50){var y;h=null===(y=h.field(l.state,!1))||void 0===y?void 0:y.context;if(!h)return null;y=h.viewport;h.updateViewport({from:0,to:n});n=h.isDone(n)||h.work(v,
n)?h.tree:null;h.updateViewport(y);return n}function $a(h,n,v){return D.TreeFragment.applyChanges(h,[{fromA:n,toA:v,fromB:n,toB:v}])}function pa(h){let n=h.facet(pb);return 9==n.charCodeAt(0)?h.tabSize*n.length:n.length}function xa(h,n){let v="";var y=h.tabSize;h=h.facet(pb)[0];if("\t"==h){for(;n>=y;)v+="\t",n-=y;h=" "}for(y=0;y<n;y++)v+=h;return v}function oa(h,n){h instanceof J.EditorState&&(h=new Da(h));for(var v of h.state.facet(Ga)){let y=v(h,n);if(void 0!==y)return y}return n=(v=Ha(h.state))?
za(v.resolveInner(n).enterUnfinishedNodesBefore(n),n,h):null}function sa(h){var n=h.type.prop(Ab);if(n)return n;n=h.firstChild;let v;if(n&&(v=n.type.prop(D.NodeProp.closedBy))){let y=h.lastChild,L=y&&-1<v.indexOf(y.name);return V=>Aa(V,!0,1,void 0,!L||V.pos==V.options.simulateBreak&&V.options.simulateDoubleBreak?void 0:y.from)}return null==h.parent?Oa:null}function za(h,n,v){for(;h;h=h.parent){let y=sa(h);if(y)return y(Ya.create(v,n,h))}return null}function Oa(){return 0}function Aa(h,n,v,y,L){var V=
h.textAfter,R=V.match(/^\s*/)[0].length;y=y&&V.slice(R,R+y.length)==y||L==h.pos+R;if(n)a:if(n=h.node,L=n.childAfter(n.from),V=n.lastChild,L){R=h.options.simulateBreak;var X=h.state.doc.lineAt(L.from);R=null==R||R<=X.from?X.to:Math.min(X.to,R);for(X=L.to;;){X=n.childAfter(X);if(!X||X==V){n=null;break a}if(!X.type.isSkipped){n=X.from<R?L:null;break a}X=X.to}}else n=null;else n=null;return n?y?h.column(n.from):h.column(n.to):h.baseIndent+(y?0:h.unit*v)}function Pa(h,n,v){for(var y of h.facet(yb)){var L=
y(h,n,v);if(L)return L}L=Ha(h);if(L.length<v)h=null;else{var V=L.resolveInner(v,1);for(y=null;V;V=V.parent)if(!(V.to<=v||V.from>v)){if(y&&V.from<n)break;var R=V.type.prop(Rb),X;(X=R)&&!(X=V.to<L.length-50||L.length==h.doc.length)&&(X=V.lastChild,X=!(X&&X.to==V.to&&X.type.isError));X&&(R=R(V,h))&&R.from<=v&&R.from>=n&&R.to>v&&(y=R)}h=y}return h}function mb(h,n){let v=n.mapPos(h.from,1);h=n.mapPos(h.to,-1);return v>=h?void 0:{from:v,to:h}}function Ia(h){let n=[];for(let {head:v}of h.state.selection.ranges)n.some(y=>
y.from<=v&&y.to>=v)||n.push(h.lineBlockAt(v));return n}function wa(h,n,v){var y;let L=null;null===(y=h.field(Ra,!1))||void 0===y?void 0:y.between(n,v,(V,R)=>{if(!L||L.from>V)L={from:V,to:R}});return L}function va(h,n,v){let y=!1;h.between(n,n,(L,V)=>{L==n&&V==v&&(y=!0)});return y}function qb(h,n){return h.field(Ra,!1)?n:n.concat(J.StateEffect.appendConfig.of(Sa()))}function Ta(h,n,v=!0){let y=h.state.doc.lineAt(n.from).number;n=h.state.doc.lineAt(n.to).number;return N.EditorView.announce.of(`${h.state.phrase(v?
"Folded lines":"Unfolded lines")} ${y} ${h.state.phrase("to")} ${n}.`)}function Sa(h){let n=[Ra,wb];h&&n.push(Cb.of(h));return n}function Ja(h){let n=h.facet(Fb);return n.length?n:h.facet(Hb)}function Za(h){let n=[],v=h.matched?Qb:gc;n.push(v.range(h.start.from,h.start.to));h.end&&n.push(v.range(h.end.from,h.end.to));return n}function Gb(h,n,v){let y=h.prop(0>n?D.NodeProp.openedBy:D.NodeProp.closedBy);return y?y:1==h.name.length&&(h=v.indexOf(h.name),-1<h&&h%2==(0>n?1:0))?[v[h+n]]:null}function Ma(h){let n=
h.type.prop(Sb);return n?n(h.node):h}function bb(h,n,v,y={}){var L=y.maxScanDistance||1E4;y=y.brackets||"()[]{}";var V=Ha(h),R=V.resolveInner(n,v);for(var X=R;X;X=X.parent){var Na=Gb(X.type,v,y);if(Na&&X.from<X.to){var db=Ma(X);if(db&&(0<v?n>=db.from&&n<db.to:n>db.from&&n<=db.to)){a:{n=v;v=X;L=Na;V=y;h=v.parent;y={from:db.from,to:db.to};db=0;if((h=null===h||void 0===h?void 0:h.cursor())&&(0>n?h.childBefore(v.from):h.childAfter(v.to))){do if(0>n?h.to<=v.from:h.from>=v.to)if(0==db&&-1<L.indexOf(h.type.name)&&
h.from<h.to){n=Ma(h);y={start:y,end:n?{from:n.from,to:n.to}:void 0,matched:!0};break a}else if(Gb(h.type,n,V))db++;else if(Gb(h.type,-n,V)){if(0==db){n=Ma(h);y={start:y,end:n&&n.from<n.to?{from:n.from,to:n.to}:void 0,matched:!1};break a}db--}while(0>n?h.prevSibling():h.nextSibling())}y={start:y,matched:!1}}return y}}}a:if(db=R.type,Na=0>v?h.sliceDoc(n-1,n):h.sliceDoc(n,n+1),X=y.indexOf(Na),0>X||0==X%2!=0<v)y=null;else{Na={from:0>v?n-1:n,to:0<v?n+1:n};h=h.doc.iterRange(n,0<v?h.doc.length:0);R=0;for(let Lb=
0;!h.next().done&&Lb<=L;){let Q=h.value;0>v&&(Lb+=Q.length);let bc=n+Lb*v;for(let cc=0<v?0:Q.length-1,cd=0<v?Q.length:-1;cc!=cd;cc+=v){let $b=y.indexOf(Q[cc]);if(!(0>$b||V.resolveInner(bc+cc,1).type!=db))if(0==$b%2==0<v)R++;else if(1==R){y={start:Na,end:{from:bc+cc,to:bc+cc+1},matched:$b>>1==X>>1};break a}else R--}0<v&&(Lb+=Q.length)}y=h.done?{start:Na,matched:!1}:null}return y}function ca(h,n,v,y=0,L=0){null==n&&(n=h.search(/[^\s\u00a0]/),-1==n&&(n=h.length));for(;y<n;y++)9==h.charCodeAt(y)?L+=v-
L%v:L++;return L}function ha(h){return{name:h.name||"",token:h.token,blankLine:h.blankLine||(()=>{}),startState:h.startState||(()=>!0),copyState:h.copyState||ma,indent:h.indent||(()=>null),languageData:h.languageData||{},tokenTable:h.tokenTable||u}}function ma(h){if("object"!=typeof h)return h;let n={};for(let v in h){let y=h[v];n[v]=y instanceof Array?y.slice():y}return n}function qa(h,n,v,y,L){var V=v>=y&&v+n.length<=L&&n.prop(h.stateAfter);if(V)return{state:h.streamParser.copyState(V),pos:v+n.length};
for(V=n.children.length-1;0<=V;V--){var R=n.children[V];let X=v+n.positions[V];if(R=R instanceof D.Tree&&X<L&&qa(h,R,X,y,L))return R}return null}function ya(h,n,v,y,L){if(L&&0>=v&&y>=n.length)return n;L||n.type!=h.topNode||(L=!0);for(let V=n.children.length-1;0<=V;V--){let R=n.positions[V],X=n.children[V];if(R<y&&X instanceof D.Tree){if(!(h=ya(h,X,v-R,y-R,L)))break;return L?new D.Tree(n.type,n.children.slice(0,V).concat(h),n.positions.slice(0,V+1),R+h.length):h}}return null}function La(h,n,v){n.start=
n.pos;for(let y=0;10>y;y++){let L=h(n,v);if(n.pos>n.start)return L}throw Error("Stream parser failed to advance stream.");}function m(h,n){-1<P.indexOf(h)||(P.push(h),console.warn(n))}function x(h,n){var v=null;for(let y of n.split(".")){let L=h[y]||M.tags[y];L?"function"==typeof L?v?v=L(v):m(y,`Modifier ${y} used at start of tag`):v?m(y,`Tag ${y} used as modifier`):v=L:m(y,`Unknown highlighting tag ${y}`)}if(!v)return 0;h=n.replace(/ /g,"_");v=D.NodeType.define({id:A.length,name:h,props:[(0,M.styleTags)({[h]:v})]});
A.push(v);return v.id}function C(h){let n=D.NodeType.define({id:A.length,name:"Document",props:[ea.add(()=>h)]});A.push(n);return n}Object.defineProperty(B,"__esModule",{value:!0});B.bracketMatching=function(h={}){return[Db.of(h),ec]};B.codeFolding=Sa;B.continuedIndent=function({except:h,units:n=1}={}){return v=>{let y=h&&h.test(v.textAfter);return v.baseIndent+(y?0:n*v.unit)}};B.defineLanguageFacet=Qa;B.delimitedIndent=function({closing:h,align:n=!0,units:v=1}){return y=>Aa(y,n,v,h)};B.ensureSyntaxTree=
Wa;B.foldGutter=function(h={}){let n=Object.assign(Object.assign({},fb),h),v=new ib(n,!0),y=new ib(n,!1),L=N.ViewPlugin.fromClass(class{constructor(R){this.from=R.viewport.from;this.markers=this.buildMarkers(R)}update(R){if(R.docChanged||R.viewportChanged||R.startState.facet(ia)!=R.state.facet(ia)||R.startState.field(Ra,!1)!=R.state.field(Ra,!1)||Ha(R.startState)!=Ha(R.state)||n.foldingChanged(R))this.markers=this.buildMarkers(R.view)}buildMarkers(R){let X=new J.RangeSetBuilder;for(let Na of R.viewportLineBlocks){let db=
wa(R.state,Na.from,Na.to)?y:Pa(R.state,Na.from,Na.to)?v:null;db&&X.add(Na.from,Na.from,db)}return X.finish()}}),{domEventHandlers:V}=n;return[L,(0,N.gutter)({class:"cm-foldGutter",markers(R){var X;return(null===(X=R.plugin(L))||void 0===X?void 0:X.markers)||J.RangeSet.empty},initialSpacer(){return new ib(n,!1)},domEventHandlers:Object.assign(Object.assign({},V),{click:(R,X,Na)=>V.click&&V.click(R,X,Na)?!0:(Na=wa(R.state,X.from,X.to))?(R.dispatch({effects:ra.of(Na)}),!0):(X=Pa(R.state,X.from,X.to))?
(R.dispatch({effects:Ca.of(X)}),!0):!1})}),Sa()]};B.foldInside=function(h){let n=h.firstChild,v=h.lastChild;return n&&n.to<v.from?{from:n.to,to:v.type.isError?h.to:v.from}:null};B.foldable=Pa;B.foldedRanges=function(h){return h.field(Ra,!1)||J.RangeSet.empty};B.forceParsing=function(h,n=h.viewport.to,v=100){n=Wa(h.state,n,v);n!=Ha(h.state)&&h.dispatch({});return!!n};B.getIndentUnit=pa;B.getIndentation=oa;B.highlightingFor=function(h,n,v){var y=Ja(h);h=null;if(y)for(let L of y)(!L.scope||v&&L.scope(v))&&
(y=L.style(n))&&(h=h?h+" "+y:y);return h};B.indentOnInput=function(){return J.EditorState.transactionFilter.of(h=>{if(!h.docChanged||!h.isUserEvent("input.type")&&!h.isUserEvent("input.complete"))return h;var n=h.startState.languageDataAt("indentOnInput",h.startState.selection.main.head);if(!n.length)return h;var v=h.newDoc,{head:y}=h.newSelection.main,L=v.lineAt(y);if(y>L.from+200)return h;let V=v.sliceString(L.from,y);if(!n.some(X=>X.test(V)))return h;({state:n}=h);v=-1;y=[];for(let {head:X}of n.selection.ranges){L=
n.doc.lineAt(X);if(L.from==v)continue;v=L.from;var R=oa(n,L.from);if(null==R)continue;let Na=/^\s*/.exec(L.text)[0];R=xa(n,R);Na!=R&&y.push({from:L.from,to:L.from+Na.length,insert:R})}return y.length?[h,{changes:y,sequential:!0}]:h})};B.indentRange=function(h,n,v){let y=Object.create(null),L=new Da(h,{overrideIndentation:R=>{var X;return null!==(X=y[R])&&void 0!==X?X:-1}}),V=[];for(;n<=v;){let R=h.doc.lineAt(n);n=R.to+1;let X=oa(L,R.from);if(null==X)continue;/\S/.test(R.text)||(X=0);let Na=/^\s*/.exec(R.text)[0],
db=xa(h,X);Na!=db&&(y[R.from]=X,V.push({from:R.from,to:R.from+Na.length,insert:db}))}return h.changes(V)};B.indentString=xa;B.matchBrackets=bb;B.syntaxHighlighting=function(h,n){let v=[xb],y;h instanceof gb&&(h.module&&v.push(N.EditorView.styleModule.of(h.module)),y=h.themeType);(null===n||void 0===n?0:n.fallback)?v.push(Hb.of(h)):y?v.push(Fb.computeN([N.EditorView.darkTheme],L=>L.facet(N.EditorView.darkTheme)==("dark"==y)?[h]:[])):v.push(Fb.of(h));return v};B.syntaxParserRunning=function(h){var n;
return(null===(n=h.plugin(ba))||void 0===n?void 0:n.isWorking())||!1};B.syntaxTree=Ha;B.syntaxTreeAvailable=function(h,n=h.doc.length){var v;return(null===(v=h.field(l.state,!1))||void 0===v?void 0:v.context.isDone(n))||!1};B.unfoldEffect=B.unfoldCode=B.unfoldAll=B.toggleFold=B.sublanguageProp=B.languageDataProp=B.language=B.indentUnit=B.indentService=B.indentNodeProp=B.foldState=B.foldService=B.foldNodeProp=B.foldKeymap=B.foldEffect=B.foldCode=B.foldAll=B.flatIndent=B.defaultHighlightStyle=B.bracketMatchingHandle=
B.TreeIndentContext=B.StringStream=B.StreamLanguage=B.ParseContext=B.LanguageSupport=B.LanguageDescription=B.Language=B.LRLanguage=B.IndentContext=B.HighlightStyle=B.DocInput=void 0;var D=eb(0),J=eb(1),N=eb(4),M=eb(5),la=eb(2),ja;const ea=new D.NodeProp;B.languageDataProp=ea;const Ua=new D.NodeProp;B.sublanguageProp=Ua;class l{constructor(h,n,v=[],y=""){this.data=h;this.name=y;J.EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(J.EditorState.prototype,"tree",{get(){return Ha(this)}});
this.parser=n;this.extension=[ia.of(this),J.EditorState.languageData.of((L,V,R)=>{let X=Fa(L,V,R);var Na=X.type.prop(ea);if(!Na)return[];Na=L.facet(Na);let db=X.type.prop(Ua);if(db){V=X.resolve(V-X.from,R);for(let Lb of db)if(Lb.test(V,L))return L=L.facet(Lb.facet),"replace"==Lb.type?L:L.concat(Na)}return Na})].concat(v)}isActiveAt(h,n,v=-1){return Fa(h,n,v).type.prop(ea)==this.data}findRegions(h){let n=h.facet(ia);if((null===n||void 0===n?void 0:n.data)==this.data)return[{from:0,to:h.doc.length}];
if(!n||!n.allowsNesting)return[];let v=[],y=(L,V)=>{if(L.prop(ea)==this.data)v.push({from:V,to:V+L.length});else{var R=L.prop(D.NodeProp.mounted);if(R){if(R.tree.prop(ea)==this.data){if(R.overlay)for(var X of R.overlay)v.push({from:X.from+V,to:X.to+V});else v.push({from:V,to:V+L.length});return}if(R.overlay&&(X=v.length,y(R.tree,R.overlay[0].from+V),v.length>X))return}for(R=0;R<L.children.length;R++)X=L.children[R],X instanceof D.Tree&&y(X,L.positions[R]+V)}};y(Ha(h),0);return v}get allowsNesting(){return!0}}
B.Language=l;l.setState=J.StateEffect.define();class w extends l{constructor(h,n,v){super(h,n,[],v);this.parser=n}static define(h){let n=Qa(h.languageData);return new w(n,h.parser.configure({props:[ea.add(v=>v.isTop?n:void 0)]}),h.name)}configure(h,n){return new w(this.data,this.parser.configure(h),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}B.LRLanguage=w;class F{constructor(h){this.doc=h;this.cursorPos=0;this.string="";this.cursor=h.iter()}get length(){return this.doc.length}syncTo(h){this.string=
this.cursor.next(h-this.cursorPos).value;this.cursorPos=h+this.string.length;return this.cursorPos-this.string.length}chunk(h){this.syncTo(h);return this.string}get lineChunks(){return!0}read(h,n){let v=this.cursorPos-this.string.length;return h<v||n>=this.cursorPos?this.doc.sliceString(h,n):this.string.slice(h-v,n-v)}}B.DocInput=F;let H=null;class U{constructor(h,n,v=[],y,L,V,R,X){this.parser=h;this.state=n;this.fragments=v;this.tree=y;this.treeLen=L;this.viewport=V;this.skipped=R;this.scheduleOn=
X;this.parse=null;this.tempSkipped=[]}static create(h,n,v){return new U(h,n,[],D.Tree.empty,0,v,[],null)}startParse(){return this.parser.startParse(new F(this.state.doc),this.fragments)}work(h,n){null!=n&&n>=this.state.doc.length&&(n=void 0);return this.tree!=D.Tree.empty&&this.isDone(null!==n&&void 0!==n?n:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var v;if("number"==typeof h){let y=Date.now()+h;h=()=>Date.now()>y}this.parse||(this.parse=this.startParse());for(null!=n&&(null==
this.parse.stoppedAt||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let y=this.parse.advance();if(y)if(this.fragments=this.withoutTempSkipped(D.TreeFragment.addTree(y,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(v=this.parse.stoppedAt)&&void 0!==v?v:this.state.doc.length,this.tree=y,this.parse=null,this.treeLen<(null!==n&&void 0!==n?n:this.state.doc.length))this.parse=this.startParse();else return!0;if(h())return!1}})}takeTree(){let h,n;this.parse&&
(h=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>h)&&this.parse.stopAt(h),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=h,this.tree=n,this.fragments=this.withoutTempSkipped(D.TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(h){let n=H;H=this;try{return h()}finally{H=n}}withoutTempSkipped(h){for(let n;n=this.tempSkipped.pop();)h=$a(h,n.from,n.to);return h}changes(h,n){let {fragments:v,tree:y,treeLen:L,
viewport:V,skipped:R}=this;this.takeTree();if(!h.empty){let X=[];h.iterChangedRanges((Na,db,Lb,Q)=>X.push({fromA:Na,toA:db,fromB:Lb,toB:Q}));v=D.TreeFragment.applyChanges(v,X);y=D.Tree.empty;L=0;V={from:h.mapPos(V.from,-1),to:h.mapPos(V.to,1)};if(this.skipped.length){R=[];for(let Na of this.skipped){let db=h.mapPos(Na.from,1),Lb=h.mapPos(Na.to,-1);db<Lb&&R.push({from:db,to:Lb})}}}return new U(this.parser,n,v,y,L,V,R,this.scheduleOn)}updateViewport(h){if(this.viewport.from==h.from&&this.viewport.to==
h.to)return!1;this.viewport=h;let n=this.skipped.length;for(let v=0;v<this.skipped.length;v++){let {from:y,to:L}=this.skipped[v];y<h.to&&L>h.from&&(this.fragments=$a(this.fragments,y,L),this.skipped.splice(v--,1))}if(this.skipped.length>=n)return!1;this.reset();return!0}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(h,n){this.skipped.push({from:h,to:n})}static getSkippingParser(h){return new class extends D.Parser{createParse(n,v,y){let L=y[0].from,V=y[y.length-1].to;return{parsedPos:L,
advance(){let R=H;if(R){for(let X of y)R.tempSkipped.push(X);h&&(R.scheduleOn=R.scheduleOn?Promise.all([R.scheduleOn,h]):h)}this.parsedPos=V;return new D.Tree(D.NodeType.none,[],[],V-L)},stoppedAt:null,stopAt(){}}}}}isDone(h){h=Math.min(h,this.state.doc.length);let n=this.fragments;return this.treeLen>=h&&n.length&&0==n[0].from&&n[0].to>=h}static get(){return H}}B.ParseContext=U;class S{constructor(h){this.context=h;this.tree=h.tree}apply(h){if(!h.docChanged&&this.tree==this.context.tree)return this;
let n=this.context.changes(h.changes,h.state);h=this.context.treeLen==h.startState.doc.length?void 0:Math.max(h.changes.mapPos(this.context.treeLen),n.viewport.to);n.work(20,h)||n.takeTree();return new S(n)}static init(h){let n=Math.min(3E3,h.doc.length);h=U.create(h.facet(ia).parser,h,{from:0,to:n});h.work(20,n)||h.takeTree();return new S(h)}}l.state=J.StateField.define({create:S.init,update(h,n){for(let v of n.effects)if(v.is(l.setState))return v.value;return n.startState.facet(ia)!=n.state.facet(ia)?
S.init(n.state):h.apply(n)}});let da=h=>{let n=setTimeout(()=>h(),500);return()=>clearTimeout(n)};"undefined"!=typeof requestIdleCallback&&(da=h=>{let n=-1,v=setTimeout(()=>{n=requestIdleCallback(h,{timeout:400})},100);return()=>0>n?clearTimeout(v):cancelIdleCallback(n)});const ka="undefined"!=typeof navigator&&(null===(ja=navigator.scheduling)||void 0===ja?0:ja.isInputPending)?()=>navigator.scheduling.isInputPending():null,ba=N.ViewPlugin.fromClass(class{constructor(h){this.view=h;this.working=null;
this.workScheduled=0;this.chunkBudget=this.chunkEnd=-1;this.work=this.work.bind(this);this.scheduleWork()}update(h){let n=this.view.state.field(l.state).context;(n.updateViewport(h.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork();h.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork());this.checkAsyncSchedule(n)}scheduleWork(){if(!this.working){var {state:h}=this.view,n=h.field(l.state);n.tree==n.context.tree&&n.context.isDone(h.doc.length)||(this.working=
da(this.work))}}work(h){this.working=null;let n=Date.now();this.chunkEnd<n&&(0>this.chunkEnd||this.view.hasFocus)&&(this.chunkEnd=n+3E4,this.chunkBudget=3E3);if(!(0>=this.chunkBudget)){var {state:v,viewport:{to:y}}=this.view,L=v.field(l.state);if(L.tree!=L.context.tree||!L.context.isDone(y+1E5)){var V=Date.now()+Math.min(this.chunkBudget,100,h&&!ka?Math.max(25,h.timeRemaining()-5):1E9);h=L.context.treeLen<y&&v.doc.length>y+1E3;var R=L.context.work(()=>ka&&ka()||Date.now()>V,y+(h?0:1E5));this.chunkBudget-=
Date.now()-n;if(R||0>=this.chunkBudget)L.context.takeTree(),this.view.dispatch({effects:l.setState.of(new S(L.context))});0<this.chunkBudget&&(!R||h)&&this.scheduleWork();this.checkAsyncSchedule(L.context)}}}checkAsyncSchedule(h){h.scheduleOn&&(this.workScheduled++,h.scheduleOn.then(()=>this.scheduleWork()).catch(n=>(0,N.logException)(this.view.state,n)).then(()=>this.workScheduled--),h.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||0<this.workScheduled)}},
{eventHandlers:{focus(){this.scheduleWork()}}}),ia=J.Facet.define({combine(h){return h.length?h[0]:null},enables:h=>[l.state,ba,N.EditorView.contentAttributes.compute([h],n=>(n=n.facet(h))&&n.name?{"data-language":n.name}:{})]});B.language=ia;class ua{constructor(h,n=[]){this.language=h;this.support=n;this.extension=[h,n]}}B.LanguageSupport=ua;class Ea{constructor(h,n,v,y,L,V){this.name=h;this.alias=n;this.extensions=v;this.filename=y;this.loadFunc=L;this.support=V;this.loading=null}load(){return this.loading||
(this.loading=this.loadFunc().then(h=>this.support=h,h=>{this.loading=null;throw h;}))}static of(h){let {load:n,support:v}=h;if(!n){if(!v)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(v)}return new Ea(h.name,(h.alias||[]).concat(h.name).map(y=>y.toLowerCase()),h.extensions||[],h.filename,n,v)}static matchFilename(h,n){for(let v of h)if(v.filename&&v.filename.test(n))return v;if(n=/\.([^.]+)$/.exec(n))for(let v of h)if(-1<v.extensions.indexOf(n[1]))return v;
return null}static matchLanguageName(h,n,v=!0){n=n.toLowerCase();for(let y of h)if(y.alias.some(L=>L==n))return y;if(v)for(let y of h)for(let L of y.alias)if(h=n.indexOf(L),-1<h&&(2<L.length||!/\w/.test(n[h-1])&&!/\w/.test(n[h+L.length])))return y;return null}}B.LanguageDescription=Ea;const Ga=J.Facet.define();B.indentService=Ga;const pb=J.Facet.define({combine:h=>{if(!h.length)return"  ";let n=h[0];if(!n||/\S/.test(n)||Array.from(n).some(v=>v!=n[0]))throw Error("Invalid indent unit: "+JSON.stringify(h[0]));
return n}});B.indentUnit=pb;class Da{constructor(h,n={}){this.state=h;this.options=n;this.unit=pa(h)}lineAt(h,n=1){let v=this.state.doc.lineAt(h),{simulateBreak:y,simulateDoubleBreak:L}=this.options;return null!=y&&y>=v.from&&y<=v.to?L&&y==h?{text:"",from:h}:(0>n?y<h:y<=h)?{text:v.text.slice(y-v.from),from:y}:{text:v.text.slice(0,y-v.from),from:v.from}:v}textAfterPos(h,n=1){if(this.options.simulateDoubleBreak&&h==this.options.simulateBreak)return"";let {text:v,from:y}=this.lineAt(h,n);return v.slice(h-
y,Math.min(v.length,h+100-y))}column(h,n=1){let {text:v,from:y}=this.lineAt(h,n);h=this.countColumn(v,h-y);n=this.options.overrideIndentation?this.options.overrideIndentation(y):-1;-1<n&&(h+=n-this.countColumn(v,v.search(/\S|$/)));return h}countColumn(h,n=h.length){return(0,J.countColumn)(h,this.state.tabSize,n)}lineIndent(h,n=1){let {text:v,from:y}=this.lineAt(h,n);if(h=this.options.overrideIndentation)if(h=h(y),-1<h)return h;return this.countColumn(v,v.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||
null}}B.IndentContext=Da;const Ab=new D.NodeProp;B.indentNodeProp=Ab;class Ya extends Da{constructor(h,n,v){super(h.state,h.options);this.base=h;this.pos=n;this.node=v}static create(h,n,v){return new Ya(h,n,v)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(h){let n=this.state.doc.lineAt(h.from);for(;;){let y=h.resolve(n.from);for(;y.parent&&y.parent.from==y.from;)y=y.parent;var v;a:{for(v=h;v;v=v.parent)if(y==v){v=!0;break a}v=
!1}if(v)break;n=this.state.doc.lineAt(y.from)}return this.lineIndent(n.from)}continue(){let h=this.node.parent;return h?za(h,this.pos,this.base):0}}B.TreeIndentContext=Ya;B.flatIndent=h=>h.baseIndent;const yb=J.Facet.define();B.foldService=yb;const Rb=new D.NodeProp;B.foldNodeProp=Rb;const Ca=J.StateEffect.define({map:mb});B.foldEffect=Ca;const ra=J.StateEffect.define({map:mb});B.unfoldEffect=ra;const Ra=J.StateField.define({create(){return N.Decoration.none},update(h,n){h=h.map(n.changes);for(let v of n.effects)v.is(Ca)&&
!va(h,v.value.from,v.value.to)?h=h.update({add:[Bb.range(v.value.from,v.value.to)]}):v.is(ra)&&(h=h.update({filter:(y,L)=>v.value.from!=y||v.value.to!=L,filterFrom:v.value.from,filterTo:v.value.to}));if(n.selection){let v=!1,{head:y}=n.selection.main;h.between(y,y,(L,V)=>{L<y&&V>y&&(v=!0)});v&&(h=h.update({filterFrom:y,filterTo:y,filter:(L,V)=>V<=y||L>=y}))}return h},provide:h=>N.EditorView.decorations.from(h),toJSON(h,n){let v=[];h.between(0,n.doc.length,(y,L)=>{v.push(y,L)});return v},fromJSON(h){if(!Array.isArray(h)||
h.length%2)throw new RangeError("Invalid JSON for fold state");let n=[];for(let v=0;v<h.length;){let y=h[v++],L=h[v++];if("number"!=typeof y||"number"!=typeof L)throw new RangeError("Invalid JSON for fold state");n.push(Bb.range(y,L))}return N.Decoration.set(n,!0)}});B.foldState=Ra;const kb=h=>{for(let n of Ia(h)){let v=Pa(h.state,n.from,n.to);if(v)return h.dispatch({effects:qb(h.state,[Ca.of(v),Ta(h,v)])}),!0}return!1};B.foldCode=kb;const ab=h=>{if(!h.state.field(Ra,!1))return!1;let n=[];for(let v of Ia(h)){let y=
wa(h.state,v.from,v.to);y&&n.push(ra.of(y),Ta(h,y,!1))}n.length&&h.dispatch({effects:n});return 0<n.length};B.unfoldCode=ab;const Xa=h=>{let {state:n}=h,v=[];for(var y=0;y<n.doc.length;){y=h.lineBlockAt(y);let L=Pa(n,y.from,y.to);L&&v.push(Ca.of(L));y=(L?h.lineBlockAt(L.to):y).to+1}v.length&&h.dispatch({effects:qb(h.state,v)});return!!v.length};B.foldAll=Xa;const Va=h=>{let n=h.state.field(Ra,!1);if(!n||!n.size)return!1;let v=[];n.between(0,h.state.doc.length,(y,L)=>{v.push(ra.of({from:y,to:L}))});
h.dispatch({effects:v});return!0};B.unfoldAll=Va;B.toggleFold=h=>{let n=[];for(let L of Ia(h)){var v=wa(h.state,L.from,L.to);if(v)n.push(ra.of(v),Ta(h,v,!1));else{a:{v=h;var y=L;for(let V=y;;){let R=Pa(v.state,V.from,V.to);if(R&&R.to>y.from){v=R;break a}if(!V.from){v=null;break a}V=v.lineBlockAt(V.from-1)}}v&&n.push(Ca.of(v),Ta(h,v))}}0<n.length&&h.dispatch({effects:qb(h.state,n)});return!!n.length};B.foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:kb},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ab},
{key:"Ctrl-Alt-[",run:Xa},{key:"Ctrl-Alt-]",run:Va}];const ob={placeholderDOM:null,placeholderText:"â€¦"},Cb=J.Facet.define({combine(h){return(0,J.combineConfig)(h,ob)}}),Bb=N.Decoration.replace({widget:new class extends N.WidgetType{toDOM(h){let {state:n}=h,v=n.facet(Cb),y=V=>{var R=h.lineBlockAt(h.posAtDOM(V.target));(R=wa(h.state,R.from,R.to))&&h.dispatch({effects:ra.of(R)});V.preventDefault()};if(v.placeholderDOM)return v.placeholderDOM(h,y);let L=document.createElement("span");L.textContent=v.placeholderText;
L.setAttribute("aria-label",n.phrase("folded code"));L.title=n.phrase("unfold");L.className="cm-foldPlaceholder";L.onclick=y;return L}}}),fb={openText:"âŒ„",closedText:"â€º",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ib extends N.GutterMarker{constructor(h,n){super();this.config=h;this.open=n}eq(h){return this.config==h.config&&this.open==h.open}toDOM(h){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");n.textContent=this.open?this.config.openText:
this.config.closedText;n.title=h.state.phrase(this.open?"Fold line":"Unfold line");return n}}const wb=N.EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class gb{constructor(h,n){function v(R){let X=la.StyleModule.newName();(y||(y=Object.create(null)))["."+X]=R;return X}this.specs=h;let y;const L="string"==typeof n.all?
n.all:n.all?v(n.all):void 0,V=n.scope;this.scope=V instanceof l?R=>R.prop(ea)==V.data:V?R=>R==V:void 0;this.style=(0,M.tagHighlighter)(h.map(R=>({tag:R.tag,class:R.class||v(Object.assign({},R,{tag:null}))})),{all:L}).style;this.module=y?new la.StyleModule(y):null;this.themeType=n.themeType}static define(h,n){return new gb(h,n||{})}}B.HighlightStyle=gb;const Fb=J.Facet.define(),Hb=J.Facet.define({combine(h){return h.length?[h[0]]:null}});class lb{constructor(h){this.markCache=Object.create(null);this.tree=
Ha(h.state);this.decorations=this.buildDeco(h,Ja(h.state))}update(h){let n=Ha(h.state),v=Ja(h.state),y=v!=Ja(h.startState);if(n.length<h.view.viewport.to&&!y&&n.type==this.tree.type)this.decorations=this.decorations.map(h.changes);else if(n!=this.tree||h.viewportChanged||y)this.tree=n,this.decorations=this.buildDeco(h.view,v)}buildDeco(h,n){if(!n||!this.tree.length)return N.Decoration.none;let v=new J.RangeSetBuilder;for(let {from:y,to:L}of h.visibleRanges)(0,M.highlightTree)(this.tree,n,(V,R,X)=>
{v.add(V,R,this.markCache[X]||(this.markCache[X]=N.Decoration.mark({class:X})))},y,L);return v.finish()}}const xb=J.Prec.high(N.ViewPlugin.fromClass(lb,{decorations:h=>h.decorations})),Nb=gb.define([{tag:M.tags.meta,color:"#404740"},{tag:M.tags.link,textDecoration:"underline"},{tag:M.tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:M.tags.emphasis,fontStyle:"italic"},{tag:M.tags.strong,fontWeight:"bold"},{tag:M.tags.strikethrough,textDecoration:"line-through"},{tag:M.tags.keyword,color:"#708"},
{tag:[M.tags.atom,M.tags.bool,M.tags.url,M.tags.contentSeparator,M.tags.labelName],color:"#219"},{tag:[M.tags.literal,M.tags.inserted],color:"#164"},{tag:[M.tags.string,M.tags.deleted],color:"#a11"},{tag:[M.tags.regexp,M.tags.escape,M.tags.special(M.tags.string)],color:"#e40"},{tag:M.tags.definition(M.tags.variableName),color:"#00f"},{tag:M.tags.local(M.tags.variableName),color:"#30a"},{tag:[M.tags.typeName,M.tags.namespace],color:"#085"},{tag:M.tags.className,color:"#167"},{tag:[M.tags.special(M.tags.variableName),
M.tags.macroName],color:"#256"},{tag:M.tags.definition(M.tags.propertyName),color:"#00c"},{tag:M.tags.comment,color:"#940"},{tag:M.tags.invalid,color:"#f00"}]);B.defaultHighlightStyle=Nb;const Wb=N.EditorView.baseTheme({"\x26.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"\x26.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Db=J.Facet.define({combine(h){return(0,J.combineConfig)(h,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1E4,renderMatch:Za})}}),Qb=N.Decoration.mark({class:"cm-matchingBracket"}),
gc=N.Decoration.mark({class:"cm-nonmatchingBracket"}),ec=[J.StateField.define({create(){return N.Decoration.none},update(h,n){if(!n.docChanged&&!n.selection)return h;h=[];let v=n.state.facet(Db);for(let y of n.state.selection.ranges){if(!y.empty)continue;let L=bb(n.state,y.head,-1,v)||0<y.head&&bb(n.state,y.head-1,1,v)||v.afterCursor&&(bb(n.state,y.head,1,v)||y.head<n.state.doc.length&&bb(n.state,y.head+1,-1,v));L&&(h=h.concat(v.renderMatch(L,n.state)))}return N.Decoration.set(h,!0)},provide:h=>N.EditorView.decorations.from(h)}),
Wb],Sb=new D.NodeProp;B.bracketMatchingHandle=Sb;class d{constructor(h,n,v,y){this.string=h;this.tabSize=n;this.indentUnit=v;this.overrideIndent=y;this.lastColumnValue=this.lastColumnPos=this.start=this.pos=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(h){let n=this.string.charAt(this.pos);if("string"==typeof h?n==h:n&&(h instanceof RegExp?h.test(n):
h(n)))return++this.pos,n}eatWhile(h){let n=this.pos;for(;this.eat(h););return this.pos>n}eatSpace(){let h=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>h}skipToEnd(){this.pos=this.string.length}skipTo(h){h=this.string.indexOf(h,this.pos);if(-1<h)return this.pos=h,!0}backUp(h){this.pos-=h}column(){this.lastColumnPos<this.start&&(this.lastColumnValue=ca(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);
return this.lastColumnValue}indentation(){var h;return null!==(h=this.overrideIndent)&&void 0!==h?h:ca(this.string,null,this.tabSize)}match(h,n,v){if("string"==typeof h){var y=this.string.substr(this.pos,h.length);y=v?y.toLowerCase():y;v=v?h.toLowerCase():h;return y==v?(!1!==n&&(this.pos+=h.length),!0):null}if((h=this.string.slice(this.pos).match(h))&&0<h.index)return null;h&&!1!==n&&(this.pos+=h[0].length);return h}current(){return this.string.slice(this.start,this.pos)}}B.StringStream=d;const g=
new WeakMap;class p extends l{constructor(h){let n=Qa(h.languageData),v=ha(h),y,L=new class extends D.Parser{createParse(V,R,X){return new q(y,V,R,X)}};super(n,L,[Ga.of((V,R)=>this.getIndent(V,R))],h.name);this.topNode=C(n);y=this;this.streamParser=v;this.stateAfter=new D.NodeProp({perNode:!0});this.tokenTable=h.tokenTable?new aa(v.tokenTable):na}static define(h){return new p(h)}getIndent(h,n){for(var v=Ha(h.state),y=v.resolve(n);y&&y.type!=this.topNode;)y=y.parent;if(!y)return null;let L=void 0,
{overrideIndentation:V}=h.options;V&&(L=g.get(h.state),null!=L&&L<n-1E4&&(L=void 0));(y=qa(this,v,0,y.from,null!==L&&void 0!==L?L:n))?(v=y.state,y=y.pos+1):(v=this.streamParser.startState(h.unit),y=0);if(1E4<n-y)return null;for(;y<n;){y=h.state.doc.lineAt(y);let X=Math.min(n,y.to);if(y.length){var R=V?V(y.from):-1;for(R=new d(y.text,h.state.tabSize,h.unit,0>R?void 0:R);R.pos<X-y.from;)La(this.streamParser.token,R,v)}else this.streamParser.blankLine(v,h.unit);if(X==n)break;y=y.to+1}n=h.lineAt(n);V&&
null==L&&g.set(h.state,n.from);return this.streamParser.indent(v,/^\s*(.*)/.exec(n.text)[1],h)}get allowsNesting(){return!1}}B.StreamLanguage=p;class q{constructor(h,n,v,y){this.lang=h;this.input=n;this.fragments=v;this.ranges=y;this.stoppedAt=null;this.chunks=[];this.chunkPos=[];this.chunk=[];this.chunkReused=void 0;this.rangeIndex=0;this.to=y[y.length-1].to;n=U.get();y=y[0].from;a:{var L=null===n||void 0===n?void 0:n.state;for(let X of v){v=X.to-(X.openEnd?25:0);v=X.from+(X.openStart?25:0)<=y&&
v>y&&qa(h,X.tree,0-X.offset,y,v);let Na;if(v&&(Na=ya(h,X.tree,y+X.offset,v.pos+X.offset,!1))){h={state:v.state,tree:Na};break a}}h={state:h.streamParser.startState(L?pa(L):4),tree:D.Tree.empty}}let {state:V,tree:R}=h;this.state=V;this.parsedPos=this.chunkStart=y+R.length;for(h=0;h<R.children.length;h++)this.chunks.push(R.children[h]),this.chunkPos.push(R.positions[h]);n&&this.parsedPos<n.viewport.from-1E5&&(this.state=this.lang.streamParser.startState(pa(n.state)),n.skipUntilInView(this.parsedPos,
n.viewport.from),this.parsedPos=n.viewport.from);this.moveRangeIndex()}advance(){let h=U.get(),n=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),v=Math.min(n,this.chunkStart+2048);for(h&&(v=Math.min(v,h.viewport.to));this.parsedPos<v;)this.parseLine(h);this.chunkStart<this.parsedPos&&this.finishChunk();return this.parsedPos>=n?this.finish():h&&this.parsedPos>=h.viewport.to?(h.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(h){this.stoppedAt=h}lineAfter(h){let n=this.input.chunk(h);
if(this.input.lineChunks)"\n"==n&&(n="");else{let v=n.indexOf("\n");-1<v&&(n=n.slice(0,v))}return h+n.length<=this.to?n:n.slice(0,this.to-h)}nextLine(){var h=this.parsedPos;let n=this.lineAfter(h);var v=h+n.length;for(h=this.rangeIndex;;){var y=this.ranges[h].to;if(y>=v)break;n=n.slice(0,y-(v-n.length));h++;if(h==this.ranges.length)break;v=this.ranges[h].from;y=this.lineAfter(v);n+=y;v+=y.length}return{line:n,end:v}}skipGapsTo(h,n,v){for(;;){let L=this.ranges[this.rangeIndex].to;var y=h+n;if(0<v?
L>y:L>=y)break;y=this.ranges[++this.rangeIndex].from;n+=y-L}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(h,n,v,y,L){if(1<this.ranges.length){L=this.skipGapsTo(n,L,1);n+=L;let V=this.chunk.length;L=this.skipGapsTo(v,L,-1);v+=L;y+=this.chunk.length-V}this.chunk.push(h,n,v,y);return L}parseLine(h){let {line:n,end:v}=this.nextLine(),y=0,{streamParser:L}=this.lang;h=new d(n,h?h.state.tabSize:4,h?pa(h.state):2);if(h.eol())L.blankLine(this.state,
h.indentUnit);else for(;!h.eol();){let V=La(L.token,h,this.state);V&&(y=this.emitToken(this.lang.tokenTable.resolve(V),this.parsedPos+h.start,this.parsedPos+h.pos,4,y));if(1E4<h.start)break}this.parsedPos=v;this.moveRangeIndex();this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let h=D.Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:I,topID:0,maxBufferLength:2048,reused:this.chunkReused});h=new D.Tree(h.type,h.children,h.positions,h.length,[[this.lang.stateAfter,
this.lang.streamParser.copyState(this.state)]]);this.chunks.push(h);this.chunkPos.push(this.chunkStart-this.ranges[0].from);this.chunk=[];this.chunkReused=void 0;this.chunkStart=this.parsedPos}finish(){return(new D.Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from)).balance()}}const u=Object.create(null),A=[D.NodeType.none],I=new D.NodeSet(A),P=[],T=Object.create(null);for(let [h,n]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],
["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])T[h]=x(u,n);class aa{constructor(h){this.extra=h;this.table=Object.assign(Object.create(null),T)}resolve(h){return h?this.table[h]||(this.table[h]=x(this.extra,h)):0}}const na=new aa(u)};
shadow$provide[7]=function(K,eb,vb,B){function Qa(){throw Error("setTimeout has not been defined");}function Fa(){throw Error("clearTimeout has not been defined");}function Ha(Ia){if(sa===setTimeout)return setTimeout(Ia,0);if((sa===Qa||!sa)&&setTimeout)return sa=setTimeout,setTimeout(Ia,0);try{return sa(Ia,0)}catch(wa){try{return sa.call(null,Ia,0)}catch(va){return sa.call(this,Ia,0)}}}function Wa(Ia){if(za===clearTimeout)return clearTimeout(Ia);if((za===Fa||!za)&&clearTimeout)return za=clearTimeout,
clearTimeout(Ia);try{return za(Ia)}catch(wa){try{return za.call(null,Ia)}catch(va){return za.call(this,Ia)}}}function $a(){Aa&&Pa&&(Aa=!1,Pa.length?Oa=Pa.concat(Oa):mb=-1,Oa.length&&pa())}function pa(){if(!Aa){var Ia=Ha($a);Aa=!0;for(var wa=Oa.length;wa;){Pa=Oa;for(Oa=[];++mb<wa;)Pa&&Pa[mb].run();mb=-1;wa=Oa.length}Pa=null;Aa=!1;Wa(Ia)}}function xa(Ia,wa){this.fun=Ia;this.array=wa}function oa(){}K=vb.exports={};try{var sa="function"===typeof setTimeout?setTimeout:Qa}catch(Ia){sa=Qa}try{var za="function"===
typeof clearTimeout?clearTimeout:Fa}catch(Ia){za=Fa}var Oa=[],Aa=!1,Pa,mb=-1;K.nextTick=function(Ia){var wa=Array(arguments.length-1);if(1<arguments.length)for(var va=1;va<arguments.length;va++)wa[va-1]=arguments[va];Oa.push(new xa(Ia,wa));1!==Oa.length||Aa||Ha(pa)};xa.prototype.run=function(){this.fun.apply(null,this.array)};K.title="browser";K.browser=!0;K.env={};K.argv=[];K.version="";K.versions={};K.on=oa;K.addListener=oa;K.once=oa;K.off=oa;K.removeListener=oa;K.removeAllListeners=oa;K.emit=oa;
K.prependListener=oa;K.prependOnceListener=oa;K.listeners=function(Ia){return[]};K.binding=function(Ia){throw Error("process.binding is not supported");};K.cwd=function(){return"/"};K.chdir=function(Ia){throw Error("process.chdir is not supported");};K.umask=function(){return 0}};
shadow$provide[8]=function(K,eb,vb,B){function Qa(m,x=Uint16Array){if("string"!=typeof m)return m;let C=null;for(let J=0,N=0;J<m.length;){let M=0;for(;;){var D=m.charCodeAt(J++);let la=!1;if(126==D){M=65535;break}92<=D&&D--;34<=D&&D--;D-=32;46<=D&&(D-=46,la=!0);M+=D;if(la)break;M*=46}C?C[N++]=M:C=new x(M)}return C}function Fa(m,x,C,D,J,N){var M=0;D=1<<D;({dialect:C}=C.p.parser);a:for(;0!=(D&m[M]);){let w=m[M+1];for(var la=M+3;la<w;la+=2)if(0<(m[la+1]&D)){var ja=m[la],ea;if((ea=C.allows(ja))&&!(ea=
-1==x.token.value||x.token.value==ja)){ea=ja;var Ua=J,l=N;let F=Ha(Ua,l,x.token.value);ea=0>F||Ha(Ua,l,ea)<F}if(ea){x.acceptToken(ja);break}}la=x.next;ja=0;M=m[M+2];if(0>x.next&&M>ja&&65535==m[w+3*M-3]&&65535==m[w+3*M-3]){M=m[w+3*M-1];continue a}for(;ja<M;)if(ea=ja+M>>1,Ua=w+ea+(ea<<1),l=m[Ua+1]||65536,la<m[Ua])M=ea;else if(la>=l)ja=ea+1;else{M=m[Ua+2];x.advance();continue a}break}}function Ha(m,x,C){for(let D=x,J;65535!=(J=m[D]);D++)if(J==C)return D-x;return-1}function Wa(m,x,C){let D=m.cursor(sa.IterMode.IncludeAnonymous);
for(D.moveTo(x);;)if(0>C?!D.childBefore(x):!D.childAfter(x))for(;;){if((0>C?D.to<x:D.from>x)&&!D.type.isError)return 0>C?Math.max(0,Math.min(D.to-1,x-25)):Math.min(m.length,Math.max(D.from+1,x+25));if(0>C?D.prevSibling():D.nextSibling())break;if(!D.parent())return 0>C?0:m.length}}function $a(m,x){for(let C=0;C<x.length;C++){let D=x[C];if(D.pos==m.pos&&D.sameState(m)){x[C].score<m.score&&(x[C]=m);return}}x.push(m)}function pa(m,x){return m[x]|m[x+1]<<16}function xa(m){let x=null;for(let C of m)m=C.p.stoppedAt,
(C.pos==C.p.stream.end||null!=m&&C.pos>m)&&C.p.parser.stateFlag(C.state,2)&&(!x||x.score<C.score)&&(x=C);return x}function oa(m){if(m.external){let x=m.extend?1:0;return(C,D)=>m.external(C,D)<<1|x}return m.get}K=eb(7);"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.Stack=B.LocalTokenGroup=B.LRParser=B.InputStream=B.ExternalTokenizer=B.ContextTracker=void 0;var sa=eb(0);class za{constructor(m,x,C,D,J,N,M,la,ja,ea=0,Ua){this.p=m;this.stack=x;this.state=C;this.reducePos=D;this.pos=J;
this.score=N;this.buffer=M;this.bufferBase=la;this.curContext=ja;this.lookAhead=ea;this.parent=Ua}toString(){return`[${this.stack.filter((m,x)=>0==x%3).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(m,x,C=0){let D=m.parser.context;return new za(m,[],x,C,C,0,[],0,D?new Oa(D,D.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(m,x){this.stack.push(this.state,x,this.bufferBase+this.buffer.length);this.state=m}reduce(m){var x,
C=m>>19;let D=m&65535,{parser:J}=this.p;var N=J.dynamicPrecedence(D);N&&(this.score+=N);if(0==C)this.pushState(J.getGoto(this.state,D,!0),this.reducePos),D<J.minRepeatTerm&&this.storeNode(D,this.reducePos,this.reducePos,4,!0),this.reduceContext(D,this.reducePos);else{N=(C=this.stack.length-3*(C-1)-(m&262144?6:0))?this.stack[C-2]:this.p.ranges[0].from;var M=this.reducePos-N;2E3<=M&&(null===(x=this.p.parser.nodeSet.types[D])||void 0===x||!x.isAnonymous)&&(N==this.p.lastBigReductionStart?(this.p.bigReductionCount++,
this.p.lastBigReductionSize=M):this.p.lastBigReductionSize<M&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=N,this.p.lastBigReductionSize=M));x=this.bufferBase+this.buffer.length-(C?this.stack[C-1]:0);if(D<J.minRepeatTerm||m&131072)M=J.stateFlag(this.state,1)?this.pos:this.reducePos,this.storeNode(D,N,M,x+4,!0);for(this.state=m&262144?this.stack[C]:J.getGoto(this.stack[C-3],D,!0);this.stack.length>C;)this.stack.pop();this.reduceContext(D,N)}}storeNode(m,x,C,D=4,J=!1){if(0==m&&(!this.stack.length||
this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let N=this,M=this.buffer.length;0==M&&N.parent&&(M=N.bufferBase-N.parent.bufferBase,N=N.parent);if(0<M&&0==N.buffer[M-4]&&-1<N.buffer[M-1]){if(x==C)return;if(N.buffer[M-2]>=x){N.buffer[M-2]=C;return}}}if(J&&this.pos!=C){J=this.buffer.length;if(0<J&&0!=this.buffer[J-4])for(;0<J&&this.buffer[J-2]>C;)this.buffer[J]=this.buffer[J-4],this.buffer[J+1]=this.buffer[J-3],this.buffer[J+2]=this.buffer[J-2],this.buffer[J+3]=this.buffer[J-1],
J-=4,4<D&&(D-=4);this.buffer[J]=m;this.buffer[J+1]=x;this.buffer[J+2]=C;this.buffer[J+3]=D}else this.buffer.push(m,x,C,D)}shift(m,x,C){let D=this.pos;if(m&131072)this.pushState(m&65535,this.pos);else if(0==(m&262144)){let {parser:J}=this.p;if(C>this.pos||x<=J.maxNode)this.pos=C,J.stateFlag(m,1)||(this.reducePos=C);this.pushState(m,D);this.shiftContext(x,D);x<=J.maxNode&&this.buffer.push(x,D,C,4)}else this.pos=C,this.shiftContext(x,D),x<=this.p.parser.maxNode&&this.buffer.push(x,D,C,4)}apply(m,x,C){m&
65536?this.reduce(m):this.shift(m,x,C)}useNode(m,x){let C=this.p.reused.length-1;if(0>C||this.p.reused[C]!=m)this.p.reused.push(m),C++;let D=this.pos;this.reducePos=this.pos=D+m.length;this.pushState(x,D);this.buffer.push(C,D,this.reducePos,-1);this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,m,this,this.p.stream.reset(this.pos-m.length)))}split(){let m=this;for(var x=m.buffer.length;0<x&&m.buffer[x-2]>m.reducePos;)x-=4;let C=m.buffer.slice(x);for(x=m.bufferBase+
x;m&&x==m.bufferBase;)m=m.parent;return new za(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,C,x,this.curContext,this.lookAhead,m)}recoverByDelete(m,x){let C=m<=this.p.parser.maxNode;C&&this.storeNode(m,this.pos,x,4);this.storeNode(0,this.pos,x,C?8:4);this.pos=this.reducePos=x;this.score-=190}canShift(m){for(let x=new Pa(this);;){let C=this.p.parser.stateSlot(x.state,4)||this.p.parser.hasAction(x.state,m);if(0==C)return!1;if(0==(C&65536))return!0;x.reduce(C)}}recoverByInsert(m){if(300<=
this.stack.length)return[];let x=this.p.parser.nextStates(this.state);if(8<x.length||120<=this.stack.length){var C=[];for(let D=0,J;D<x.length;D+=2)(J=x[D+1])!=this.state&&this.p.parser.hasAction(J,m)&&C.push(x[D],J);if(120>this.stack.length)for(m=0;8>C.length&&m<x.length;m+=2){let D=x[m+1];C.some((J,N)=>N&1&&J==D)||C.push(x[m],D)}x=C}C=[];for(m=0;m<x.length&&4>C.length;m+=2){let D=x[m+1];if(D==this.state)continue;let J=this.split();J.pushState(D,this.pos);J.storeNode(0,J.pos,J.pos,4,!0);J.shiftContext(x[m],
this.pos);J.score-=200;C.push(J)}return C}forceReduce(){var {parser:m}=this.p;let x=m.stateSlot(this.state,5);if(0==(x&65536))return!1;if(!m.validAction(this.state,x)){let C=this.stack.length-3*(x>>19);if(0>C||0>m.getGoto(this.stack[C],x&65535,!1)){m=this.findForcedReduction();if(null==m)return!1;x=m}this.storeNode(0,this.reducePos,this.reducePos,4,!0);this.score-=100}this.reducePos=this.pos;this.reduce(x);return!0}findForcedReduction(){let {parser:m}=this.p,x=[],C=(D,J)=>{if(!x.includes(D))return x.push(D),
m.allActions(D,N=>{if(!(N&393216))if(N&65536){var M=(N>>19)-J;if(1<M){N&=65535;let la=this.stack.length-3*M;if(0<=la&&0<=m.getGoto(this.stack[la],N,!1))return M<<19|65536|N}}else if(M=C(N,J+1),null!=M)return M})};return C(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let {parser:m}=this.p;return 65535==m.data[m.stateSlot(this.state,1)]&&!m.stateSlot(this.state,
4)}restart(){this.state=this.stack[0];this.stack.length=0}sameState(m){if(this.state!=m.state||this.stack.length!=m.stack.length)return!1;for(let x=0;x<this.stack.length;x+=3)if(this.stack[x]!=m.stack[x])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(m){return this.p.parser.dialect.flags[m]}shiftContext(m,x){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,m,this,this.p.stream.reset(x)))}reduceContext(m,x){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,
m,this,this.p.stream.reset(x)))}emitContext(){let m=this.buffer.length-1;(0>m||-3!=this.buffer[m])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let m=this.buffer.length-1;(0>m||-4!=this.buffer[m])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(m){m!=this.curContext.context&&(m=new Oa(this.curContext.tracker,m),m.hash!=this.curContext.hash&&this.emitContext(),this.curContext=m)}setLookAhead(m){m>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=
m)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext();0<this.lookAhead&&this.emitLookAhead()}}B.Stack=za;class Oa{constructor(m,x){this.tracker=m;this.context=x;this.hash=m.strict?m.hash(x):0}}var Aa;(function(m){m[m.Insert=200]="Insert";m[m.Delete=190]="Delete";m[m.Reduce=100]="Reduce";m[m.MaxNext=4]="MaxNext";m[m.MaxInsertStackDepth=300]="MaxInsertStackDepth";m[m.DampenInsertStackDepth=120]="DampenInsertStackDepth";m[m.MinBigReduction=2E3]="MinBigReduction"})(Aa||(Aa={}));
class Pa{constructor(m){this.start=m;this.state=m.state;this.stack=m.stack;this.base=this.stack.length}reduce(m){let x=m&65535;m>>=19;0==m?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(m-1);this.state=this.start.p.parser.getGoto(this.stack[this.base-3],x,!0)}}class mb{constructor(m,x,C){this.stack=m;this.pos=x;this.index=C;this.buffer=m.buffer;0==this.index&&this.maybeNext()}static create(m,x=m.bufferBase+m.buffer.length){return new mb(m,
x,x-m.bufferBase)}maybeNext(){let m=this.stack.parent;null!=m&&(this.index=this.stack.bufferBase-m.bufferBase,this.stack=m,this.buffer=m.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4;this.pos-=4;0==this.index&&this.maybeNext()}fork(){return new mb(this.stack,this.pos,this.index)}}class Ia{constructor(){this.extended=this.end=this.value=this.start=
-1;this.context=this.mask=this.lookAhead=0}}const wa=new Ia;class va{constructor(m,x){this.input=m;this.ranges=x;this.chunk="";this.chunkOff=0;this.chunk2="";this.chunk2Pos=0;this.next=-1;this.token=wa;this.rangeIndex=0;this.pos=this.chunkPos=x[0].from;this.range=x[0];this.end=x[x.length-1].to;this.readNext()}resolveOffset(m,x){let C=this.range,D=this.rangeIndex;for(m=this.pos+m;m<C.from;){if(!D)return null;var J=this.ranges[--D];m-=C.from-J.to;C=J}for(;0>x?m>C.to:m>=C.to;){if(D==this.ranges.length-
1)return null;J=this.ranges[++D];m+=J.from-C.to;C=J}return m}clipPos(m){if(m>=this.range.from&&m<this.range.to)return m;for(let x of this.ranges)if(x.to>m)return Math.max(m,x.from);return this.end}peek(m){var x=this.chunkOff+m;if(0<=x&&x<this.chunk.length)m=this.pos+m,x=this.chunk.charCodeAt(x);else{m=this.resolveOffset(m,1);if(null==m)return-1;if(m>=this.chunk2Pos&&m<this.chunk2Pos+this.chunk2.length)x=this.chunk2.charCodeAt(m-this.chunk2Pos);else{x=this.rangeIndex;let C=this.range;for(;C.to<=m;)C=
this.ranges[++x];this.chunk2=this.input.chunk(this.chunk2Pos=m);m+this.chunk2.length>C.to&&(this.chunk2=this.chunk2.slice(0,C.to-m));x=this.chunk2.charCodeAt(0)}}m>=this.token.lookAhead&&(this.token.lookAhead=m+1);return x}acceptToken(m,x=0){x=x?this.resolveOffset(x,-1):this.pos;if(null==x||x<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=m;this.token.end=x}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let {chunk:m,chunkPos:x}=
this;this.chunk=this.chunk2;this.chunkPos=this.chunk2Pos;this.chunk2=m;this.chunk2Pos=x;this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk;this.chunk2Pos=this.chunkPos;let m=this.input.chunk(this.pos);this.chunk=this.pos+m.length>this.range.to?m.slice(0,this.range.to-this.pos):m;this.chunkPos=this.pos;this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(m=
1){for(this.chunkOff+=m;this.pos+m>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();m-=this.range.to-this.pos;this.range=this.ranges[++this.rangeIndex];this.pos=this.range.from}this.pos+=m;this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1);return this.readNext()}setDone(){this.pos=this.chunkPos=this.end;this.range=this.ranges[this.rangeIndex=this.ranges.length-1];this.chunk="";return this.next=-1}reset(m,x){x?(this.token=x,x.start=m,x.lookAhead=m+1,x.value=
x.extended=-1):this.token=wa;if(this.pos!=m){this.pos=m;if(m==this.end)return this.setDone(),this;for(;m<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;m>=this.range.to;)this.range=this.ranges[++this.rangeIndex];m>=this.chunkPos&&m<this.chunkPos+this.chunk.length?this.chunkOff=m-this.chunkPos:(this.chunk="",this.chunkOff=0);this.readNext()}return this}read(m,x){if(m>=this.chunkPos&&x<=this.chunkPos+this.chunk.length)return this.chunk.slice(m-this.chunkPos,x-this.chunkPos);if(m>=this.chunk2Pos&&
x<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(m-this.chunk2Pos,x-this.chunk2Pos);if(m>=this.range.from&&x<=this.range.to)return this.input.read(m,x);let C="";for(let D of this.ranges){if(D.from>=x)break;D.to>m&&(C+=this.input.read(Math.max(D.from,m),Math.min(D.to,x)))}return C}}B.InputStream=va;class qb{constructor(m,x){this.data=m;this.id=x}token(m,x){let {parser:C}=x.p;Fa(this.data,m,x,this.id,C.data,C.tokenPrecTable)}}qb.prototype.contextual=qb.prototype.fallback=qb.prototype.extend=
!1;class Ta{constructor(m,x,C){this.precTable=x;this.elseToken=C;this.data="string"==typeof m?Qa(m):m}token(m,x){let C=m.pos,D=0;for(;;){let J=m.resolveOffset(1,-1);Fa(this.data,m,x,0,this.data,this.precTable);if(-1<m.token.value)break;if(null==this.elseToken)return;if(null==J)break;m.reset(J,m.token);D++}D&&(m.reset(C,m.token),m.acceptToken(this.elseToken,D))}}B.LocalTokenGroup=Ta;Ta.prototype.contextual=qb.prototype.fallback=qb.prototype.extend=!1;class Sa{constructor(m,x={}){this.token=m;this.contextual=
!!x.contextual;this.fallback=!!x.fallback;this.extend=!!x.extend}}B.ExternalTokenizer=Sa;const Ja="undefined"!=typeof K&&K.env&&/\bparse\b/.test(K.env.LOG);let Za=null;var Gb;(function(m){m[m.Margin=25]="Margin"})(Gb||(Gb={}));class Ma{constructor(m,x){this.fragments=m;this.nodeSet=x;this.i=0;this.fragment=null;this.safeTo=this.safeFrom=-1;this.trees=[];this.start=[];this.index=[];this.nextFragment()}nextFragment(){let m=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(m){this.safeFrom=
m.openStart?Wa(m.tree,m.from+m.offset,1)-m.offset:m.from;for(this.safeTo=m.openEnd?Wa(m.tree,m.to+m.offset,-1)-m.offset:m.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(m.tree);this.start.push(-m.offset);this.index.push(0);this.nextStart=this.safeFrom}else this.nextStart=1E9}nodeAt(m){if(m<this.nextStart)return null;for(;this.fragment&&this.safeTo<=m;)this.nextFragment();if(!this.fragment)return null;for(;;){let D=this.trees.length-1;if(0>D)return this.nextFragment(),
null;var x=this.trees[D],C=this.index[D];if(C==x.children.length){this.trees.pop();this.start.pop();this.index.pop();continue}let J=x.children[C];x=this.start[D]+x.positions[C];if(x>m)return this.nextStart=x,null;if(J instanceof sa.Tree){if(x==m){if(x<this.safeFrom)return null;C=x+J.length;if(C<=this.safeTo){let N=J.prop(sa.NodeProp.lookAhead);if(!N||C+N<this.fragment.to)return J}}this.index[D]++;x+J.length>=Math.max(this.safeFrom,m)&&(this.trees.push(J),this.start.push(x),this.index.push(0))}else this.index[D]++,
this.nextStart=x+J.length}}}class bb{constructor(m,x){this.stream=x;this.tokens=[];this.mainToken=null;this.actions=[];this.tokens=m.tokenizers.map(C=>new Ia)}getActions(m){let x=0,C=null;var {parser:D}=m.p;let {tokenizers:J}=D;D=D.stateSlot(m.state,3);let N=m.curContext?m.curContext.hash:0,M=0;for(let la=0;la<J.length;la++){if(0==(1<<la&D))continue;let ja=J[la],ea=this.tokens[la];if(!C||ja.fallback){if(ja.contextual||ea.start!=m.pos||ea.mask!=D||ea.context!=N)this.updateCachedToken(ea,ja,m),ea.mask=
D,ea.context=N;ea.lookAhead>ea.end+25&&(M=Math.max(ea.lookAhead,M));if(0!=ea.value){let Ua=x;-1<ea.extended&&(x=this.addActions(m,ea.extended,ea.end,x));x=this.addActions(m,ea.value,ea.end,x);if(!ja.extend&&(C=ea,x>Ua))break}}}for(;this.actions.length>x;)this.actions.pop();M&&m.setLookAhead(M);C||m.pos!=this.stream.end||(C=new Ia,C.value=m.p.parser.eofTerm,C.start=C.end=m.pos,this.addActions(m,C.value,C.end,x));this.mainToken=C;return this.actions}getMainToken(m){if(this.mainToken)return this.mainToken;
let x=new Ia,{pos:C,p:D}=m;x.start=C;x.end=Math.min(C+1,D.stream.end);x.value=C==D.stream.end?D.parser.eofTerm:0;return x}updateCachedToken(m,x,C){var D=this.stream.clipPos(C.pos);x.token(this.stream.reset(D,m),C);if(-1<m.value)for({parser:x}=C.p,D=0;D<x.specialized.length;D++){if(x.specialized[D]==m.value){let J=x.specializers[D](this.stream.read(m.start,m.end),C);if(0<=J&&C.p.parser.dialect.allows(J>>1)){0==(J&1)?m.value=J>>1:m.extended=J>>1;break}}}else m.value=0,m.end=this.stream.clipPos(D+1)}putAction(m,
x,C,D){for(let J=0;J<D;J+=3)if(this.actions[J]==m)return D;this.actions[D++]=m;this.actions[D++]=x;this.actions[D++]=C;return D}addActions(m,x,C,D){let {state:J}=m;({parser:m}=m.p);let {data:N}=m;for(let M=0;2>M;M++)for(let la=m.stateSlot(J,M?2:1);;la+=3){if(65535==N[la])if(1==N[la+1])la=pa(N,la+2);else{0==D&&2==N[la+1]&&(D=this.putAction(pa(N,la+2),x,C,D));break}N[la]==x&&(D=this.putAction(pa(N,la+1),x,C,D))}return D}}var ca;(function(m){m[m.Distance=5]="Distance";m[m.MaxRemainingPerStep=3]="MaxRemainingPerStep";
m[m.MinBufferLengthPrune=500]="MinBufferLengthPrune";m[m.ForceReduceLimit=10]="ForceReduceLimit";m[m.CutDepth=15E3]="CutDepth";m[m.CutTo=9E3]="CutTo";m[m.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount";m[m.MaxStackCount=12]="MaxStackCount"})(ca||(ca={}));class ha{constructor(m,x,C,D){this.parser=m;this.input=x;this.ranges=D;this.recovering=0;this.nextStackID=9812;this.minStackPos=0;this.reused=[];this.stoppedAt=null;this.lastBigReductionStart=-1;this.bigReductionCount=this.lastBigReductionSize=
0;this.stream=new va(x,D);this.tokens=new bb(m,this.stream);this.topTerm=m.top[1];({from:x}=D[0]);this.stacks=[za.start(this,m.top[0],x)];this.fragments=C.length&&this.stream.end-x>4*m.bufferLength?new Ma(C,m.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){var m=this.stacks;let x=this.minStackPos,C=this.stacks=[];if(300<this.bigReductionCount&&1==m.length){for(var [D]=m;D.forceReduce()&&D.stack.length&&D.stack[D.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=
this.lastBigReductionSize=0}for(D=0;D<m.length;D++)for(var J=m[D];;){this.tokens.mainToken=null;if(J.pos>x)C.push(J);else if(this.advanceStack(J,C,m))continue;else{if(!N){var N=[];var M=[]}N.push(J);J=this.tokens.getMainToken(J);M.push(J.value,J.end)}break}if(!C.length){if(m=N&&xa(N))return this.stackToTree(m);if(this.parser.strict)throw Ja&&N&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+x);this.recovering||
(this.recovering=5)}if(this.recovering&&N&&(N=null!=this.stoppedAt&&N[0].pos>this.stoppedAt?N[0]:this.runRecovery(N,M,C)))return this.stackToTree(N.forceAll());if(this.recovering){N=1==this.recovering?1:3*this.recovering;if(C.length>N)for(C.sort((la,ja)=>ja.score-la.score);C.length>N;)C.pop();C.some(la=>la.reducePos>x)&&this.recovering--}else if(1<C.length){a:for(N=0;N<C.length-1;N++)for(M=C[N],m=N+1;m<C.length;m++)if(D=C[m],M.sameState(D)||500<M.buffer.length&&500<D.buffer.length)if(0<(M.score-D.score||
M.buffer.length-D.buffer.length))C.splice(m--,1);else{C.splice(N--,1);continue a}12<C.length&&C.splice(12,C.length-12)}this.minStackPos=C[0].pos;for(N=1;N<C.length;N++)C[N].pos<this.minStackPos&&(this.minStackPos=C[N].pos);return null}stopAt(m){if(null!=this.stoppedAt&&this.stoppedAt<m)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=m}advanceStack(m,x,C){let D=m.pos,{parser:J}=this,N=Ja?this.stackID(m)+" -\x3e ":"";if(null!=this.stoppedAt&&D>this.stoppedAt)return m.forceReduce()?
m:null;if(this.fragments){var M=m.curContext&&m.curContext.tracker.strict,la=M?m.curContext.hash:0;for(var ja=this.fragments.nodeAt(D);ja;){var ea=this.parser.nodeSet.types[ja.type.id]==ja.type?J.getGoto(m.state,ja.type.id):-1;if(-1<ea&&ja.length&&(!M||(ja.prop(sa.NodeProp.contextHash)||0)==la))return m.useNode(ja,ea),Ja&&console.log(N+this.stackID(m)+` (via reuse of ${J.getName(ja.type.id)})`),!0;if(!(ja instanceof sa.Tree)||0==ja.children.length||0<ja.positions[0])break;ea=ja.children[0];if(ea instanceof
sa.Tree&&0==ja.positions[0])ja=ea;else break}}M=J.stateSlot(m.state,4);if(0<M)return m.reduce(M),Ja&&console.log(N+this.stackID(m)+` (via always-reduce ${J.getName(M&65535)})`),!0;if(15E3<=m.stack.length)for(;9E3<m.stack.length&&m.forceReduce(););M=this.tokens.getActions(m);for(la=0;la<M.length;){ja=M[la++];ea=M[la++];let Ua=M[la++],l=la==M.length||!C,w=l?m:m.split();w.apply(ja,ea,Ua);Ja&&console.log(N+this.stackID(w)+` (via ${0==(ja&65536)?"shift":`reduce of ${J.getName(ja&65535)}`} for ${J.getName(ea)} @ ${D}${w==
m?"":", split"})`);if(l)return!0;w.pos>D?x.push(w):C.push(w)}return!1}advanceFully(m,x){let C=m.pos;for(;;){if(!this.advanceStack(m,null,null))return!1;if(m.pos>C)return $a(m,x),!0}}runRecovery(m,x,C){let D=null,J=!1;for(let N=0;N<m.length;N++){let M=m[N],la=x[N<<1],ja=x[(N<<1)+1],ea=Ja?this.stackID(M)+" -\x3e ":"";if(M.deadEnd){if(J)continue;J=!0;M.restart();Ja&&console.log(ea+this.stackID(M)+" (restarted)");if(this.advanceFully(M,C))continue}let Ua=M.split(),l=ea;for(let w=0;Ua.forceReduce()&&10>
w;w++){Ja&&console.log(l+this.stackID(Ua)+" (via force-reduce)");if(this.advanceFully(Ua,C))break;Ja&&(l=this.stackID(Ua)+" -\x3e ")}for(let w of M.recoverByInsert(la))Ja&&console.log(ea+this.stackID(w)+" (via recover-insert)"),this.advanceFully(w,C);if(this.stream.end>M.pos)ja==M.pos&&(ja++,la=0),M.recoverByDelete(la,ja),Ja&&console.log(ea+this.stackID(M)+` (via recover-delete ${this.parser.getName(la)})`),$a(M,C);else if(!D||D.score<M.score)D=M}return D}stackToTree(m){m.close();return sa.Tree.build({buffer:mb.create(m),
nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:m.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(m){let x=(Za||(Za=new WeakMap)).get(m);x||Za.set(m,x=String.fromCodePoint(this.nextStackID++));return x+m}}class ma{constructor(m,x,C){this.source=m;this.flags=x;this.disabled=C}allows(m){return!this.disabled||0==this.disabled[m]}}const qa=m=>m;class ya{constructor(m){this.start=m.start;
this.shift=m.shift||qa;this.reduce=m.reduce||qa;this.reuse=m.reuse||qa;this.hash=m.hash||(()=>0);this.strict=!1!==m.strict}}B.ContextTracker=ya;class La extends sa.Parser{constructor(m){function x(ja,ea,Ua){N[ja].push([ea,ea.deserialize(String(Ua))])}super();this.wrappers=[];if(14!=m.version)throw new RangeError(`Parser version (${m.version}) doesn't match runtime version (${14})`);var C=m.nodeNames.split(" ");this.minRepeatTerm=C.length;for(var D=0;D<m.repeatNodeCount;D++)C.push("");let J=Object.keys(m.topRules).map(ja=>
m.topRules[ja][1]),N=[];for(D=0;D<C.length;D++)N.push([]);if(m.nodeProps)for(let ja of m.nodeProps){D=ja[0];"string"==typeof D&&(D=sa.NodeProp[D]);for(let ea=1;ea<ja.length;){var M=ja[ea++];if(0<=M)x(M,D,ja[ea++]);else{let Ua=ja[ea+-M];for(M=-M;0<M;M--)x(ja[ea++],D,Ua);ea++}}}this.nodeSet=new sa.NodeSet(C.map((ja,ea)=>sa.NodeType.define({name:ea>=this.minRepeatTerm?void 0:ja,id:ea,props:N[ea],top:-1<J.indexOf(ea),error:0==ea,skipped:m.skippedNodes&&-1<m.skippedNodes.indexOf(ea)})));m.propSources&&
(this.nodeSet=this.nodeSet.extend(...m.propSources));this.strict=!1;this.bufferLength=sa.DefaultBufferLength;let la=Qa(m.tokenData);this.context=m.context;this.specializerSpecs=m.specialized||[];this.specialized=new Uint16Array(this.specializerSpecs.length);for(C=0;C<this.specializerSpecs.length;C++)this.specialized[C]=this.specializerSpecs[C].term;this.specializers=this.specializerSpecs.map(oa);this.states=Qa(m.states,Uint32Array);this.data=Qa(m.stateData);this.goto=Qa(m.goto);this.maxTerm=m.maxTerm;
this.tokenizers=m.tokenizers.map(ja=>"number"==typeof ja?new qb(la,ja):ja);this.topRules=m.topRules;this.dialects=m.dialects||{};this.dynamicPrecedences=m.dynamicPrecedences||null;this.tokenPrecTable=m.tokenPrec;this.termNames=m.termNames||null;this.maxNode=this.nodeSet.types.length-1;this.dialect=this.parseDialect();this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(m,x,C){let D=new ha(this,m,x,C);for(let J of this.wrappers)D=J(D,m,x,C);return D}getGoto(m,x,C=!1){let D=this.goto;if(x>=
D[0])return-1;for(x=D[x+1];;){var J=D[x++];let N=J&1,M=D[x++];if(N&&C)return M;for(J=x+(J>>1);x<J;x++)if(D[x]==m)return M;if(N)return-1}}hasAction(m,x){let C=this.data;for(let D=0;2>D;D++)for(let J=this.stateSlot(m,D?2:1),N;;J+=3){if(65535==(N=C[J]))if(1==C[J+1])N=C[J=pa(C,J+2)];else{if(2==C[J+1])return pa(C,J+2);break}if(N==x||0==N)return pa(C,J+1)}return 0}stateSlot(m,x){return this.states[6*m+x]}stateFlag(m,x){return 0<(this.stateSlot(m,0)&x)}validAction(m,x){return!!this.allActions(m,C=>C==x?
!0:null)}allActions(m,x){var C=this.stateSlot(m,4);C=C?x(C):void 0;for(m=this.stateSlot(m,1);null==C;m+=3){if(65535==this.data[m])if(1==this.data[m+1])m=pa(this.data,m+2);else break;C=x(pa(this.data,m+1))}return C}nextStates(m){let x=[];for(m=this.stateSlot(m,1);;m+=3){if(65535==this.data[m])if(1==this.data[m+1])m=pa(this.data,m+2);else break;if(0==(this.data[m+2]&1)){let C=this.data[m+1];x.some((D,J)=>J&1&&D==C)||x.push(this.data[m],C)}}return x}configure(m){let x=Object.assign(Object.create(La.prototype),
this);m.props&&(x.nodeSet=this.nodeSet.extend(...m.props));if(m.top){let C=this.topRules[m.top];if(!C)throw new RangeError(`Invalid top rule name ${m.top}`);x.top=C}m.tokenizers&&(x.tokenizers=this.tokenizers.map(C=>{let D=m.tokenizers.find(J=>J.from==C);return D?D.to:C}));m.specializers&&(x.specializers=this.specializers.slice(),x.specializerSpecs=this.specializerSpecs.map((C,D)=>{var J=m.specializers.find(N=>N.from==C.external);if(!J)return C;J=Object.assign(Object.assign({},C),{external:J.to});
x.specializers[D]=oa(J);return J}));m.contextTracker&&(x.context=m.contextTracker);m.dialect&&(x.dialect=this.parseDialect(m.dialect));null!=m.strict&&(x.strict=m.strict);m.wrap&&(x.wrappers=x.wrappers.concat(m.wrap));null!=m.bufferLength&&(x.bufferLength=m.bufferLength);return x}hasWrappers(){return 0<this.wrappers.length}getName(m){return this.termNames?this.termNames[m]:String(m<=this.maxNode&&this.nodeSet.types[m].name||m)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(m){let x=
this.dynamicPrecedences;return null==x?0:x[m]||0}parseDialect(m){let x=Object.keys(this.dialects),C=x.map(()=>!1);if(m)for(var D of m.split(" ")){var J=x.indexOf(D);0<=J&&(C[J]=!0)}D=null;for(J=0;J<x.length;J++)if(!C[J])for(let N=this.dialects[x[J]],M;65535!=(M=this.data[N++]);)(D||(D=new Uint8Array(this.maxTerm+1)))[M]=1;return new ma(m,C,D)}static deserialize(m){return new La(m)}}B.LRParser=La};
shadow$provide[9]=function(K,eb,vb,B){Object.defineProperty(B,"__esModule",{value:!0});B.props=B.parser=void 0;K=eb(8);var Qa=eb(0),Fa=()=>new Qa.NodeProp({deserialize:xa=>!0});eb=Fa();vb=Fa();const Ha=Fa(),Wa=Fa();Fa=Fa();var $a=Object.freeze({__proto__:null,coll:eb,prefixColl:vb,prefixEdge:Ha,sameEdge:Wa,prefixContainer:Fa});B.props=$a;const pa={__proto__:null,true:136,false:136,nil:138,def:147,defn:147,"defn-":147,defmacro:147,definline:147,defonce:147,deftest:147,defcard:147,ns:155};K=K.LRParser.deserialize({version:14,
states:"-zQ]QPOOP!pOPOOOOQO'#C`'#C`OOQO'#Cb'#CbO]QPO'#CcO]QPO'#CeO]QPO'#CgO]QPO'#CiO]QPO'#CkO]OPO'#CtO]OPO'#CvO!uOQO'#C|OOQO'#Dm'#DmQ]QPOOO$hQPO'#CqO$oQPO'#DUO$vQPO'#DXO$}OSO'#DZO%cOPO'#D]O%hOPO'#D`O%mOPO'#DbO%uOWO'#DdO]QPO'#DgO]QPO'#DhO%zQPO'#DjOOQO'#Dq'#DqP\x26SQPO'#C^POOO)C?e)C?eOOQO,58},58}OOQO,59P,59POOQO,59R,59ROOQO,59T,59TOOQO,59V,59VOOQO,59`,59`OOQO,59b,59bOOQO,59h,59hO'gOPO,59hOOQO-E7k-E7kOOQO'#Cr'#CrO!}QPO'#CsOOQO'#Dv'#DvO'lQPO'#D|O'sQPO'#DuOOQO'#DO'#DOOOQO'#Dz'#DzO'sQPO'#DyOOQO'#DQ'#DQOOQO'#D}'#D}O'lQPO'#D|OOQO'#Dt'#DtO(OQPO,59]O(TQPO,59pOOQO,59p,59pO([QPO,59sOOQO,59s,59sOOQO,59u,59uOOOO,59x,59xOOQO,59y,59yOOQO,5:Q,5:QOOQO,5:T,5:TOOQO,5:V,5:VOOQO,59w,59wOOQO,59z,59zOOQO,59|,59|OOQO,5:O,5:OOOQO,5:R,5:ROOQO,5:S,5:SOOQO,5:U,5:UPOOO,58x,58xOOQO1G/S1G/SOOQO,59_,59_OOQO,59k,59kOOQO,59m,59mOOQO'#Cx'#CxO'sQPO'#CyOOQO'#Dx'#DxO(cQPO,5:aO(jQPO,5:eO(qQPO,5:hOOQO1G.w1G.wOOQO1G/[1G/[OOQO1G/_1G/_OOQO,59e,59eO(xQPO'#CzO*`QPO1G/{O]QPO1G/{OOQO'#Cz'#CzO*gQPO1G0PO*gQPO1G0PO*nQPO7+%gO*uQPO7+%kP\x26SQPO'#CcP\x26SQPO'#CeP\x26SQPO'#CgP\x26SQPO'#CiP\x26SQPO'#CkP*|OPO'#DbP\x26SQPO'#DgP\x26SQPO'#Dh",
stateData:"+[~O!dOSPOSRPQ~OTiOWSOYTO[UO^VO`WOaiObiOd^OiXOkYOoZOw_Oz`O|iO!OaO!TcO!VdO!XeO!fQO!gRO~ORjO~OosOqtO~OT!OOWSOYTO[UO^VO`WOaiObiOd^OiXOkYOoZOw_Oz`O|iO!OaO!TcO!VdO!XeO!fQO!gRO!kvO!o{O~Oc!pP~P!}Ov!UO~P]Oy!WO~P]Od^OoZOz`O!r!YO!t!]O!u!^O~Oz`O~OT!`O~OWSOd^O~O!s!bO~Ow_Oz`O~OTiOW!}OY#OO[#PO^#QO`#ROaiObiOd^OiXOkYOoZOw_Oz`O|iO!OaO!TcO!V#SO!XeO!fQO!gRO~Oo!gO~Oc!pX~P]OT!kOiXOkYO~Oc!qO~Ov!rO~P]Oy!sO~P]Oc!ia~P]Oc!ma~P]Oc!pa~P]OTnXWnXYnX[nX^nX`nXanXbnXc!eXdnXinXknXonXwnXznX|nX!OnX!TnX!VnX!XnX!fnX!gnX~Oc!ii~P]Oc!mi~P]Oc!iq~P]Oc!mq~P]OW!}Od^O~Oa!u!tT!t~",
goto:"/]!rPP!sP!vP!v#nP!vP!vP!vP!vPPPPP$j%i%i%mP%mP\x26n\x26n\x26sP\x26yP'x'x'|'|PP(QPP({P!vP!v)|!v!vP!vP!vP!v!v!v*t!v+nP,fPPP-^PP.j.m.pP.v.m/PP.m/VRkP!kiOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#U!jiOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#UT!ad#S!jiOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#UQ![aT!ad#STx^w!UfOSTUVWXY]_`fgy!Q!T!V!n!o!p!v!w!y!z!{!|Sw^wU!lz}!la#Tj!}#O#P#Q#R#T#UV!mz}!lQ!w!nR!z!o!fiOSTUVWXY]^_`fgjwy!Q!T!V!p!v!w!y!z!{!|!}#O#P#Q#R#T#UQ!ZaQ!u!nR!x!oT|^wT!P^w!jiOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#UR!eh!jiOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#UQ!XaQ!_bR!eh!kbOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#U!YgOSTUVWXY]^_`fgwy!Q!T!V!n!o!p!v!w!y!z!{!|a#Uj!}#O#P#Q#R#T#U!khOSTUVWXY]^_`fgjwy!Q!T!V!n!o!p!v!w!y!z!{!|!}#O#P#Q#R#T#UQ]Obu]y!T!V!p!v!y!{!|Qy^Q!T_Q!V`Q!p!QQ!v!nQ!y!oQ!{!wR!|!zt[O]^_`y!Q!T!V!n!o!p!v!w!y!z!{!|SlS!}SmT#OSnU#PSoV#QSpW#RQqXQrYU!cfw#TS!dg#UR!fjR!S^R!R^Qz^R!hwQ!nzQ!o}R!t!lQ}^R!iwQ!Q^R!jw",
nodeNames:"âš  LineComment Discard #_ Boolean Symbol Nil Deref @ Quote ' SyntaxQuote ` Unquote ~ UnquoteSplice ~@ Number Keyword ) ( List DefLike Meta Metadata ^ ReaderMetadata #^ VarName Meta DocString \" String StringContent NS Meta Operator Meta ] [ Vector } { Map Character Set # NamespacedMap KeywordPrefix RegExp Var #' ReaderConditional #? SymbolicValue ## AnonymousFunction Meta TaggedLiteral ReaderTag ConstructorCall ConstructorPrefix Program",maxTerm:83,nodeProps:[[Ha,-14,3,8,10,12,14,16,25,
27,46,48,51,53,55,61,""],[vb,-13,7,9,11,13,15,24,26,45,47,49,50,52,56,""],["openedBy",19,"(",31,'"',38,"[",41,"{"],["closedBy",20,")",31,'"',39,"]",42,"}"],[eb,-3,21,40,43,""],[Fa,-7,23,29,35,37,57,58,60,""],[Wa,31,""]],skippedNodes:[0,1,2,3],repeatNodeCount:1,tokenData:"#6x~R![OX$wX^%n^p$wpq%nqr'grs,Tst,Ytu/Yuv'gvw'gwx6Vxy6jyz6}z{'g{|7b|}%n}!O7b!O!P9t!P!Q)v!Q!R!8[!R![!\x3et![!]!Cp!]!^!J]!^!_'g!_!`'g!`!a'g!a!b'g!b!c!Kr!c!}/Y!}#O!LV#O#P!Lj#P#Q#3w#Q#R#4[#R#S/Y#S#T#4o#T#o/Y#o#p#5S#p#q$w#q#r#5g#r#s#5z#s#y$w#y#z%n#z$f$w$f$g%n$g##l/Y##l#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$wQ$|SqQOr$ws#O$w#O#P%Y#P~$wQ%_TqQOr$wrs$ws#O$w#O#P%Y#P~$wR%ujqQ!dPOX$wX^%n^p$wpq%nqr$ws|$w|}%n}#O$w#O#P%Y#P#y$w#y#z%n#z$f$w$f$g%n$g#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$w_'rpqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q!['g![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wZ*PpqQ!sWTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![)v![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$w~,YOo~R,a[!OPqQOr$wst-Vtw$wwx-jx!a$w!a!b-}!b#O$w#O#P%Y#P#Q$w#Q#R.b#R#S.u#S~$wR-^S!XPqQOr$ws#O$w#O#P%Y#P~$wR-qS!TPqQOr$ws#O$w#O#P%Y#P~$wR.US!VPqQOr$ws#O$w#O#P%Y#P~$wR.iSkPqQOr$ws#O$w#O#P%Y#P~$wR.|SRPqQOr$ws#O$w#O#P%Y#P~$w_/epqQ!sW!tSTPOq$wqr'gst)vtu/Yuv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P1i!P!Q'g!Q![/Y![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}/Y!}#O$w#O#P%Y#P#R$w#R#S/Y#S#T$w#T#o/Y#o$g$w$g##l/Y##l~$w_1rpqQ!sWTPOq$wqr)vst)vtu3vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![)v![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!}3v!}#O$w#O#P%Y#P#R$w#R#S3v#S#T$w#T#o3v#o$g$w$g##l3v##l~$w_4RpqQ!sW!uSTPOq$wqr)vst)vtu3vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P1i!P!Q)v!Q![3v![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!}3v!}#O$w#O#P%Y#P#R$w#R#S3v#S#T$w#T#o3v#o$g$w$g##l3v##l~$wR6^SYPqQOr$ws#O$w#O#P%Y#P~$wV6qSdTqQOr$ws#O$w#O#P%Y#P~$wR7UScPqQOr$ws#O$w#O#P%Y#P~$w_7mqqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P9t!P!Q'g!Q!RHO!R![!\x26|![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wZ9}pqQ!sWTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![\x3cR![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$wZ\x3c^tqQ!sWaPTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![\x3cR![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!g)v!g!h\x3en!h!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#X)v#X#Y\x3en#Y#o)v#o$g$w$g##l)v##l~$wZ\x3ewpqQ!sWTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|@{|}$w}!O@{!O!P)v!P!Q)v!Q![CY![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$wZAUpqQ!sWTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![CY![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$wZCerqQ!sWaPTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![CY![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!o)v!o!pEo!p!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$wZEzpqQ!sWaPTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![)v![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#o)v#o$g$w$g##l)v##l~$w_H]yqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!PJ|!P!Q!![!Q![!\x26|![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h!)t!h!o'g!o!p!0{!p!q!0{!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y!)t#Y#l'g#l#m!3^#m#o'g#o$g$w$g##l'g##l~$wZKXvqQ!sWaPTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![J|![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!g)v!g!h\x3en!h!o)v!o!pMo!p!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#X)v#X#Y\x3en#Y#o)v#o$g$w$g##l)v##l~$wZMztqQ!sWaPTPOq$wqr)vst)vtu)vuv)vvw)vwx)vxz$wz{)v{|)v|}$w}!O)v!O!P)v!P!Q)v!Q![)v![!])v!]!^$w!^!_)v!_!`)v!`!a)v!a!b)v!b!c$w!c!g)v!g!h\x3en!h!})v!}#O$w#O#P%Y#P#R$w#R#S)v#S#T$w#T#X)v#X#Y\x3en#Y#o)v#o$g$w$g##l)v##l~$w_!!gpqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!$k![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!$xpqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!$k![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!'ZwqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!PJ|!P!Q!![!Q![!\x26|![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h!)t!h!o'g!o!p!0{!p!q!0{!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y!)t#Y#o'g#o$g$w$g##l'g##l~$w_!*PpqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|!,T|}$w}!O!,T!O!P)v!P!Q'g!Q![!.d![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!,`pqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!.d![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!.qrqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!.d![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!o'g!o!p!0{!p!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!1YpqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q!['g![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w_!3irqQ!sW!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!5s![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!5s!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!5s#Z#o'g#o$g$w$g##l'g##l~$w_!6QrqQ!sWaP!tSTPOq$wqr'gst)vtu'guv'gvw'gwx)vxz$wz{'g{|'g|}$w}!O'g!O!P)v!P!Q'g!Q![!5s![!])v!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!5s!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!5s#Z#o'g#o$g$w$g##l'g##l~$wR!8ceqQaPOr$ws!O$w!O!P!9t!P!Q!\x3dr!Q![!\x3et![!g$w!g!h!:q!h!o$w!o!p!\x3cn!p!q!\x3cn!q#O$w#O#P%Y#P#U$w#U#V!?z#V#X$w#X#Y!:q#Y#c$w#c#d!AS#d#l$w#l#m!BU#m~$wR!9{[qQaPOr$ws!Q$w!Q![!9t![!g$w!g!h!:q!h!o$w!o!p!\x3dR!p#O$w#O#P%Y#P#X$w#X#Y!:q#Y~$wR!:vYqQOr$ws{$w{|!;f|}$w}!O!;f!O!Q$w!Q![!;}![#O$w#O#P%Y#P~$wR!;kUqQOr$ws!Q$w!Q![!;}![#O$w#O#P%Y#P~$wR!\x3cUWqQaPOr$ws!Q$w!Q![!;}![!o$w!o!p!\x3cn!p#O$w#O#P%Y#P~$wR!\x3cuSqQaPOr$ws#O$w#O#P%Y#P~$wR!\x3dYWqQaPOr$ws!g$w!g!h!:q!h#O$w#O#P%Y#P#X$w#X#Y!:q#Y~$wR!\x3dwUqQOr$ws!Q$w!Q![!\x3eZ![#O$w#O#P%Y#P~$wR!\x3ebUqQaPOr$ws!Q$w!Q![!\x3eZ![#O$w#O#P%Y#P~$wR!\x3e{_qQaPOr$ws!O$w!O!P!9t!P!Q!\x3dr!Q![!\x3et![!g$w!g!h!:q!h!o$w!o!p!\x3cn!p!q!\x3cn!q#O$w#O#P%Y#P#X$w#X#Y!:q#Y~$wR!@PVqQOr$ws!Q$w!Q!R!@f!R!S!@f!S#O$w#O#P%Y#P~$wR!@mVqQaPOr$ws!Q$w!Q!R!@f!R!S!@f!S#O$w#O#P%Y#P~$wR!AXUqQOr$ws!Q$w!Q!Y!Ak!Y#O$w#O#P%Y#P~$wR!ArUqQaPOr$ws!Q$w!Q!Y!Ak!Y#O$w#O#P%Y#P~$wR!BZYqQOr$ws!Q$w!Q![!By![!c$w!c!i!By!i#O$w#O#P%Y#P#T$w#T#Z!By#Z~$wR!CQYqQaPOr$ws!Q$w!Q![!By![!c$w!c!i!By!i#O$w#O#P%Y#P#T$w#T#Z!By#Z~$wV!CyobPqQ!rSOq$wqr!Ezst$wtu!Ezuv!Ezvw!Ezwz$wz{!Ez{|!Ez|}$w}!O!Ez!O!P!Ez!P!Q!Ez!Q![$w![!]!HX!]!^$w!^!_!Ez!_!`!Ez!`!a!Ez!a!b!Ez!b!c$w!c!}!Ez!}#O$w#O#P%Y#P#R$w#R#S!Ez#S#T$w#T#o!Ez#o$g$w$g##l!Ez##l~$wV!FTpbPqQ!rSOq$wqr!Ezst!Eztu!Ezuv!Ezvw!Ezwx!Ezxz$wz{!Ez{|!Ez|}$w}!O!Ez!O!P!Ez!P!Q!Ez!Q![!Ez![!]!Ez!]!^$w!^!_!Ez!_!`!Ez!`!a!Ez!a!b!Ez!b!c$w!c!}!Ez!}#O$w#O#P%Y#P#R$w#R#S!Ez#S#T$w#T#o!Ez#o$g$w$g##l!Ez##l~$wV!HbmbPqQ!rSOq$wqr!Ezst$wtu!Ezuv!Ezvw!Ezwz$wz{!Ez{|!Ez|}$w}!O!Ez!O!P!Ez!P!Q!Ez!Q!^$w!^!_!Ez!_!`!Ez!`!a!Ez!a!b!Ez!b!c$w!c!}!Ez!}#O$w#O#P%Y#P#R$w#R#S!Ez#S#T$w#T#o!Ez#o$g$w$g##l!Ez##l~$wR!JdVPPqQOY!J]YZ$wZr!J]rs!Jys#O!J]#O#P!KU#P~!J]P!KOQPPOY!JyZ~!JyR!K]VPPqQOY!J]YZ$wZr!J]rs!J]s#O!J]#O#P!KU#P~!J]R!KySWPqQOr$ws#O$w#O#P%Y#P~$wR!L^SwPqQOr$ws#O$w#O#P%Y#P~$wR!LocqQOY!MzYZ$wZr!Mzrs!Mzs#O!Mz#O#P!N_#P#U!Mz#U#V!Nu#V#Y!Mz#Y#Z#$w#Z#b!Mz#b#c#(b#c#d#*{#d#f!Mz#f#g#,m#g#h#/W#h#i#/q#i#j#0s#j~!MzR!NRS|PqQOr$ws#O$w#O#P%Y#P~$wR!NfT|PqQOr$wrs$ws#O$w#O#P%Y#P~$wR!N|U|PqQOr$ws#O$w#O#P%Y#P#T$w#T#U# `#U~$wR# eUqQOr$ws#O$w#O#P%Y#P#V$w#V#W# w#W~$wR# |UqQOr$ws#O$w#O#P%Y#P#_$w#_#`#!`#`~$wR#!eUqQOr$ws#O$w#O#P%Y#P#g$w#g#h#!w#h~$wR#!|UqQOr$ws#O$w#O#P%Y#P#d$w#d#e##`#e~$wR##eUqQOr$ws#O$w#O#P%Y#P#T$w#T#U##w#U~$wR##|UqQOr$ws#O$w#O#P%Y#P#V$w#V#W#$`#W~$wR#$eUqQOr$ws#O$w#O#P%Y#P#X$w#X#Y!Mz#Y~$wR#%OU|PqQOr$ws#O$w#O#P%Y#P#c$w#c#d#%b#d~$wR#%gUqQOr$ws#O$w#O#P%Y#P#f$w#f#g#%y#g~$wR#\x26OUqQOr$ws#O$w#O#P%Y#P#a$w#a#b#\x26b#b~$wR#\x26gUqQOr$ws#O$w#O#P%Y#P#Y$w#Y#Z#\x26y#Z~$wR#'OUqQOr$ws#O$w#O#P%Y#P#X$w#X#Y#'b#Y~$wR#'gUqQOr$ws#O$w#O#P%Y#P#X$w#X#Y#'y#Y~$wR#(OUqQOr$ws#O$w#O#P%Y#P#W$w#W#X!Mz#X~$wR#(iU|PqQOr$ws#O$w#O#P%Y#P#X$w#X#Y#({#Y~$wR#)QUqQOr$ws#O$w#O#P%Y#P#k$w#k#l#)d#l~$wR#)iUqQOr$ws#O$w#O#P%Y#P#`$w#`#a#){#a~$wR#*QUqQOr$ws#O$w#O#P%Y#P#]$w#]#^#*d#^~$wR#*iUqQOr$ws#O$w#O#P%Y#P#b$w#b#c#$`#c~$wR#+SV|PqQOr$ws!Q$w!Q!U#+i!U!Y#,S!Y#O$w#O#P%Y#P~$wR#+pU|PqQOr$ws!Q$w!Q!Y#,S!Y#O$w#O#P%Y#P~$wR#,ZU|PqQOr$ws!Q$w!Q!Y!Mz!Y#O$w#O#P%Y#P~$wR#,tU|PqQOr$ws#O$w#O#P%Y#P#X$w#X#Y#-W#Y~$wR#-]UqQOr$ws#O$w#O#P%Y#P#h$w#h#i#-o#i~$wR#-tUqQOr$ws#O$w#O#P%Y#P#i$w#i#j#.W#j~$wR#.]UqQOr$ws#O$w#O#P%Y#P#f$w#f#g#.o#g~$wR#.tUqQOr$ws#O$w#O#P%Y#P#b$w#b#c!Mz#c~$wR#/_U|PqQOr$ws#O$w#O#P%Y#P#d$w#d#e##`#e~$wR#/xU|PqQOr$ws#O$w#O#P%Y#P#T$w#T#U#0[#U~$wR#0aUqQOr$ws#O$w#O#P%Y#P#U$w#U#V!Mz#V~$wR#0zY|PqQOr$ws!Q$w!Q![#1j![!c$w!c!i#1j!i#O$w#O#P%Y#P#T$w#T#Z#1j#Z~$wR#1oYqQOr$ws!Q$w!Q![#2_![!c$w!c!i#2_!i#O$w#O#P%Y#P#T$w#T#Z#2_#Z~$wR#2dYqQOr$ws!Q$w!Q![#3S![!c$w!c!i#3S!i#O$w#O#P%Y#P#T$w#T#Z#3S#Z~$wR#3XYqQOr$ws!Q$w!Q![!Mz![!c$w!c!i!Mz!i#O$w#O#P%Y#P#T$w#T#Z!Mz#Z~$wR#4OSvPqQOr$ws#O$w#O#P%Y#P~$wR#4cSiPqQOr$ws#O$w#O#P%Y#P~$wR#4vS[PqQOr$ws#O$w#O#P%Y#P~$wV#5ZSzTqQOr$ws#O$w#O#P%Y#P~$wR#5nSyPqQOr$ws#O$w#O#P%Y#P~$wR#6RU^PqQOr$ws!b$w!b!c#6e!c#O$w#O#P%Y#P~$wR#6lS`PqQOr$ws#O$w#O#P%Y#P~$w",
tokenizers:[0,1,2,3],topRules:{Program:[0,62]},dynamicPrecedences:{22:1,34:2},specialized:[{term:5,get:xa=>pa[xa]||-1}],tokenPrec:466});B.parser=K};
var f,t=function(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"},aa=function(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b},ca=function(a,b){a.sort(b||ba)},ea=function(a){var b=da();const c=Array(a.length);for(let e=0;e<a.length;e++)c[e]={index:e,value:a[e]};const d=b||ba;ca(c,function(e,g){return d(e.value,g.value)||e.index-g.index});for(b=0;b<a.length;b++)a[b]=c[b].value},ba=function(a,b){return a>b?1:a<b?-1:0},ha=function(a,b){null!=a&&this.append.apply(this,
arguments)},u=function(a){return null!=a&&!1!==a},ia=function(a){return a instanceof Array},ja=function(a){return null==a?!0:!1===a?!0:!1},ka=function(a){return null!=a},v=function(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1},w=function(a,b){var c=null==b?null:b.constructor;return Error(["No protocol method ",a," defined for type ",u(u(c)?c.Fb:c)?c.jb:t(b),": ",b].join(""))},la=function(a){var b=a.jb;return u(b)?b:y.g(a)},z=function(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;
return c},na=function(){},oa=function(a){if(null!=a&&null!=a.W)a=a.W(a);else{var b=oa[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=oa._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("ICounted.-count",a);}return a},pa=function(){},qa=function(a){if(null!=a&&null!=a.V)a=a.V(a);else{var b=qa[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=qa._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IEmptyableCollection.-empty",a);}return a},ra=function(a,b){if(null!=
a&&null!=a.U)a=a.U(a,b);else{var c=ra[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ra._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("ICollection.-conj",a);}return a},sa=function(){},ta=function(){},A=function(a){if(null!=a&&null!=a.P)a=a.P(a);else{var b=A[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=A._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("ISeq.-first",a);}return a},D=function(a){if(null!=a&&null!=a.aa)a=a.aa(a);else{var b=D[t(null==
a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=D._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("ISeq.-rest",a);}return a},ua=function(){},va=function(){},wa=function(){},xa=function(a,b){if(null!=a&&null!=a.Pa)a=a.Pa(a,b);else{var c=xa[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=xa._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("IAssociative.-contains-key?",a);}return a},ya=function(a,b,c){if(null!=a&&null!=a.ua)a=a.ua(a,b,c);else{var d=ya[t(null==
a?null:a)];if(null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else if(d=ya._,null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else throw w("IAssociative.-assoc",a);}return a},za=function(){},Aa=function(a){if(null!=a&&null!=a.zb)a=a.key;else{var b=Aa[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Aa._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IMapEntry.-key",a);}return a},Ba=function(a){if(null!=a&&null!=a.Ab)a=a.I;else{var b=Ba[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,
a);else if(b=Ba._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IMapEntry.-val",a);}return a},Ca=function(){},Da=function(a){if(null!=a&&null!=a.vb)a=a.I;else{var b=Da[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Da._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IDeref.-deref",a);}return a},Ea=function(){},Fa=function(a){if(null!=a&&null!=a.O)a=a.O(a);else{var b=Fa[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Fa._,null!=b)a=b.g?b.g(a):b.call(null,
a);else throw w("IMeta.-meta",a);}return a},Ga=function(a,b){if(null!=a&&null!=a.R)a=a.R(a,b);else{var c=Ga[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ga._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("IWithMeta.-with-meta",a);}return a},Ha=function(){},Ia=function(){},Ja=function(a,b){if(null!=a&&null!=a.cb)a=a.cb(a,b,!0);else{var c=Ja[t(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b,!0):c.call(null,a,b,!0);else if(c=Ja._,null!=c)a=c.m?c.m(a,b,!0):c.call(null,a,b,
!0);else throw w("IKVReduce.-kv-reduce",a);}return a},Ka=function(a,b){if(null!=a&&null!=a.N)a=a.N(a,b);else{var c=Ka[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ka._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("IEquiv.-equiv",a);}return a},La=function(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=La[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=La._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IHash.-hash",a);}return a},Ma=function(){},
Na=function(a){if(null!=a&&null!=a.G)a=a.G(a);else{var b=Na[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Na._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("ISeqable.-seq",a);}return a},Oa=function(){},Pa=function(){},Qa=function(){},E=function(a,b){if(null!=a&&null!=a.qb)a=a.qb(a,b);else{var c=E[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=E._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("IWriter.-write",a);}return a},Ra=function(){},Sa=
function(a,b,c){if(null!=a&&null!=a.M)a=a.M(a,b,c);else{var d=Sa[t(null==a?null:a)];if(null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else if(d=Sa._,null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else throw w("IPrintWithWriter.-pr-writer",a);}return a},Ta=function(a){if(null!=a&&null!=a.Ua)a=a.Ua(a);else{var b=Ta[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Ta._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IEditableCollection.-as-transient",a);}return a},Ua=function(a,b){if(null!=
a&&null!=a.Xa)a=a.Xa(a,b);else{var c=Ua[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ua._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("ITransientCollection.-conj!",a);}return a},Va=function(a){if(null!=a&&null!=a.eb)a=a.eb(a);else{var b=Va[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Va._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("ITransientCollection.-persistent!",a);}return a},Wa=function(a,b,c){if(null!=a&&null!=a.Ra)a=a.Ra(a,b,
c);else{var d=Wa[t(null==a?null:a)];if(null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else if(d=Wa._,null!=d)a=d.m?d.m(a,b,c):d.call(null,a,b,c);else throw w("ITransientAssociative.-assoc!",a);}return a},Xa=function(){},Ya=function(a,b){if(null!=a&&null!=a.Qa)a=a.Qa(a,b);else{var c=Ya[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ya._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw w("IComparable.-compare",a);}return a},Za=function(a){if(null!=a&&null!=a.mb)a=a.mb(a);else{var b=
Za[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Za._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IChunk.-drop-first",a);}return a},$a=function(a){if(null!=a&&null!=a.hb)a=a.hb(a);else{var b=$a[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$a._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IChunkedSeq.-chunked-first",a);}return a},ab=function(a){if(null!=a&&null!=a.bb)a=a.bb(a);else{var b=ab[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,
a);else if(b=ab._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IChunkedSeq.-chunked-rest",a);}return a},bb=function(){},cb=function(a){if(null!=a&&null!=a.qa)a=a.qa(a);else{var b=cb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=cb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw w("IIterable.-iterator",a);}return a},db=function(a){this.Hb=a;this.l=1073741824;this.v=0},kb=function(a){var b=new ha;a.M(null,new db(b),new eb(null,5,[fb,!0,gb,!0,hb,!1,ib,!1,jb,null],null));return y.g(b)},
mb=function(a){a=lb(a|0,-862048943);return lb(a<<15|a>>>-15,461845907)},nb=function(a,b){a=(a|0)^(b|0);return lb(a<<13|a>>>-13,5)+-430675100|0},ob=function(a,b){a=(a|0)^b;a=lb(a^a>>>16,-2048144789);a=lb(a^a>>>13,-1028477387);return a^a>>>16},pb=function(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=nb(c,mb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return ob(1===(a.length&1)?b^mb(a.charCodeAt(a.length-1)):b,lb(2,a.length))},sb=function(a){255<qb&&(rb={},qb=0);if(null==a)return 0;
var b=rb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=lb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;rb[a]=b;qb+=1;a=b}return a},tb=function(a){if(null!=a&&(a.l&4194304||F===a.Lb))return a.T(null)^0;if("number"===typeof a){if(isFinite(a))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=sb(a),
a=0===a?a:ob(nb(0,mb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:La(a)^0,a},ub=function(a,b){return a^b+2654435769+(a<<6)+(a>>2)},vb=function(a,b){if(a.ra===b.ra)return 0;var c=ja(a.ns);if(u(c?b.ns:c))return-1;if(u(a.ns)){if(ja(b.ns))return 1;c=ba(a.ns,b.ns);return 0===c?ba(a.name,b.name):c}return ba(a.name,b.name)},wb=function(a,b,c,d,e){this.ns=a;this.name=b;this.ra=c;this.Oa=d;this.pa=e;this.l=2154168321;this.v=4096},xb=function(a){return null!=a?a.v&131072||F===a.Mb?!0:a.v?!1:v(bb,a):
v(bb,a)},I=function(a){if(null==a)return null;if(null!=a&&(a.l&8388608||F===a.Eb))return a.G(null);if(ia(a)||"string"===typeof a)return 0===a.length?null:new H(a,0,null);if(null!=a&&null!=a[yb])return a=(null!==a&&yb in a?a[yb]:void 0).call(a),zb.g?zb.g(a):zb.call(null,a);if(v(Ma,a))return Na(a);throw Error([y.g(a)," is not ISeqable"].join(""));},J=function(a){if(null==a)return null;if(null!=a&&(a.l&64||F===a.Wa))return a.P(null);a=I(a);return null==a?null:A(a)},Ab=function(a){return null!=a?null!=
a&&(a.l&64||F===a.Wa)?a.aa(null):(a=I(a))?a.aa(null):M:M},N=function(a){return null==a?null:null!=a&&(a.l&128||F===a.Va)?a.X():I(Ab(a))},Bb=function(a){this.B=a},Cb=function(a){return new Bb(I(a))},Db=function(a,b){this.value=a;this.rb=b;this.fb=null;this.l=8388672;this.v=0},zb=function(a){var b=a.next();return u(b.done)?null:new Db(b.value,a)},Eb=function(a){var b=0,c=1;for(a=I(a);;)if(null!=a)b+=1,c=lb(31,c)+tb(J(a))|0,a=N(a);else return ob(nb(0,mb(c)),b)},Fb=function(a){var b=0,c=0;for(a=I(a);;)if(null!=
a)b+=1,c=c+tb(J(a))|0,a=N(a);else return ob(nb(0,mb(c)),b)},Gb=function(){this.I=!1;this.l=32768;this.v=0},Hb=function(a){return a instanceof Gb},Ib=function(a){return Da(a)},Jb=function(a,b){var c=a.length;if(0===a.length)return b.F?b.F():b.call(null);for(var d=a[0],e=1;;)if(e<c){var g=a[e];d=b.h?b.h(d,g):b.call(null,d,g);if(Hb(d))return Da(d);e+=1}else return d},Kb=function(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var g=a[c];e=b.h?b.h(e,g):b.call(null,e,g);if(Hb(e))return Da(e);c+=1}else return e},
Lb=function(a,b,c,d){for(var e=a.length;;)if(d<e){var g=a[d];c=b.h?b.h(c,g):b.call(null,c,g);if(Hb(c))return Da(c);d+=1}else return c},Mb=function(a){return null!=a?a.l&2||F===a.ub?!0:a.l?!1:v(na,a):v(na,a)},Nb=function(a){return null!=a?a.l&16||F===a.ob?!0:a.l?!1:v(sa,a):v(sa,a)},R=function(a,b,c){var d=O.g?O.g(a):O.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.h(Ob?Ob(a,c):Pb.call(null,a,c),b))return c;c+=1}else return-1},S=function(a,b,c){var d=O.g?O.g(a):O.call(null,
a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.h(Ob?Ob(a,c):Pb.call(null,a,c),b))return c;--c}else return-1},Qb=function(a,b){this.j=a;this.i=b},H=function(a,b,c){this.j=a;this.i=b;this.meta=c;this.l=166592766;this.v=139264},Rb=function(a){return 0<a.length?new H(a,0,null):null},Sb=function(a){for(;;){var b=N(a);if(null!=b)a=b;else return J(a)}},O=function(a){if(null!=a)if(null!=a&&(a.l&2||F===a.ub))a=a.W(null);else if(ia(a))a=a.length;else if("string"===typeof a)a=a.length;
else if(null!=a&&(a.l&8388608||F===a.Eb))a:{a=I(a);for(var b=0;;){if(Mb(a)){a=b+oa(a);break a}a=N(a);b+=1}}else a=oa(a);else a=0;return a},Tb=function(a,b,c){for(;;){if(null==a)return c;if(0===b)return I(a)?J(a):c;if(Nb(a))return T(a,b,c);if(I(a))a=N(a),--b;else return c}},Pb=function(a){switch(arguments.length){case 2:return Ob(arguments[0],arguments[1]);case 3:return U(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},Ob=function(a,
b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.l&16||F===a.ob))return a.ea(null,b);if(ia(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.l&64||F===a.Wa)||null!=a&&(a.l&16777216||F===a.pb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");if(0===
b){if(I(a)){a=J(a);break a}throw Error("Index out of bounds");}if(Nb(a)){a=T(a,b);break a}if(I(a))a=N(a),--b;else throw Error("Index out of bounds");}return a}if(v(sa,a))return T(a,b);throw Error(["nth not supported on this type ",y.g(la(null==a?null:a.constructor))].join(""));},U=function(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.l&16||F===a.ob))return a.ja(null,b,c);if(ia(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===
typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.l&64||F===a.Wa)||null!=a&&(a.l&16777216||F===a.pb))return 0>b?c:Tb(a,b,c);if(v(sa,a))return T(a,b,c);throw Error(["nth not supported on this type ",y.g(la(null==a?null:a.constructor))].join(""));},Ub=function(a,b){this.s=a;this.meta=b;this.l=393217;this.v=0},Vb=function(a,b){return"function"===typeof a?new Ub(a,b):null==a?null:Ga(a,b)},Wb=function(a){var b=null!=a;return(b?null!=a?a.l&131072||F===a.Bb||(a.l?0:v(Ea,a)):v(Ea,a):b)?Fa(a):
null},Xb=function(a){return null!=a?a.l&16777216||F===a.pb?!0:a.l?!1:v(Oa,a):v(Oa,a)},Yb=function(a){return null==a?!1:null!=a?a.l&1024||F===a.Pb?!0:a.l?!1:v(za,a):v(za,a)},Zb=function(a){return null!=a?a.l&67108864||F===a.Rb?!0:a.l?!1:v(Qa,a):v(Qa,a)},$b=function(a){return null!=a?a.l&16384||F===a.Sb?!0:a.l?!1:v(Ca,a):v(Ca,a)},ac=function(a){return null!=a?a.v&512||F===a.Jb?!0:!1:!1},bc=function(a,b,c,d,e){for(;;){if(0===e)return c;c[d]=a[b];d+=1;--e;b+=1}},cc=function(a){return null==a?!1:null!=
a?a.l&64||F===a.Wa?!0:a.l?!1:v(ta,a):v(ta,a)},dc=function(a){return null==a?!1:!1===a?!1:!0},gc=function(a,b){return null!=a&&(a.l&512||F===a.tb)?a.Pa(null,b):v(wa,a)?xa(a,b):ec.m(a,b,fc)===fc?!1:!0},hc=function(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return ba(a,b);throw Error(["Cannot compare ",y.g(a)," to ",y.g(b)].join(""));}if(null!=a?a.v&2048||F===a.Ta||(a.v?0:v(Xa,a)):v(Xa,a))return Ya(a,b);if("string"!==typeof a&&!ia(a)&&
!0!==a&&!1!==a||(null==a?null:a.constructor)!==(null==b?null:b.constructor))throw Error(["Cannot compare ",y.g(a)," to ",y.g(b)].join(""));return ba(a,b)},ic=function(a,b){var c=O(a),d=O(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=hc(Ob(a,d),Ob(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a},da=function(){return P.h(hc,hc)?hc:function(a,b){var c=hc.h?hc.h(a,b):hc.call(null,a,b);return"number"===typeof c?c:u(c)?-1:u(hc.h?hc.h(b,a):hc.call(null,b,a))?1:0}},kc=function(a){if(I(a)){var b=
jc.g?jc.g(a):jc.call(null,a);ea(b);return Vb(I(b),Wb(a))}return M},nc=function(a,b){var c=I(b);return c?(b=J(c),c=N(c),lc?lc(a,b,c):mc.call(null,a,b,c)):a.F?a.F():a.call(null)},oc=function(a,b,c){for(c=I(c);;)if(c){var d=J(c);b=a.h?a.h(b,d):a.call(null,b,d);if(Hb(b))return Da(b);c=N(c)}else return b},pc=function(a,b){a=cb(a);if(u(a.ga()))for(var c=a.next();;)if(a.ga()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Hb(c))return Da(c)}else return c;else return b.F?b.F():b.call(null)},qc=function(a,
b,c){for(a=cb(a);;)if(a.ga()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Hb(c))return Da(c)}else return c},mc=function(a){switch(arguments.length){case 2:var b=arguments[0],c=arguments[1];return null!=c&&(c.l&524288||F===c.Db)?c.Z(null,b):ia(c)?Jb(c,b):"string"===typeof c?Jb(c,b):v(Ha,c)?rc(c,b):xb(c)?pc(c,b):nc(b,c);case 3:return lc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},lc=function(a,b,c){return null!=c&&(c.l&524288||
F===c.Db)?c.$(null,a,b):ia(c)?Kb(c,a,b):"string"===typeof c?Kb(c,a,b):v(Ha,c)?rc(c,a,b):xb(c)?qc(c,a,b):oc(a,b,c)},sc=function(a,b){return null!=b?Ja(b,a):!0},tc=function(a){return a},uc=function(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)},vc=function(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24},wc=function(a,b){if(Xb(b))if(Mb(a)&&Mb(b)&&O(a)!==O(b))a=!1;else a:for(a=I(a),b=I(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.h(J(a),J(b)))a=
N(a),b=N(b);else{a=!1;break a}}else a=null;return dc(a)},xc=function(a,b,c,d,e){this.meta=a;this.first=b;this.ta=c;this.count=d;this.u=e;this.l=65937646;this.v=8192},yc=function(a){this.meta=a;this.l=65937614;this.v=8192},zc=function(a,b,c,d){this.meta=a;this.first=b;this.ta=c;this.u=d;this.l=65929452;this.v=8192},V=function(a,b){return null==b?new xc(null,a,null,1,null):null!=b&&(b.l&64||F===b.Wa)?new zc(null,a,b,null):new zc(null,a,I(b),null)},Ac=function(a,b){if(a.ka===b.ka)return 0;var c=ja(a.ns);
if(u(c?b.ns:c))return-1;if(u(a.ns)){if(ja(b.ns))return 1;c=ba(a.ns,b.ns);return 0===c?ba(a.name,b.name):c}return ba(a.name,b.name)},W=function(a,b,c,d){this.ns=a;this.name=b;this.ka=c;this.Oa=d;this.l=2153775105;this.v=4096},Bc=function(a){if(null!=a&&(a.v&4096||F===a.Cb))return a.ns;throw Error(["Doesn't support namespace: ",y.g(a)].join(""));},Cc=function(a,b,c){this.meta=a;this.Ya=b;this.B=null;this.u=c;this.l=32374988;this.v=1},Dc=function(a){null!=a.Ya&&(a.B=a.Ya.F?a.Ya.F():a.Ya.call(null),a.Ya=
null);return a.B},Ec=function(a){this.gb=a;this.end=0;this.l=2;this.v=0},Fc=function(a,b,c){this.j=a;this.off=b;this.end=c;this.l=524306;this.v=0},Gc=function(a,b,c,d){this.chunk=a;this.na=b;this.meta=c;this.u=d;this.l=31850732;this.v=1536},Hc=function(a,b){return 0===oa(a)?b:new Gc(a,b,null,null)},Ic=function(a,b){a.add(b)},jc=function(a){var b=[];for(a=I(a);;)if(null!=a)b.push(J(a)),a=N(a);else return b},Jc=function(a,b){if(Mb(b))return O(b);var c=0;for(b=I(b);;)if(null!=b&&c<a)c+=1,b=N(b);else return c},
Kc=function(a,b,c){var d=I(c);if(0===b)return a.F?a.F():a.call(null);c=A(d);var e=D(d);if(1===b)return a.g?a.g(c):a.call(null,c);d=A(e);var g=D(e);if(2===b)return a.h?a.h(c,d):a.call(null,c,d);e=A(g);var h=D(g);if(3===b)return a.m?a.m(c,d,e):a.call(null,c,d,e);g=A(h);var k=D(h);if(4===b)return a.da?a.da(c,d,e,g):a.call(null,c,d,e,g);h=A(k);var l=D(k);if(5===b)return a.sa?a.sa(c,d,e,g,h):a.call(null,c,d,e,g,h);k=A(l);var m=D(l);if(6===b)return a.Ja?a.Ja(c,d,e,g,h,k):a.call(null,c,d,e,g,h,k);l=A(m);
var n=D(m);if(7===b)return a.Ka?a.Ka(c,d,e,g,h,k,l):a.call(null,c,d,e,g,h,k,l);m=A(n);var p=D(n);if(8===b)return a.La?a.La(c,d,e,g,h,k,l,m):a.call(null,c,d,e,g,h,k,l,m);n=A(p);var q=D(p);if(9===b)return a.Ma?a.Ma(c,d,e,g,h,k,l,m,n):a.call(null,c,d,e,g,h,k,l,m,n);p=A(q);var r=D(q);if(10===b)return a.ya?a.ya(c,d,e,g,h,k,l,m,n,p):a.call(null,c,d,e,g,h,k,l,m,n,p);q=A(r);var x=D(r);if(11===b)return a.za?a.za(c,d,e,g,h,k,l,m,n,p,q):a.call(null,c,d,e,g,h,k,l,m,n,p,q);r=A(x);var B=D(x);if(12===b)return a.Aa?
a.Aa(c,d,e,g,h,k,l,m,n,p,q,r):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r);x=A(B);var C=D(B);if(13===b)return a.Ba?a.Ba(c,d,e,g,h,k,l,m,n,p,q,r,x):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x);B=A(C);var G=D(C);if(14===b)return a.Ca?a.Ca(c,d,e,g,h,k,l,m,n,p,q,r,x,B):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B);C=A(G);var K=D(G);if(15===b)return a.Da?a.Da(c,d,e,g,h,k,l,m,n,p,q,r,x,B,C):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C);G=A(K);var Q=D(K);if(16===b)return a.Ea?a.Ea(c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G):a.call(null,
c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G);K=A(Q);var fa=D(Q);if(17===b)return a.Fa?a.Fa(c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K);Q=A(fa);var ma=D(fa);if(18===b)return a.Ga?a.Ga(c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q);fa=A(ma);ma=D(ma);if(19===b)return a.Ha?a.Ha(c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa);var Yd=A(ma);D(ma);if(20===b)return a.Ia?a.Ia(c,d,e,g,h,k,l,m,n,p,q,r,
x,B,C,G,K,Q,fa,Yd):a.call(null,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa,Yd);throw Error("Only up to 20 arguments supported on functions");},Lc=function(a){return null!=a&&(a.l&128||F===a.Va)?a.X():I(Ab(a))},Nc=function(a,b,c){return null==c?a.g?a.g(b):a.call(a,b):Mc(a,b,A(c),Lc(c))},Mc=function(a,b,c,d){return null==d?a.h?a.h(b,c):a.call(a,b,c):Oc(a,b,c,A(d),Lc(d))},Oc=function(a,b,c,d,e){return null==e?a.m?a.m(b,c,d):a.call(a,b,c,d):Pc(a,b,c,d,A(e),Lc(e))},Pc=function(a,b,c,d,e,g){if(null==g)return a.da?
a.da(b,c,d,e):a.call(a,b,c,d,e);var h=A(g),k=N(g);if(null==k)return a.sa?a.sa(b,c,d,e,h):a.call(a,b,c,d,e,h);g=A(k);var l=N(k);if(null==l)return a.Ja?a.Ja(b,c,d,e,h,g):a.call(a,b,c,d,e,h,g);k=A(l);var m=N(l);if(null==m)return a.Ka?a.Ka(b,c,d,e,h,g,k):a.call(a,b,c,d,e,h,g,k);l=A(m);var n=N(m);if(null==n)return a.La?a.La(b,c,d,e,h,g,k,l):a.call(a,b,c,d,e,h,g,k,l);m=A(n);var p=N(n);if(null==p)return a.Ma?a.Ma(b,c,d,e,h,g,k,l,m):a.call(a,b,c,d,e,h,g,k,l,m);n=A(p);var q=N(p);if(null==q)return a.ya?a.ya(b,
c,d,e,h,g,k,l,m,n):a.call(a,b,c,d,e,h,g,k,l,m,n);p=A(q);var r=N(q);if(null==r)return a.za?a.za(b,c,d,e,h,g,k,l,m,n,p):a.call(a,b,c,d,e,h,g,k,l,m,n,p);q=A(r);var x=N(r);if(null==x)return a.Aa?a.Aa(b,c,d,e,h,g,k,l,m,n,p,q):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q);r=A(x);var B=N(x);if(null==B)return a.Ba?a.Ba(b,c,d,e,h,g,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r);x=A(B);var C=N(B);if(null==C)return a.Ca?a.Ca(b,c,d,e,h,g,k,l,m,n,p,q,r,x):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x);B=A(C);var G=N(C);if(null==
G)return a.Da?a.Da(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B);C=A(G);var K=N(G);if(null==K)return a.Ea?a.Ea(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C);G=A(K);var Q=N(K);if(null==Q)return a.Fa?a.Fa(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G);K=A(Q);var fa=N(Q);if(null==fa)return a.Ga?a.Ga(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K);Q=A(fa);var ma=N(fa);if(null==ma)return a.Ha?
a.Ha(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K,Q):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K,Q);fa=A(ma);ma=N(ma);if(null==ma)return a.Ia?a.Ia(b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa):a.call(a,b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa);b=[b,c,d,e,h,g,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa];for(c=ma;;)if(c)b.push(A(c)),c=N(c);else break;return a.apply(a,b)},Uc=function(a){switch(arguments.length){case 2:return Qc(arguments[0],arguments[1]);case 3:return Rc(arguments[0],arguments[1],arguments[2]);case 4:return Sc(arguments[0],
arguments[1],arguments[2],arguments[3]);case 5:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3],g=arguments[4];b.H?(c=V(c,V(d,V(e,g))),d=b.K,g=3+Jc(d-2,g),b=g<=d?Kc(b,g,c):b.H(c)):b=Oc(b,c,d,e,I(g));return b;default:g=[];b=arguments.length;for(c=0;;)if(c<b)g.push(arguments[c]),c+=1;else break;b=arguments[0];c=arguments[1];d=arguments[2];e=arguments[3];var h=arguments[4];g=new H(g.slice(5),0,null);b.H?(g=Tc(g),c=V(c,V(d,V(e,V(h,g)))),d=b.K,g=4+Jc(d-3,g),b=g<=d?Kc(b,g,c):b.H(c)):
b=Pc(b,c,d,e,h,Tc(g));return b}},Qc=function(a,b){if(a.H){var c=a.K,d=Jc(c+1,b);return d<=c?Kc(a,d,b):a.H(b)}b=I(b);return null==b?a.F?a.F():a.call(a):Nc(a,A(b),Lc(b))},Rc=function(a,b,c){if(a.H){b=V(b,c);var d=a.K;c=Jc(d,c)+1;return c<=d?Kc(a,c,b):a.H(b)}return Nc(a,b,I(c))},Sc=function(a,b,c,d){return a.H?(b=V(b,V(c,d)),c=a.K,d=2+Jc(c-1,d),d<=c?Kc(a,d,b):a.H(b)):Mc(a,b,c,I(d))},Vc=function(a){this.Gb=a;this.l=393216;this.v=0},Wc=function(a,b){for(;;){if(null==I(b))return!0;var c=J(b);c=a.g?a.g(c):
a.call(null,c);if(u(c))b=N(b);else return!1}},Yc=function(){var a=Xc;return function(){function b(h,k){return ja(a.h?a.h(h,k):a.call(null,h,k))}function c(h){return ja(a.g?a.g(h):a.call(null,h))}function d(){return ja(a.F?a.F():a.call(null))}var e=null,g=function(){function h(l,m,n){var p=null;if(2<arguments.length){p=0;for(var q=Array(arguments.length-2);p<q.length;)q[p]=arguments[p+2],++p;p=new H(q,0,null)}return k.call(this,l,m,p)}function k(l,m,n){return ja(Sc(a,l,m,n))}h.K=2;h.H=function(l){var m=
J(l);l=N(l);var n=J(l);l=Ab(l);return k(m,n,l)};h.C=k;return h}();e=function(h,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,h);case 2:return b.call(this,h,k);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new H(n,0,null)}return g.C(h,k,m)}throw Error("Invalid arity: "+arguments.length);};e.K=2;e.H=g.H;e.F=d;e.g=c;e.h=b;e.C=g.C;return e}()},Zc=function(a,b){return function(){function c(k,
l,m){return dc(function(){var n=a.g?a.g(k):a.call(null,k);return u(n)?(n=a.g?a.g(l):a.call(null,l),u(n)?(n=a.g?a.g(m):a.call(null,m),u(n)?(n=b.g?b.g(k):b.call(null,k),u(n)?(n=b.g?b.g(l):b.call(null,l),u(n)?b.g?b.g(m):b.call(null,m):n):n):n):n):n}())}function d(k,l){return dc(function(){var m=a.g?a.g(k):a.call(null,k);return u(m)?(m=a.g?a.g(l):a.call(null,l),u(m)?(m=b.g?b.g(k):b.call(null,k),u(m)?b.g?b.g(l):b.call(null,l):m):m):m}())}function e(k){var l=a.g?a.g(k):a.call(null,k);k=u(l)?b.g?b.g(k):
b.call(null,k):l;return dc(k)}var g=null,h=function(){function k(m,n,p,q){var r=null;if(3<arguments.length){r=0;for(var x=Array(arguments.length-3);r<x.length;)x[r]=arguments[r+3],++r;r=new H(x,0,null)}return l.call(this,m,n,p,r)}function l(m,n,p,q){return dc(function(){var r=g.m(m,n,p);return u(r)?Wc(function(x){var B=a.g?a.g(x):a.call(null,x);return u(B)?b.g?b.g(x):b.call(null,x):B},q):r}())}k.K=3;k.H=function(m){var n=J(m);m=N(m);var p=J(m);m=N(m);var q=J(m);m=Ab(m);return l(n,p,q,m)};k.C=l;return k}();
g=function(k,l,m,n){switch(arguments.length){case 0:return!0;case 1:return e.call(this,k);case 2:return d.call(this,k,l);case 3:return c.call(this,k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var q=Array(arguments.length-3);p<q.length;)q[p]=arguments[p+3],++p;p=new H(q,0,null)}return h.C(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};g.K=3;g.H=h.H;g.F=function(){return!0};g.g=e;g.h=d;g.m=c;g.C=h.C;return g}()},$c=function(a,b,c,d,e){this.meta=a;this.f=b;this.kb=c;this.seed=
d;this.next=e;this.l=26083532;this.v=1},ad=function(a,b){return new $c(null,a,null,b,null)},cd=function(a,b){return null!=a?null!=a&&(a.v&4||F===a.Kb)?Ga(Va(lc(Ua,Ta(a),b)),Wb(a)):lc(ra,a,b):lc(bd,a,b)},dd=function(a,b){this.D=a;this.j=b},ed=function(a){return new dd(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])},fd=function(a){a=a.o;return 32>a?0:a-1>>>5<<5},gd=function(a,b,c){for(;;){if(0===
b)return c;var d=ed(a);d.j[0]=c;c=d;b-=5}},hd=function(a,b){if(b>=fd(a))return a.ca;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.j[b>>>a&31];a=d}else return c.j},id=function(a,b){if(0<=b&&b<a.o)b=hd(a,b);else throw a=a.o,Error(["No item ",y.g(b)," in vector of length ",y.g(a)].join(""));return b},jd=function(a,b,c){this.base=this.i=0;this.j=a;this.Ib=b;this.start=0;this.end=c},ld=function(a,b,c,d){return c<d?kd(a,b,Ob(a,c),c+1,d):b.F?b.F():b.call(null)},kd=function(a,b,c,d,e){var g=c;c=d;for(d=
hd(a,d);;)if(c<e){var h=c&31;d=0===h?hd(a,c):d;h=d[h];g=b.h?b.h(g,h):b.call(null,g,h);if(Hb(g))return Da(g);c+=1}else return g},X=function(a,b,c,d,e,g){this.meta=a;this.o=b;this.shift=c;this.root=d;this.ca=e;this.u=g;this.l=167666463;this.v=139268},md=function(a,b,c,d,e){this.ha=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.u=null;this.l=32375020;this.v=1536},pd=function(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new md(b,id(b,c),c,d,null);case 4:return nd(arguments[0],
arguments[1],arguments[2],arguments[3]);case 5:return od(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},nd=function(a,b,c,d){return new md(a,b,c,d,null)},od=function(a,b,c,d,e){return new md(a,b,c,d,e)},qd=function(a,b){return a===b.D?b:new dd(a,z(b.j))},rd=function(a){return new dd({},z(a.j))},sd=function(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,
null,null,null,null,null,null,null,null,null,null,null,null,null,null];bc(a,0,b,0,a.length);return b},td=function(a,b,c,d){this.o=a;this.shift=b;this.root=c;this.ca=d;this.v=88;this.l=275},ud=function(a,b,c){if(a.root.D){if(0<=b&&b<a.o){if(fd(a)<=b)a.ca[b&31]=c;else{var d=function k(g,h){h=qd(a.root.D,h);if(0===g)h.j[b&31]=c;else{var l=b>>>g&31;g=k(g-5,h.j[l]);h.j[l]=g}return h}(a.shift,a.root);a.root=d}return a}if(b===a.o)return a.Xa(null,c);throw Error(["Index ",y.g(b)," out of bounds for TransientVector of length",
y.g(a.o)].join(""));}throw Error("assoc! after persistent!");},vd=function(){this.l=2097152;this.v=0},xd=function(a,b){return dc(Yb(b)&&!Zb(b)?O(a)===O(b)?(null!=a?a.l&1048576||F===a.Nb||(a.l?0:v(Ia,a)):v(Ia,a))?sc(function(c,d,e){return P.h(ec.m(b,d,wd),e)?!0:new Gb},a):Wc(function(c){return P.h(ec.m(b,J(c),wd),J(N(c)))},a):null:null)},yd=function(a){this.B=a},zd=function(a,b){if(b instanceof W)a:{var c=a.length;b=b.ka;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof W&&b===a[d].ka){a=d;break a}d+=
2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof wb)a:for(c=a.length,b=b.ra,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof wb&&b===a[d].ra){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(P.h(b,a[d])){a=d;break a}d+=2}return a},Ad=function(a,b){this.key=a;this.I=b;this.u=null;this.l=
166619935;this.v=0},Bd=function(a){return null!=a?a.l&2048||F===a.Qb?!0:!1:!1},Cd=function(a,b,c){this.j=a;this.i=b;this.pa=c;this.l=32374990;this.v=0},Dd=function(a,b){this.j=a;this.i=0;this.o=b},eb=function(a,b,c,d){this.meta=a;this.o=b;this.j=c;this.u=d;this.l=16647951;this.v=139268},Ed=function(a,b){return a===b?!0:a===b||a instanceof W&&b instanceof W&&a.ka===b.ka?!0:P.h(a,b)},Fd=function(a){for(var b=0,c=0;;)if(b<a.length){var d;a:for(d=0;;)if(d<b){var e=Ed(a[b],a[d]);if(e){d=e;break a}d=2+
d}else{d=!1;break a}c=d?c:c+2;b=2+b}else return c},Gd=function(a,b){var c=a.length-1,d=I(b);b=Array(c+2*O(d));a=bc(a,0,b,0,c);for(b=c;;)if(d){var e=J(d);a[b]=Aa(e);a[b+1]=Ba(e);b=2+c;d=N(d)}else return a},Id=function(a,b){var c=b?Gd(a,cd(Hd,a[a.length-1])):a;a=Fd(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,g=0;;)if(e<d)(function(){for(var h=0;;)if(h<g){var k=Ed(c[e],c[h]);if(k)return k;h=2+h}else return!1})()?(b=g,e=2+e,g=b):(b=function(){for(var h=d-2;;)if(h>=e){if(Ed(c[e],c[h]))return h;h-=
2}else return h}(),a[g]=c[e],a[g+1]=c[b+1],b=2+g,e=2+e,g=b);else break;return new eb(null,a.length/2,a,null)}return new eb(null,c.length/2,c,null)},Jd=function(a,b){this.Sa={};this.len=a;this.j=b;this.l=259;this.v=56},Ld=function(a,b){for(var c=Ta(Kd),d=0;;)if(d<a)c=Wa(c,b[d],b[d+1]),d+=2;else return c},Md=function(){this.I=!1},Nd=function(a,b,c){a=z(a);a[b]=c;return a},Od=function(a,b,c,d){a=a.Na(b);a.j[c]=d;return a},Pd=function(a,b,c){for(var d=a.length,e=0,g=c;;)if(e<d){c=a[e];if(null!=c){var h=
a[e+1];c=b.m?b.m(g,c,h):b.call(null,g,c,h)}else c=a[e+1],c=null!=c?c.$a(b,g):g;if(Hb(c))return c;e+=2;g=c}else return g},Qd=function(a){this.j=a;this.i=0;this.oa=this.ab=null},Rd=function(a,b,c){this.D=a;this.S=b;this.j=c;this.v=131072;this.l=0},Sd=function(a){this.j=a;this.i=0;this.oa=null},Td=function(a,b,c){this.D=a;this.o=b;this.j=c;this.v=131072;this.l=0},Ud=function(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Ed(c,a[d]))return d;d+=2}else return-1},Vd=function(a,b,c,d){this.D=a;this.va=b;this.o=c;
this.j=d;this.v=131072;this.l=0},Zd=function(a){switch(arguments.length){case 6:return Wd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Xd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},Wd=function(a,b,c,d,e,g){var h=tb(b);if(h===d)return new Vd(null,h,2,[b,c,e,g]);var k=new Md;return $d.la(a,h,b,c,k).la(a,d,e,g,k)},Xd=function(a,b,
c,d,e,g,h){var k=tb(c);if(k===e)return new Vd(null,k,2,[c,d,g,h]);var l=new Md;return $d.ma(a,b,k,c,d,l).ma(a,b,e,g,h,l)},ae=function(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.B=d;this.u=e;this.l=32374988;this.v=0},de=function(a){switch(arguments.length){case 1:return be(arguments[0]);case 3:return ce(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},be=function(a){return ce(a,0,null)},ce=function(a,b,c){if(null==c)for(c=a.length;;)if(b<
c){if(null!=a[b])return new ae(null,a,b,null,null);var d=a[b+1];if(u(d)&&(d=d.Za(),u(d)))return new ae(null,a,b+2,d,null);b+=2}else return null;else return new ae(null,a,b,c,null)},ee=function(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.B=d;this.u=e;this.l=32374988;this.v=0},he=function(a){switch(arguments.length){case 1:return fe(arguments[0]);case 3:return ge(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}},fe=function(a){return ge(a,
0,null)},ge=function(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(u(d)&&(d=d.Za(),u(d)))return new ee(null,a,b+1,d,null);b+=1}else return null;else return new ee(null,a,b,c,null)},ie=function(a,b){this.ba=a;this.sb=b;this.lb=!1},je=function(a,b,c,d,e,g){this.meta=a;this.o=b;this.root=c;this.fa=d;this.ba=e;this.u=g;this.l=16123663;this.v=139268},ke=function(a,b,c,d){this.D={};this.root=a;this.count=b;this.fa=c;this.ba=d;this.l=259;this.v=56},le=function(a,b,c){if(a.D){if(null==b)a.ba!==
c&&(a.ba=c),a.fa||(a.count+=1,a.fa=!0);else{var d=new Md;b=(null==a.root?$d:a.root).ma(a.D,0,tb(b),b,c,d);b!==a.root&&(a.root=b);d.I&&(a.count+=1)}return a}throw Error("assoc! after persistent!");},me=function(a,b){this.A=a;this.pa=b;this.l=32374988;this.v=0},ne=function(a){return(a=I(a))?new me(a,null):null},oe=function(a){return Aa(a)},pe=function(a,b){this.A=a;this.pa=b;this.l=32374988;this.v=0},qe=function(a){return(a=I(a))?new pe(a,null):null},re=function(a){return Ba(a)},se=function(a){if(null!=
a&&(a.v&4096||F===a.Cb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",y.g(a)].join(""));},te=function(a,b){return new Cc(null,function(){var c=I(b);if(c){var d=J(c);d=a.g?a.g(d):a.call(null,d);c=u(d)?V(J(c),te(a,Ab(c))):null}else c=null;return c},null)},we=function(a,b,c,d,e,g,h){var k=ue;ue=null==ue?null:ue-1;try{if(null!=ue&&0>ue)return E(a,"#");E(a,c);if(0===jb.g(g))I(h)&&E(a,function(){var r=ve.g(g);return u(r)?r:"..."}());else{if(I(h)){var l=J(h);b.m?b.m(l,
a,g):b.call(null,l,a,g)}for(var m=N(h),n=jb.g(g)-1;;)if(!m||null!=n&&0===n){I(m)&&0===n&&(E(a,d),E(a,function(){var r=ve.g(g);return u(r)?r:"..."}()));break}else{E(a,d);var p=J(m);c=a;h=g;b.m?b.m(p,c,h):b.call(null,p,c,h);var q=N(m);c=n-1;m=q;n=c}}return E(a,e)}finally{ue=k}},xe=function(a,b){b=I(b);for(var c=null,d=0,e=0;;)if(e<d){var g=c.ea(null,e);E(a,g);e+=1}else if(b=I(b))c=b,ac(c)?(b=$a(c),d=ab(c),c=b,g=O(b),b=d,d=g):(g=J(c),E(a,g),b=N(c),c=null,d=0),e=0;else return null},ze=function(a){return['"',
y.g(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return ye[b]})),'"'].join("")},Ae=function(a,b){return(a=dc(ec.h(a,hb)))?(a=null!=b?b.l&131072||F===b.Bb?!0:!1:!1)?null!=Wb(b):a:a},Fe=function(a,b,c){if(null==a)return E(b,"nil");if(Ae(c,a)){E(b,"^");var d=Wb(a);Y.m?Y.m(d,b,c):Y.call(null,d,b,c);E(b," ")}if(a.Fb)return a.Tb(a,b,c);if(null!=a?a.l&2147483648||F===a.Y||(a.l?0:v(Ra,a)):v(Ra,a))return Sa(a,b,c);if(!0===a||!1===a)return E(b,y.g(a));if("number"===typeof a)return E(b,isNaN(a)?"##NaN":
a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":y.g(a));if(null!=a&&a.constructor===Object)return E(b,"#js "),d=Z.h(function(g){var h=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;if("string"===typeof g)if(h=h.exec(g),null!=h&&P.h(h[0],g))if(1===h.length)h=h[0];else if(u(Bd.g?Bd.g(h):Bd.call(null,h)))h=new X(null,2,5,Be,[oe.g?oe.g(h):oe.call(null,h),re.g?re.g(h):re.call(null,h)],null);else if($b(h))h=Vb(h,null);else if(ia(h))b:{var k=h.length;if(32>k)h=new X(null,k,5,Be,h,null);
else for(var l=32,m=(new X(null,32,5,Be,h.slice(0,32),null)).Ua(null);;)if(l<k){var n=l+1;m=Ua(m,h[l]);l=n}else{h=Va(m);break b}}else h=Va(lc(Ua,Ta(Ce),h));else h=null;else throw new TypeError("re-matches must match against a string.");return new Ad(null!=h?De.g(g):g,a[g])},aa(a)),Ee.da?Ee.da(d,Y,b,c):Ee.call(null,d,Y,b,c);if(ia(a))return we(b,Y,"#js ["," ","]",c,a);if("string"===typeof a)return u(gb.g(c))?E(b,ze(a)):E(b,a);if("function"===typeof a){var e=a.name;c=u(function(){var g=null==e;return g?
g:/^[\s\xa0]*$/.test(e)}())?"Function":e;return xe(b,Rb(["#object[",c,u(!1)?[' "',y.g(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(g,h){for(g=y.g(g);;)if(g.length<h)g=["0",g].join("");else return g},xe(b,Rb(['#inst "',c(a.getUTCFullYear(),4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return xe(b,Rb(['#"',a.source,'"']));
if("symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol)return xe(b,Rb(["#object[",a.toString(),"]"]));if(u(function(){var g=null==a?null:a.constructor;return null==g?null:g.jb}()))return xe(b,Rb(["#object[",a.constructor.jb.replace(RegExp("/","g"),"."),"]"]));e=function(){var g=null==a?null:a.constructor;return null==g?null:g.name}();c=u(function(){var g=null==e;return g?g:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?xe(b,Rb(["#object[",c,"]"])):xe(b,Rb(["#object[",
c," ",y.g(a),"]"]))},Y=function(a,b,c){var d=Ge.g(c);return u(d)?(c=He.m(c,Ie,Fe),d.m?d.m(a,b,c):d.call(null,a,b,c)):Fe(a,b,c)},Ke=function(a){return a instanceof wb?Je.h(null,se(a)):De.h(null,se(a))},Le=function(a){if(u(!1)){var b=I(a),c=I(b),d=J(c);N(c);U(d,0,null);U(d,1,null);c=null==a?null:null!=a&&(a.l&4||F===a.wb)?a.V(null):(null!=a?a.l&4||F===a.wb||(a.l?0:v(pa,a)):v(pa,a))?qa(a):null;for(a=null;;){d=a;b=I(b);a=J(b);var e=N(b),g=a;a=U(g,0,null);b=U(g,1,null);if(u(g))if(a instanceof W||a instanceof
wb)if(u(d))if(P.h(d,Bc(a)))c=He.m(c,Ke(a),b),a=d,b=e;else return null;else if(d=Bc(a),u(d))c=He.m(c,Ke(a),b),a=d,b=e;else return null;else return null;else return new X(null,2,5,Be,[d,c],null)}}else return null},Me=function(a,b,c,d,e){return we(d,function(g,h,k){var l=Aa(g);c.m?c.m(l,h,k):c.call(null,l,h,k);E(h," ");g=Ba(g);return c.m?c.m(g,h,k):c.call(null,g,h,k)},[y.g(a),"{"].join(""),", ","}",e,I(b))},Ee=function(a,b,c,d){var e=Yb(a)?Le(a):null,g=U(e,0,null);e=U(e,1,null);return u(g)?Me(["#:",
y.g(g)].join(""),e,b,c,d):Me(null,a,b,c,d)},Re=function(a,b){var c=Ne[a];if(void 0!==c)return c;try{Oe.push(a);var d=Pe[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Pe[a]=d}if(e){delete shadow$provide[a];try{e.call(d,Qe,Re,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var g=b.globals;if(g)for(a=0;a<g.length;a++)window[g[a]]=d.exports}}}finally{Oe.pop()}return d.exports},Se=function(a){return a.parent},Te=function(a){for(var b=
0;;){a=a.parent;if(null==a)return b;b+=1}},Xc=function(a){return a.type.isTop},We=function(a){return a.isTop?!1:u(a.prop(Ue))?!1:u(a.prop(Ve))?!1:"Meta"===a.name?!1:"TaggedLiteral"===a.name?!1:"ConstructorCall"===a.name?!1:!0},Xe=function(a,b,c){a:switch(c){case 1:var d=a.childAfter(b);break a;case -1:d=a.childBefore(b);break a;default:throw Error(["No matching clause: ",y.g(c)].join(""));}return null==d?null:V(d,new Cc(null,function(){var e=Xe;a:switch(c){case 1:var g=d.to;break a;case -1:g=d.from;
break a;default:throw Error(["No matching clause: ",y.g(c)].join(""));}return e(a,g,c)},null))},Ye=function(a,b){return dc(a.from<=b.from&&a.to>=b.to&&Te(a)<Te(b))},Ze=function(a,b){if(a.from===b.from&&a.to===b.to&&Te(a)===Te(b))return null;var c=hc(b.from,a.from);switch(c){case 0:return Ye(b,a)?a.parent:Ye(a,b)?a.firstChild:null;case -1:if(Ye(a,b))return a.lastChild;b=a.parent.childBefore(a.from);return u(b)?b:a.parent;case 1:if(Ye(a,b))return a.firstChild;b=a.parent.childAfter(a.to);return u(b)?
b:a.parent;default:throw Error(["No matching clause: ",y.g(c)].join(""));}},$e=function(a,b){return te(tc,ad(function(c){return Ze(c,b)},a))},af=function(a){var b=a.type.prop(Ve);return u(b)?b:"String"===a.name||"RegExp"===a.name},cf=function(a,b){return bf.syntaxTree(a).resolveInner(b)},df=function(a,b,c){return bf.syntaxTree(a).resolveInner(b,c)},jf=function(a,b,c){c=kc(new X(null,2,5,Be,[b,c],null));b=U(c,0,null);c=U(c,1,null);var d=df(a,b,1),e=df(a,c,-1);a=u(af(d))?d.from:b;b=u(af(e))?e.to:c;
b=lc(function(g,h){var k=U(g,0,null);g=U(g,1,null);return new X(null,2,5,Be,[Ye(h,d)?h.from:k,Ye(h,e)?h.to:g],null)},new X(null,2,5,Be,[a,b],null),Z.h(function(g){var h=g.type;return h.prop(ef)||h.prop(ff)||h.prop(gf)||h.prop(Ue)?g.parent:g},$e(d,e)));a=U(b,0,null);b=U(b,1,null);return hf.EditorSelection.range(a,b)},kf=function(a,b){return u(b.g?b.g(a):b.call(null,a))?a:null},nf=function(a,b){var c=function(){var h=df(a,b,-1);return null==h?null:kf(h,function(k){k=cc(k)?Qc(lf,k):k;k=null!=k?k.to:
void 0;return P.h(b,k)})}(),d=function(){var h=df(a,b,1);return null==h?null:kf(h,function(k){k=cc(k)?Qc(lf,k):k;k=null!=k?k.from:void 0;return P.h(b,k)})}(),e=cf(a,b);var g=kf(c,Zc(ka,function(h){var k;(k=h.type.prop(gf))||(h=h.type,k=!(h.prop(ef)||h.prop(gf)||h.prop(mf)));return k}));return u(g)?g:u(d)?d:u(c)?c:e},of=function(a,b){var c=Sb(te(Zc(Yc(),function(d){return P.C(a,d.to,Rb([b.to]))||P.C(a,d.from,Rb([b.from]))}),ad(Se,b)));return u(c)?c:b};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var Qe=globalThis,pf="closure_uid_"+(1E9*Math.random()>>>0),qf=0;f=ha.prototype;f.xa="";f.set=function(a){this.xa=""+a};f.append=function(a,b,c){this.xa+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.xa+=arguments[d];return this};f.clear=function(){this.xa=""};f.toString=function(){return this.xa};var F={},ue=null,yb="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator",rf=function(){function a(d,e,g){var h=T[t(null==d?null:d)];if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);h=T._;if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);throw w("IIndexed.-nth",d);}function b(d,e){var g=T[t(null==d?null:d)];if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);g=T._;if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);throw w("IIndexed.-nth",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,
d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.m=a;return c}(),T=function T(a){switch(arguments.length){case 2:return T.h(arguments[0],arguments[1]);case 3:return T.m(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};T.h=function(a,b){return null!=a&&null!=a.ea?a.ea(a,b):rf(a,b)};T.m=function(a,b,c){return null!=a&&null!=a.ja?a.ja(a,b,c):rf(a,b,c)};T.K=3;
var tf=function(){function a(d,e,g){var h=sf[t(null==d?null:d)];if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);h=sf._;if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);throw w("ILookup.-lookup",d);}function b(d,e){var g=sf[t(null==d?null:d)];if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);g=sf._;if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);throw w("ILookup.-lookup",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.m=a;return c}(),sf=function sf(a){switch(arguments.length){case 2:return sf.h(arguments[0],arguments[1]);case 3:return sf.m(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};sf.h=function(a,b){return null!=a&&null!=a.ia?a.ia(a,b):tf(a,b)};sf.m=function(a,b,c){return null!=a&&null!=a.J?a.J(a,b,c):tf(a,b,c)};sf.K=3;
var uf=function(){function a(d,e,g){var h=rc[t(null==d?null:d)];if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);h=rc._;if(null!=h)return h.m?h.m(d,e,g):h.call(null,d,e,g);throw w("IReduce.-reduce",d);}function b(d,e){var g=rc[t(null==d?null:d)];if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);g=rc._;if(null!=g)return g.h?g.h(d,e):g.call(null,d,e);throw w("IReduce.-reduce",d);}var c=null;c=function(d,e,g){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,g)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.m=a;return c}(),rc=function rc(a){switch(arguments.length){case 2:return rc.h(arguments[0],arguments[1]);case 3:return rc.m(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};rc.h=function(a,b){return null!=a&&null!=a.Z?a.Z(a,b):uf(a,b)};rc.m=function(a,b,c){return null!=a&&null!=a.$?a.$(a,b,c):uf(a,b,c)};rc.K=3;db.prototype.qb=function(a,b){return this.Hb.append(b)};
var lb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0},rb={},qb=0;f=wb.prototype;f.toString=function(){return this.ra};f.N=function(a,b){return b instanceof wb?this.ra===b.ra:!1};
f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return ec.h?ec.h(a,this):ec.call(null,a,this)};f.h=function(a,b){return ec.m?ec.m(a,this,b):ec.call(null,a,this,b)};f.O=function(){return this.pa};
f.R=function(a,b){return new wb(this.ns,this.name,this.ra,this.Oa,b)};f.T=function(){var a=this.Oa;return null!=a?a:this.Oa=a=ub(pb(this.name),sb(this.ns))};f.M=function(a,b){return E(b,this.ra)};var Je=function Je(a){switch(arguments.length){case 1:return Je.g(arguments[0]);case 2:return Je.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};
Je.g=function(a){for(;;){if(a instanceof wb)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Je.h(null,a):Je.h(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof W)a=a.ka;else throw Error("no conversion to symbol");}};Je.h=function(a,b){var c=null!=a?[y.g(a),"/",y.g(b)].join(""):b;return new wb(a,b,c,null,null)};Je.K=2;
var P=function P(a){switch(arguments.length){case 1:return P.g(arguments[0]);case 2:return P.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return P.C(arguments[0],arguments[1],new H(c.slice(2),0,null))}};P.g=function(){return!0};P.h=function(a,b){return null==a?null==b:a===b||Ka(a,b)};P.C=function(a,b,c){for(;;)if(P.h(a,b))if(N(c))a=b,b=J(c),c=N(c);else return P.h(b,J(c));else return!1};
P.H=function(a){var b=J(a),c=N(a);a=J(c);c=N(c);return this.C(b,a,c)};P.K=2;Bb.prototype.next=function(){if(null!=this.B){var a=J(this.B);this.B=N(this.B);return{value:a,done:!1}}return{value:null,done:!0}};Db.prototype.G=function(){return this};Db.prototype.P=function(){return this.value};Db.prototype.aa=function(){null==this.fb&&(this.fb=zb.g?zb.g(this.rb):zb.call(null,this.rb));return this.fb};var vf=ob(nb(0,mb(1)),0),wf=ob(nb(0,mb(0)),0);na["null"]=!0;oa["null"]=function(){return 0};
Date.prototype.N=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.Ta=F;Date.prototype.Qa=function(a,b){if(b instanceof Date)return ba(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",y.g(this)," to ",y.g(b)].join(""));};Ka.number=function(a,b){return a===b};Ea["function"]=!0;Fa["function"]=function(){return null};La._=function(a){return Object.prototype.hasOwnProperty.call(a,pf)&&a[pf]||(a[pf]=++qf)};Gb.prototype.vb=function(){return this.I};
Qb.prototype.ga=function(){return this.i<this.j.length};Qb.prototype.next=function(){var a=this.j[this.i];this.i+=1;return a};f=H.prototype;f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O.g?O.g(this):O.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.ea=function(a,b){a=b+this.i;if(0<=a&&a<this.j.length)return this.j[a];throw Error("Index out of bounds");};f.ja=function(a,b,c){a=b+this.i;return 0<=a&&a<this.j.length?this.j[a]:c};
f.qa=function(){return new Qb(this.j,this.i)};f.O=function(){return this.meta};f.X=function(){return this.i+1<this.j.length?new H(this.j,this.i+1,null):null};f.W=function(){var a=this.j.length-this.i;return 0>a?0:a};f.T=function(){return Eb(this)};f.N=function(a,b){return wc.h?wc.h(this,b):wc.call(null,this,b)};f.V=function(){return M};f.Z=function(a,b){return Lb(this.j,b,this.j[this.i],this.i+1)};f.$=function(a,b,c){return Lb(this.j,b,c,this.i)};f.P=function(){return this.j[this.i]};
f.aa=function(){return this.i+1<this.j.length?new H(this.j,this.i+1,null):M};f.G=function(){return this.i<this.j.length?this:null};f.R=function(a,b){return b===this.meta?this:new H(this.j,this.i,b)};f.U=function(a,b){return V.h?V.h(b,this):V.call(null,b,this)};H.prototype[yb]=function(){return Cb(this)};Ka._=function(a,b){return a===b};
var bd=function bd(a){switch(arguments.length){case 0:return bd.F();case 1:return bd.g(arguments[0]);case 2:return bd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return bd.C(arguments[0],arguments[1],new H(c.slice(2),0,null))}};bd.F=function(){return Ce};bd.g=function(a){return a};bd.h=function(a,b){return null!=a?ra(a,b):new xc(null,b,null,1,null)};
bd.C=function(a,b,c){for(;;)if(u(c))a=bd.h(a,b),b=J(c),c=N(c);else return bd.h(a,b)};bd.H=function(a){var b=J(a),c=N(a);a=J(c);c=N(c);return this.C(b,a,c)};bd.K=2;var ec=function ec(a){switch(arguments.length){case 2:return ec.h(arguments[0],arguments[1]);case 3:return ec.m(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};
ec.h=function(a,b){return null==a?null:null!=a&&(a.l&256||F===a.yb)?a.ia(null,b):ia(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:v(va,a)?sf(a,b):null};ec.m=function(a,b,c){return null!=a?null!=a&&(a.l&256||F===a.yb)?a.J(null,b,c):ia(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:v(va,a)?sf(a,b,c):c:c};ec.K=3;
var He=function He(a){switch(arguments.length){case 3:return He.m(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return He.C(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};
He.m=function(a,b,c){if(null!=a&&(a.l&512||F===a.tb))a=a.ua(null,b,c);else if(null!=a)a=ya(a,b,c);else{a=[b,c];b=a.length;c=1===(b&1);var d;if(!(d=c))a:for(d=0;;)if(d<a.length){var e;b:for(e=0;;)if(e<d){var g=Ed(a[d],a[e]);if(g){e=g;break b}e=2+e}else{e=!1;break b}if(e){d=e;break a}d=2+d}else{d=!1;break a}a=d?Id(a,c):new eb(null,b/2,a,null)}return a};He.C=function(a,b,c,d){for(;;)if(a=He.m(a,b,c),u(d))b=J(d),c=J(N(d)),d=N(N(d));else return a};
He.H=function(a){var b=J(a),c=N(a);a=J(c);var d=N(c);c=J(d);d=N(d);return this.C(b,a,c,d)};He.K=3;f=Ub.prototype;f.O=function(){return this.meta};f.R=function(a,b){return new Ub(this.s,b)};
f.call=function(a){switch(arguments.length-1){case 0:return this.F();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.m(arguments[1],arguments[2],arguments[3]);case 4:return this.da(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ba(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ea(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ga(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ia(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:var b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],g=arguments[5],h=arguments[6],k=arguments[7],l=arguments[8],m=arguments[9],n=arguments[10],p=arguments[11],q=arguments[12],r=arguments[13],x=arguments[14],B=arguments[15],
C=arguments[16],G=arguments[17],K=arguments[18],Q=arguments[19],fa=arguments[20],ma=arguments[21];return Uc.xb?Uc.xb(this.s,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa,ma):Uc.call(null,this.s,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q,fa,ma);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.F=function(){return this.s.F?this.s.F():this.s.call(null)};
f.g=function(a){return this.s.g?this.s.g(a):this.s.call(null,a)};f.h=function(a,b){return this.s.h?this.s.h(a,b):this.s.call(null,a,b)};f.m=function(a,b,c){return this.s.m?this.s.m(a,b,c):this.s.call(null,a,b,c)};f.da=function(a,b,c,d){return this.s.da?this.s.da(a,b,c,d):this.s.call(null,a,b,c,d)};f.sa=function(a,b,c,d,e){return this.s.sa?this.s.sa(a,b,c,d,e):this.s.call(null,a,b,c,d,e)};f.Ja=function(a,b,c,d,e,g){return this.s.Ja?this.s.Ja(a,b,c,d,e,g):this.s.call(null,a,b,c,d,e,g)};
f.Ka=function(a,b,c,d,e,g,h){return this.s.Ka?this.s.Ka(a,b,c,d,e,g,h):this.s.call(null,a,b,c,d,e,g,h)};f.La=function(a,b,c,d,e,g,h,k){return this.s.La?this.s.La(a,b,c,d,e,g,h,k):this.s.call(null,a,b,c,d,e,g,h,k)};f.Ma=function(a,b,c,d,e,g,h,k,l){return this.s.Ma?this.s.Ma(a,b,c,d,e,g,h,k,l):this.s.call(null,a,b,c,d,e,g,h,k,l)};f.ya=function(a,b,c,d,e,g,h,k,l,m){return this.s.ya?this.s.ya(a,b,c,d,e,g,h,k,l,m):this.s.call(null,a,b,c,d,e,g,h,k,l,m)};
f.za=function(a,b,c,d,e,g,h,k,l,m,n){return this.s.za?this.s.za(a,b,c,d,e,g,h,k,l,m,n):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n)};f.Aa=function(a,b,c,d,e,g,h,k,l,m,n,p){return this.s.Aa?this.s.Aa(a,b,c,d,e,g,h,k,l,m,n,p):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p)};f.Ba=function(a,b,c,d,e,g,h,k,l,m,n,p,q){return this.s.Ba?this.s.Ba(a,b,c,d,e,g,h,k,l,m,n,p,q):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q)};
f.Ca=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r){return this.s.Ca?this.s.Ca(a,b,c,d,e,g,h,k,l,m,n,p,q,r):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r)};f.Da=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x){return this.s.Da?this.s.Da(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x)};f.Ea=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B){return this.s.Ea?this.s.Ea(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B)};
f.Fa=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C){return this.s.Fa?this.s.Fa(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C)};f.Ga=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G){return this.s.Ga?this.s.Ga(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G)};
f.Ha=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K){return this.s.Ha?this.s.Ha(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K)};f.Ia=function(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q){return this.s.Ia?this.s.Ia(a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q):this.s.call(null,a,b,c,d,e,g,h,k,l,m,n,p,q,r,x,B,C,G,K,Q)};
var fc={},y=function y(a){switch(arguments.length){case 0:return y.F();case 1:return y.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return y.C(arguments[0],new H(c.slice(1),0,null))}};y.F=function(){return""};y.g=function(a){return null==a?"":[a].join("")};y.C=function(a,b){for(a=new ha(y.g(a));;)if(u(b))a=a.append(y.g(J(b))),b=N(b);else return a.toString()};y.H=function(a){var b=J(a);a=N(a);return this.C(b,a)};y.K=1;f=xc.prototype;
f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){return 1===this.count?null:this.ta};f.W=function(){return this.count};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};
f.V=function(){return Ga(M,this.meta)};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return this.first};f.aa=function(){return 1===this.count?M:this.ta};f.G=function(){return this};f.R=function(a,b){return b===this.meta?this:new xc(b,this.first,this.ta,this.count,this.u)};f.U=function(a,b){return new xc(this.meta,b,this,this.count+1,null)};xc.prototype[yb]=function(){return Cb(this)};f=yc.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){return null};f.W=function(){return 0};f.T=function(){return vf};f.N=function(a,b){return(null!=b?b.l&33554432||F===b.Ob||(b.l?0:v(Pa,b)):v(Pa,b))||Xb(b)?null==I(b):!1};f.V=function(){return this};
f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return null};f.aa=function(){return M};f.G=function(){return null};f.R=function(a,b){return b===this.meta?this:new yc(b)};f.U=function(a,b){return new xc(this.meta,b,null,1,null)};var M=new yc(null);yc.prototype[yb]=function(){return Cb(this)};f=zc.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){return null==this.ta?null:I(this.ta)};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};f.V=function(){return M};
f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return this.first};f.aa=function(){return null==this.ta?M:this.ta};f.G=function(){return this};f.R=function(a,b){return b===this.meta?this:new zc(b,this.first,this.ta,this.u)};f.U=function(a,b){return new zc(null,b,this,null)};zc.prototype[yb]=function(){return Cb(this)};f=W.prototype;f.toString=function(){return[":",y.g(this.ka)].join("")};f.N=function(a,b){return b instanceof W?this.ka===b.ka:!1};
f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return ec.h(a,this)};f.h=function(a,b){return ec.m(a,this,b)};f.T=function(){var a=this.Oa;return null!=a?a:this.Oa=a=ub(pb(this.name),sb(this.ns))+2654435769|0};f.M=function(a,b){return E(b,[":",y.g(this.ka)].join(""))};
var De=function De(a){switch(arguments.length){case 1:return De.g(arguments[0]);case 2:return De.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};De.g=function(a){if(a instanceof W)return a;if(a instanceof wb)return new W(Bc(a),se.g?se.g(a):se.call(null,a),a.ra,null);if(P.h("/",a))return new W(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new W(b[0],b[1],a,null):new W(null,b[0],a,null)}return null};
De.h=function(a,b){a=a instanceof W?se.g?se.g(a):se.call(null,a):a instanceof wb?se.g?se.g(a):se.call(null,a):a;b=b instanceof W?se.g?se.g(b):se.call(null,b):b instanceof wb?se.g?se.g(b):se.call(null,b):b;return new W(a,b,[u(a)?[y.g(a),"/"].join(""):null,y.g(b)].join(""),null)};De.K=2;f=Cc.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){this.G(null);return null==this.B?null:N(this.B)};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};
f.V=function(){return Ga(M,this.meta)};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){this.G(null);return null==this.B?null:J(this.B)};f.aa=function(){this.G(null);return null!=this.B?Ab(this.B):M};f.G=function(){Dc(this);if(null==this.B)return null;for(var a=this.B;;)if(a instanceof Cc)a=Dc(a);else return this.B=a,I(this.B)};f.R=function(a,b){var c=this;return b===this.meta?c:new Cc(b,function(){return c.G(null)},this.u)};
f.U=function(a,b){return V(b,this)};Cc.prototype[yb]=function(){return Cb(this)};Ec.prototype.add=function(a){this.gb[this.end]=a;return this.end+=1};Ec.prototype.chunk=function(){var a=new Fc(this.gb,0,this.end);this.gb=null;return a};Ec.prototype.W=function(){return this.end};f=Fc.prototype;f.W=function(){return this.end-this.off};f.ea=function(a,b){return this.j[this.off+b]};f.ja=function(a,b,c){return 0<=b&&b<this.end-this.off?this.j[this.off+b]:c};
f.mb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new Fc(this.j,this.off+1,this.end)};f.Z=function(a,b){return Lb(this.j,b,this.j[this.off],this.off+1)};f.$=function(a,b,c){return Lb(this.j,b,c,this.off)};f=Gc.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){return 1<oa(this.chunk)?new Gc(Za(this.chunk),this.na,null,null):null==this.na?null:Na(this.na)};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};
f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.P=function(){return T(this.chunk,0)};f.aa=function(){return 1<oa(this.chunk)?new Gc(Za(this.chunk),this.na,null,null):null==this.na?M:this.na};f.G=function(){return this};f.hb=function(){return this.chunk};f.bb=function(){return null==this.na?M:this.na};f.R=function(a,b){return b===this.meta?this:new Gc(this.chunk,this.na,b,this.u)};f.U=function(a,b){return V(b,this)};f.nb=function(){return null==this.na?null:this.na};
Gc.prototype[yb]=function(){return Cb(this)};var Tc=function Tc(a){if(null==a)return null;var c=N(a);return null==c?I(J(a)):V(J(a),Tc.g?Tc.g(c):Tc.call(null,c))};f=Vc.prototype;f.R=function(a,b){return new Vc(b)};f.O=function(){return this.Gb};f.ga=function(){return!1};f.next=function(){return Error("No such element")};f.remove=function(){return Error("Unsupported operation")};
var Z=function Z(a){switch(arguments.length){case 1:return Z.g(arguments[0]);case 2:return Z.h(arguments[0],arguments[1]);case 3:return Z.m(arguments[0],arguments[1],arguments[2]);case 4:return Z.da(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Z.C(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Z.g=function(a){return function(b){return function(){function c(k,l){l=a.g?a.g(l):a.call(null,l);return b.h?b.h(k,l):b.call(null,k,l)}function d(k){return b.g?b.g(k):b.call(null,k)}function e(){return b.F?b.F():b.call(null)}var g=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new H(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=Rc(a,n,p);return b.h?b.h(m,n):b.call(null,m,n)}k.K=2;k.H=function(m){var n=
J(m);m=N(m);var p=J(m);m=Ab(m);return l(n,p,m)};k.C=l;return k}();g=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new H(p,0,null)}return h.C(k,l,n)}throw Error("Invalid arity: "+arguments.length);};g.K=2;g.H=h.H;g.F=e;g.g=d;g.h=c;g.C=h.C;return g}()}};
Z.h=function(a,b){return new Cc(null,function(){var c=I(b);if(c){if(ac(c)){for(var d=$a(c),e=O(d),g=new Ec(Array(e)),h=0;;)if(h<e)Ic(g,function(){var k=T(d,h);return a.g?a.g(k):a.call(null,k)}()),h+=1;else break;return Hc(g.chunk(),Z.h(a,ab(c)))}return V(function(){var k=J(c);return a.g?a.g(k):a.call(null,k)}(),Z.h(a,Ab(c)))}return null},null)};
Z.m=function(a,b,c){return new Cc(null,function(){var d=I(b),e=I(c);if(d&&e){var g=J(d);var h=J(e);g=a.h?a.h(g,h):a.call(null,g,h);d=V(g,Z.m(a,Ab(d),Ab(e)))}else d=null;return d},null)};Z.da=function(a,b,c,d){return new Cc(null,function(){var e=I(b),g=I(c),h=I(d);if(e&&g&&h){var k=J(e);var l=J(g),m=J(h);k=a.m?a.m(k,l,m):a.call(null,k,l,m);e=V(k,Z.da(a,Ab(e),Ab(g),Ab(h)))}else e=null;return e},null)};
Z.C=function(a,b,c,d,e){return Z.h(function(g){return Qc(a,g)},function k(h){return new Cc(null,function(){var l=Z.h(I,h);return Wc(tc,l)?V(Z.h(J,l),k(Z.h(Ab,l))):null},null)}(bd.C(e,d,Rb([c,b]))))};Z.H=function(a){var b=J(a),c=N(a);a=J(c);var d=N(c);c=J(d);var e=N(d);d=J(e);e=N(e);return this.C(b,a,c,d,e)};Z.K=4;var xf={};f=$c.prototype;f.toString=function(){return kb(this)};f.O=function(){return this.meta};f.X=function(){return this.aa(null)};f.V=function(){return M};
f.Z=function(a,b){a=this.P(null);var c=this.f.g?this.f.g(a):this.f.call(null,a);for(a=b.h?b.h(a,c):b.call(null,a,c);;){if(Hb(a))return Da(a);c=this.f.g?this.f.g(c):this.f.call(null,c);a=b.h?b.h(a,c):b.call(null,a,c)}};f.$=function(a,b,c){a=this.P(null);for(c=b.h?b.h(c,a):b.call(null,c,a);;){if(Hb(c))return Da(c);a=this.f.g?this.f.g(a):this.f.call(null,a);c=b.h?b.h(c,a):b.call(null,c,a)}};f.P=function(){xf===this.seed&&(this.seed=this.f.g?this.f.g(this.kb):this.f.call(null,this.kb));return this.seed};
f.aa=function(){null==this.next&&(this.next=new $c(null,this.f,this.P(null),xf,null));return this.next};f.G=function(){return this};f.R=function(a,b){return b===this.meta?this:new $c(b,this.f,this.kb,this.seed,this.next)};f.U=function(a,b){return V(b,this)};
var yf=function yf(a,b,c,d){var g=new dd(c.D,z(c.j)),h=a.o-1>>>b&31;5===b?g.j[h]=d:(c=c.j[h],null!=c?(b-=5,a=yf.da?yf.da(a,b,c,d):yf.call(null,a,b,c,d)):a=gd(null,b-5,d),g.j[h]=a);return g},zf=function zf(a,b,c,d,e){var h=new dd(c.D,z(c.j));if(0===b)h.j[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.j[k];a=zf.sa?zf.sa(a,b,c,d,e):zf.call(null,a,b,c,d,e);h.j[k]=a}return h};jd.prototype.ga=function(){return this.i<this.end};
jd.prototype.next=function(){32===this.i-this.base&&(this.j=hd(this.Ib,this.i),this.base+=32);var a=this.j[this.i&31];this.i+=1;return a};f=X.prototype;f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.ia=function(a,b){return this.J(null,b,null)};f.J=function(a,b,c){return"number"===typeof b?this.ja(null,b,c):c};
f.cb=function(a,b,c){a=0;for(var d=c;;)if(a<this.o){var e=hd(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=g+a,k=e[g];d=b.m?b.m(d,h,k):b.call(null,d,h,k);if(Hb(d)){e=d;break a}g+=1}else{e=d;break a}if(Hb(e))return Da(e);a+=c;d=e}else return d};f.ea=function(a,b){return id(this,b)[b&31]};f.ja=function(a,b,c){return 0<=b&&b<this.o?hd(this,b)[b&31]:c};
f.ib=function(a,b){if(0<=a&&a<this.o){if(fd(this)<=a){var c=z(this.ca);c[a&31]=b;return new X(this.meta,this.o,this.shift,this.root,c,null)}return new X(this.meta,this.o,this.shift,zf(this,this.shift,this.root,a,b),this.ca,null)}if(a===this.o)return this.U(null,b);throw Error(["Index ",y.g(a)," out of bounds  [0,",y.g(this.o),"]"].join(""));};f.qa=function(){var a=this.o;return new jd(0<O(this)?hd(this,0):null,this,a)};f.O=function(){return this.meta};f.W=function(){return this.o};
f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){if(b instanceof X)if(this.o===O(b))for(a=this.qa(null),b=b.qa(null);;)if(a.ga()){var c=a.next(),d=b.next();if(!P.h(c,d))return!1}else return!0;else return!1;else return wc(this,b)};f.Ua=function(){return new td(this.o,this.shift,rd.g?rd.g(this.root):rd.call(null,this.root),sd.g?sd.g(this.ca):sd.call(null,this.ca))};f.V=function(){return Ga(Ce,this.meta)};f.Z=function(a,b){return ld(this,b,0,this.o)};
f.$=function(a,b,c){a=0;for(var d=c;;)if(a<this.o){var e=hd(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=e[g];d=b.h?b.h(d,h):b.call(null,d,h);if(Hb(d)){e=d;break a}g+=1}else{e=d;break a}if(Hb(e))return Da(e);a+=c;d=e}else return d};f.ua=function(a,b,c){if("number"===typeof b)return this.ib(b,c);throw Error("Vector's key for assoc must be a number.");};f.Pa=function(a,b){return"number"!==typeof b||isNaN(b)||Infinity===b||parseFloat(b)!==parseInt(b,10)?!1:0<=b&&b<this.o};
f.G=function(){if(0===this.o)return null;if(32>=this.o)return new H(this.ca,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.j[0];else{a=a.j;break a}}return nd?nd(this,a,0,0):pd.call(null,this,a,0,0)};f.R=function(a,b){return b===this.meta?this:new X(b,this.o,this.shift,this.root,this.ca,this.u)};
f.U=function(a,b){if(32>this.o-fd(this)){a=this.ca.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ca[d],d+=1;else break;c[a]=b;return new X(this.meta,this.o+1,this.shift,this.root,c,null)}a=(c=this.o>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=ed(null),c.j[0]=this.root,d=gd(null,this.shift,new dd(null,this.ca)),c.j[1]=d):c=yf(this,this.shift,this.root,new dd(null,this.ca));return new X(this.meta,this.o+1,a,c,[b],null)};
f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){if("number"===typeof a)return this.ea(null,a);throw Error("Key must be integer");};
var Be=new dd(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Ce=new X(null,0,5,Be,[],vf);X.prototype[yb]=function(){return Cb(this)};f=md.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){if(this.off+1<this.node.length){var a=this.ha;var b=this.node,c=this.i,d=this.off+1;a=nd?nd(a,b,c,d):pd.call(null,a,b,c,d);return null==a?null:a}return this.nb()};
f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.Z=function(a,b){return ld(this.ha,b,this.i+this.off,O(this.ha))};f.$=function(a,b,c){return kd(this.ha,b,c,this.i+this.off,O(this.ha))};f.P=function(){return this.node[this.off]};f.aa=function(){if(this.off+1<this.node.length){var a=this.ha;var b=this.node,c=this.i,d=this.off+1;a=nd?nd(a,b,c,d):pd.call(null,a,b,c,d);return null==a?M:a}return this.bb(null)};f.G=function(){return this};
f.hb=function(){var a=this.node;return new Fc(a,this.off,a.length)};f.bb=function(){var a=this.i+this.node.length;if(a<oa(this.ha)){var b=this.ha,c=hd(this.ha,a);return nd?nd(b,c,a,0):pd.call(null,b,c,a,0)}return M};f.R=function(a,b){return b===this.meta?this:od?od(this.ha,this.node,this.i,this.off,b):pd.call(null,this.ha,this.node,this.i,this.off,b)};f.U=function(a,b){return V(b,this)};
f.nb=function(){var a=this.i+this.node.length;if(a<oa(this.ha)){var b=this.ha,c=hd(this.ha,a);return nd?nd(b,c,a,0):pd.call(null,b,c,a,0)}return null};md.prototype[yb]=function(){return Cb(this)};var Af=function Af(a,b,c,d){c=qd(a.root.D,c);var g=a.o-1>>>b&31;if(5===b)a=d;else{var h=c.j[g];null!=h?(b-=5,a=Af.da?Af.da(a,b,h,d):Af.call(null,a,b,h,d)):a=gd(a.root.D,b-5,d)}c.j[g]=a;return c};f=td.prototype;
f.Xa=function(a,b){if(this.root.D){if(32>this.o-fd(this))this.ca[this.o&31]=b;else{a=new dd(this.root.D,this.ca);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ca=c;this.o>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=gd(this.root.D,this.shift,a),this.root=new dd(this.root.D,b),this.shift=c):this.root=Af(this,this.shift,this.root,a)}this.o+=1;return this}throw Error("conj! after persistent!");};f.eb=function(){if(this.root.D){this.root.D=null;var a=this.o-fd(this),b=Array(a);bc(this.ca,0,b,0,a);return new X(null,this.o,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
f.Ra=function(a,b,c){if("number"===typeof b)return ud(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};f.W=function(){if(this.root.D)return this.o;throw Error("count after persistent!");};f.ea=function(a,b){if(this.root.D)return id(this,b)[b&31];throw Error("nth after persistent!");};f.ja=function(a,b,c){return 0<=b&&b<this.o?this.ea(null,b):c};f.ia=function(a,b){return this.J(null,b,null)};
f.J=function(a,b,c){if(this.root.D)return"number"===typeof b?this.ja(null,b,c):c;throw Error("lookup after persistent!");};f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return this.ia(null,a)};f.h=function(a,b){return this.J(null,a,b)};vd.prototype.N=function(){return!1};
var wd=new vd;yd.prototype.next=function(){if(null!=this.B){var a=J(this.B),b=U(a,0,null);a=U(a,1,null);this.B=N(this.B);return{value:[b,a],done:!1}}return{value:null,done:!0}};f=Ad.prototype;f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.ia=function(a,b){return this.ja(null,b,null)};f.J=function(a,b,c){return this.ja(null,b,c)};f.ea=function(a,b){if(0===b)return this.key;if(1===b)return this.I;throw Error("Index out of bounds");};
f.ja=function(a,b,c){return 0===b?this.key:1===b?this.I:c};f.ib=function(a,b){return(new X(null,2,5,Be,[this.key,this.I],null)).ib(a,b)};f.O=function(){return null};f.W=function(){return 2};f.zb=function(){return this.key};f.Ab=function(){return this.I};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};f.V=function(){return null};
f.Z=function(a,b){a:if(a=this.W(null),0===a)b=b.F?b.F():b.call(null);else for(var c=this.ea(null,0),d=1;;)if(d<a){var e=this.ea(null,d);c=b.h?b.h(c,e):b.call(null,c,e);if(Hb(c)){b=Da(c);break a}d+=1}else{b=c;break a}return b};f.$=function(a,b,c){a:{a=this.W(null);var d=c;for(c=0;;)if(c<a){var e=this.ea(null,c);d=b.h?b.h(d,e):b.call(null,d,e);if(Hb(d)){b=Da(d);break a}c+=1}else{b=d;break a}}return b};f.ua=function(a,b,c){return He.m(new X(null,2,5,Be,[this.key,this.I],null),b,c)};
f.Pa=function(a,b){return 0===b||1===b};f.G=function(){return new H([this.key,this.I],0,null)};f.R=function(a,b){return Vb(new X(null,2,5,Be,[this.key,this.I],null),b)};f.U=function(a,b){return new X(null,3,5,Be,[this.key,this.I,b],null)};f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};
f.g=function(a){return this.ea(null,a)};f.h=function(a,b){return this.ja(null,a,b)};f=Cd.prototype;f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.pa};f.X=function(){return this.i<this.j.length-2?new Cd(this.j,this.i+2,null):null};f.W=function(){return(this.j.length-this.i)/2};f.T=function(){return Eb(this)};f.N=function(a,b){return wc(this,b)};
f.V=function(){return M};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return new Ad(this.j[this.i],this.j[this.i+1])};f.aa=function(){return this.i<this.j.length-2?new Cd(this.j,this.i+2,null):M};f.G=function(){return this};f.R=function(a,b){return b===this.pa?this:new Cd(this.j,this.i,b)};f.U=function(a,b){return V(b,this)};Cd.prototype[yb]=function(){return Cb(this)};Dd.prototype.ga=function(){return this.i<this.o};
Dd.prototype.next=function(){var a=new Ad(this.j[this.i],this.j[this.i+1]);this.i+=2;return a};f=eb.prototype;f.toString=function(){return kb(this)};f.keys=function(){return Cb(ne.g?ne.g(this):ne.call(null,this))};f.entries=function(){return new yd(I(I(this)))};f.values=function(){return Cb(qe.g?qe.g(this):qe.call(null,this))};f.has=function(a){return gc(this,a)};f.get=function(a,b){return this.J(null,a,b)};
f.forEach=function(a){for(var b=I(this),c=null,d=0,e=0;;)if(e<d){var g=c.ea(null,e),h=U(g,0,null);g=U(g,1,null);a.h?a.h(g,h):a.call(null,g,h);e+=1}else if(b=I(b))ac(b)?(c=$a(b),b=ab(b),h=c,d=O(c),c=h):(c=J(b),h=U(c,0,null),g=U(c,1,null),a.h?a.h(g,h):a.call(null,g,h),b=N(b),c=null,d=0),e=0;else return null};f.ia=function(a,b){return this.J(null,b,null)};f.J=function(a,b,c){a=zd(this.j,b);return-1===a?c:this.j[a+1]};
f.cb=function(a,b,c){a=this.j.length;for(var d=0;;)if(d<a){var e=this.j[d],g=this.j[d+1];c=b.m?b.m(c,e,g):b.call(null,c,e,g);if(Hb(c))return Da(c);d+=2}else return c};f.qa=function(){return new Dd(this.j,2*this.o)};f.O=function(){return this.meta};f.W=function(){return this.o};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Fb(this)};
f.N=function(a,b){if(Yb(b)&&!Zb(b))if(a=this.j.length,this.o===b.W(null))for(var c=0;;)if(c<a){var d=b.J(null,this.j[c],fc);if(d!==fc)if(P.h(this.j[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};f.Ua=function(){return new Jd(this.j.length,z(this.j))};f.V=function(){return Ga(Hd,this.meta)};f.Z=function(a,b){return pc(this,b)};f.$=function(a,b,c){return qc(this,b,c)};
f.ua=function(a,b,c){a=zd(this.j,b);if(-1===a){if(this.o<Bf){a=this.j;for(var d=a.length,e=Array(d+2),g=0;;)if(g<d)e[g]=a[g],g+=1;else break;e[d]=b;e[d+1]=c;return new eb(this.meta,this.o+1,e,null)}return Ga(ya(cd(Kd,this),b,c),this.meta)}if(c===this.j[a+1])return this;b=z(this.j);b[a+1]=c;return new eb(this.meta,this.o,b,null)};f.Pa=function(a,b){return-1!==zd(this.j,b)};f.G=function(){var a=this.j;return 0<=a.length-2?new Cd(a,0,null):null};
f.R=function(a,b){return b===this.meta?this:new eb(b,this.o,this.j,this.u)};f.U=function(a,b){if($b(b))return this.ua(null,T(b,0),T(b,1));a=this;for(b=I(b);;){if(null==b)return a;var c=J(b);if($b(c))a=ya(a,T(c,0),T(c,1)),b=N(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return this.ia(null,a)};f.h=function(a,b){return this.J(null,a,b)};var Hd=new eb(null,0,[],wf),Bf=8;eb.prototype[yb]=function(){return Cb(this)};f=Jd.prototype;
f.W=function(){if(this.Sa)return uc(this.len);throw Error("count after persistent!");};f.ia=function(a,b){return this.J(null,b,null)};f.J=function(a,b,c){if(this.Sa)return a=zd(this.j,b),-1===a?c:this.j[a+1];throw Error("lookup after persistent!");};
f.Xa=function(a,b){if(this.Sa){if(Bd(b))return this.Ra(null,oe.g?oe.g(b):oe.call(null,b),re.g?re.g(b):re.call(null,b));if($b(b))return this.Ra(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));a=I(b);for(b=this;;){var c=J(a);if(u(c))a=N(a),b=Wa(b,oe.g?oe.g(c):oe.call(null,c),re.g?re.g(c):re.call(null,c));else return b}}else throw Error("conj! after persistent!");};f.eb=function(){if(this.Sa)return this.Sa=!1,new eb(null,uc(this.len),this.j,null);throw Error("persistent! called twice");};
f.Ra=function(a,b,c){if(this.Sa){a=zd(this.j,b);if(-1===a){if(this.len+2<=2*Bf)return this.len+=2,this.j.push(b),this.j.push(c),this;a=Ld.h?Ld.h(this.len,this.j):Ld.call(null,this.len,this.j);return Wa(a,b,c)}c!==this.j[a+1]&&(this.j[a+1]=c);return this}throw Error("assoc! after persistent!");};f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};
f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return this.J(null,a,null)};f.h=function(a,b){return this.J(null,a,b)};Qd.prototype.advance=function(){for(var a=this.j.length;;)if(this.i<a){var b=this.j[this.i],c=this.j[this.i+1];null!=b?b=this.ab=new Ad(b,c):null!=c?(b=cb(c),b=b.ga()?this.oa=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};Qd.prototype.ga=function(){var a=null!=this.ab;return a?a:(a=null!=this.oa)?a:this.advance()};
Qd.prototype.next=function(){if(null!=this.ab){var a=this.ab;this.ab=null;return a}if(null!=this.oa)return a=this.oa.next(),this.oa.ga()||(this.oa=null),a;if(this.advance())return this.next();throw Error("No such element");};Qd.prototype.remove=function(){return Error("Unsupported operation")};f=Rd.prototype;f.Na=function(a){if(a===this.D)return this;var b=vc(this.S),c=Array(0>b?4:2*(b+1));bc(this.j,0,c,0,2*b);return new Rd(a,this.S,c)};f.Za=function(){return be?be(this.j):de.call(null,this.j)};
f.$a=function(a,b){return Pd(this.j,a,b)};f.wa=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.S&e))return d;var g=vc(this.S&e-1);e=this.j[2*g];g=this.j[2*g+1];return null==e?g.wa(a+5,b,c,d):Ed(c,e)?g:d};
f.ma=function(a,b,c,d,e,g){var h=1<<(c>>>b&31),k=vc(this.S&h-1);if(0===(this.S&h)){var l=vc(this.S);if(2*l<this.j.length){a=this.Na(a);b=a.j;g.I=!0;c=2*(l-k);g=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[g],--l,--c,--g;b[2*k]=d;b[2*k+1]=e;a.S|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=$d.ma(a,b+5,c,d,e,g);for(e=d=0;;)if(32>d)0===(this.S>>>d&1)?
d+=1:(k[d]=null!=this.j[e]?$d.ma(a,b+5,tb(this.j[e]),this.j[e],this.j[e+1],g):this.j[e+1],e+=2,d+=1);else break;return new Td(a,l+1,k)}b=Array(2*(l+4));bc(this.j,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;bc(this.j,2*k,b,2*(k+1),2*(l-k));g.I=!0;a=this.Na(a);a.j=b;a.S|=h;return a}l=this.j[2*k];h=this.j[2*k+1];if(null==l)return l=h.ma(a,b+5,c,d,e,g),l===h?this:Od(this,a,2*k+1,l);if(Ed(d,l))return e===h?this:Od(this,a,2*k+1,e);g.I=!0;g=b+5;d=Xd?Xd(a,g,l,h,c,d,e):Zd.call(null,a,g,l,h,c,d,e);e=2*k;k=2*k+1;a=this.Na(a);
a.j[e]=null;a.j[k]=d;return a};
f.la=function(a,b,c,d,e){var g=1<<(b>>>a&31),h=vc(this.S&g-1);if(0===(this.S&g)){var k=vc(this.S);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=$d.la(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.S>>>c&1)?c+=1:(h[c]=null!=this.j[d]?$d.la(a+5,tb(this.j[d]),this.j[d],this.j[d+1],e):this.j[d+1],d+=2,c+=1);else break;return new Td(null,k+1,h)}a=Array(2*(k+1));bc(this.j,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;bc(this.j,2*h,a,2*(h+1),2*(k-h));e.I=!0;return new Rd(null,this.S|g,a)}var l=this.j[2*h];g=this.j[2*h+1];if(null==l)return k=g.la(a+5,b,c,d,e),k===g?this:new Rd(null,this.S,Nd(this.j,2*h+1,k));if(Ed(c,l))return d===g?this:new Rd(null,this.S,Nd(this.j,2*h+1,d));e.I=!0;e=this.S;k=this.j;a+=5;a=Wd?Wd(a,l,g,b,c,d):Zd.call(null,a,l,g,b,c,d);c=2*h;h=2*h+1;d=z(k);d[c]=null;d[h]=a;return new Rd(null,e,d)};f.qa=function(){return new Qd(this.j)};var $d=new Rd(null,0,[]);
Sd.prototype.ga=function(){for(var a=this.j.length;;){if(null!=this.oa&&this.oa.ga())return!0;if(this.i<a){var b=this.j[this.i];this.i+=1;null!=b&&(this.oa=cb(b))}else return!1}};Sd.prototype.next=function(){if(this.ga())return this.oa.next();throw Error("No such element");};Sd.prototype.remove=function(){return Error("Unsupported operation")};f=Td.prototype;f.Na=function(a){return a===this.D?this:new Td(a,this.o,z(this.j))};f.Za=function(){return fe?fe(this.j):he.call(null,this.j)};
f.$a=function(a,b){for(var c=this.j.length,d=0;;)if(d<c){var e=this.j[d];if(null!=e){b=e.$a(a,b);if(Hb(b))return b;d+=1}else d+=1}else return b};f.wa=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.wa(a+5,b,c,d):d};f.ma=function(a,b,c,d,e,g){var h=c>>>b&31,k=this.j[h];if(null==k)return a=Od(this,a,h,$d.ma(a,b+5,c,d,e,g)),a.o+=1,a;b=k.ma(a,b+5,c,d,e,g);return b===k?this:Od(this,a,h,b)};
f.la=function(a,b,c,d,e){var g=b>>>a&31,h=this.j[g];if(null==h)return new Td(null,this.o+1,Nd(this.j,g,$d.la(a+5,b,c,d,e)));a=h.la(a+5,b,c,d,e);return a===h?this:new Td(null,this.o,Nd(this.j,g,a))};f.qa=function(){return new Sd(this.j)};f=Vd.prototype;f.Na=function(a){if(a===this.D)return this;var b=Array(2*(this.o+1));bc(this.j,0,b,0,2*this.o);return new Vd(a,this.va,this.o,b)};f.Za=function(){return be?be(this.j):de.call(null,this.j)};f.$a=function(a,b){return Pd(this.j,a,b)};
f.wa=function(a,b,c,d){a=Ud(this.j,this.o,c);return 0>a?d:Ed(c,this.j[a])?this.j[a+1]:d};
f.ma=function(a,b,c,d,e,g){if(c===this.va){b=Ud(this.j,this.o,d);if(-1===b){if(this.j.length>2*this.o)return b=2*this.o,c=2*this.o+1,a=this.Na(a),a.j[b]=d,a.j[c]=e,g.I=!0,a.o+=1,a;c=this.j.length;b=Array(c+2);bc(this.j,0,b,0,c);b[c]=d;b[c+1]=e;g.I=!0;d=this.o+1;a===this.D?(this.j=b,this.o=d,a=this):a=new Vd(this.D,this.va,d,b);return a}return this.j[b+1]===e?this:Od(this,a,b+1,e)}return(new Rd(a,1<<(this.va>>>b&31),[null,this,null,null])).ma(a,b,c,d,e,g)};
f.la=function(a,b,c,d,e){return b===this.va?(a=Ud(this.j,this.o,c),-1===a?(a=2*this.o,b=Array(a+2),bc(this.j,0,b,0,a),b[a]=c,b[a+1]=d,e.I=!0,new Vd(null,this.va,this.o+1,b)):P.h(this.j[a+1],d)?this:new Vd(null,this.va,this.o,Nd(this.j,a+1,d))):(new Rd(null,1<<(this.va>>>a&31),[null,this])).la(a,b,c,d,e)};f.qa=function(){return new Qd(this.j)};f=ae.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){if(null==this.B){var a=this.nodes,b=this.i+2;return ce?ce(a,b,null):de.call(null,a,b,null)}a=this.nodes;b=this.i;var c=N(this.B);return ce?ce(a,b,c):de.call(null,a,b,c)};
f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return null==this.B?new Ad(this.nodes[this.i],this.nodes[this.i+1]):J(this.B)};
f.aa=function(){var a=this,b=null==a.B?function(){var c=a.nodes,d=a.i+2;return ce?ce(c,d,null):de.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=N(a.B);return ce?ce(c,d,e):de.call(null,c,d,e)}();return null!=b?b:M};f.G=function(){return this};f.R=function(a,b){return b===this.meta?this:new ae(b,this.nodes,this.i,this.B,this.u)};f.U=function(a,b){return V(b,this)};ae.prototype[yb]=function(){return Cb(this)};f=ee.prototype;f.toString=function(){return kb(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.meta};f.X=function(){var a=this.nodes,b=this.i,c=N(this.B);return ge?ge(a,b,c):he.call(null,a,b,c)};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Eb(this)};
f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return J(this.B)};f.aa=function(){var a=this.nodes;var b=this.i,c=N(this.B);a=ge?ge(a,b,c):he.call(null,a,b,c);return null!=a?a:M};f.G=function(){return this};f.R=function(a,b){return b===this.meta?this:new ee(b,this.nodes,this.i,this.B,this.u)};f.U=function(a,b){return V(b,this)};ee.prototype[yb]=function(){return Cb(this)};
ie.prototype.ga=function(){return!this.lb||this.sb.ga()};ie.prototype.next=function(){if(this.lb)return this.sb.next();this.lb=!0;return new Ad(null,this.ba)};ie.prototype.remove=function(){return Error("Unsupported operation")};f=je.prototype;f.toString=function(){return kb(this)};f.keys=function(){return Cb(ne.g?ne.g(this):ne.call(null,this))};f.entries=function(){return new yd(I(I(this)))};f.values=function(){return Cb(qe.g?qe.g(this):qe.call(null,this))};f.has=function(a){return gc(this,a)};
f.get=function(a,b){return this.J(null,a,b)};f.forEach=function(a){for(var b=I(this),c=null,d=0,e=0;;)if(e<d){var g=c.ea(null,e),h=U(g,0,null);g=U(g,1,null);a.h?a.h(g,h):a.call(null,g,h);e+=1}else if(b=I(b))ac(b)?(c=$a(b),b=ab(b),h=c,d=O(c),c=h):(c=J(b),h=U(c,0,null),g=U(c,1,null),a.h?a.h(g,h):a.call(null,g,h),b=N(b),c=null,d=0),e=0;else return null};f.ia=function(a,b){return this.J(null,b,null)};f.J=function(a,b,c){return null==b?this.fa?this.ba:c:null==this.root?c:this.root.wa(0,tb(b),b,c)};
f.cb=function(a,b,c){a=this.fa?b.m?b.m(c,null,this.ba):b.call(null,c,null,this.ba):c;Hb(a)?b=Da(a):null!=this.root?(b=this.root.$a(b,a),b=Hb(b)?Ib.g?Ib.g(b):Ib.call(null,b):b):b=a;return b};f.qa=function(){var a=this.root?cb(this.root):new Vc(Hd);return this.fa?new ie(this.ba,a):a};f.O=function(){return this.meta};f.W=function(){return this.o};f.T=function(){var a=this.u;return null!=a?a:this.u=a=Fb(this)};f.N=function(a,b){return xd(this,b)};
f.Ua=function(){return new ke(this.root,this.o,this.fa,this.ba)};f.V=function(){return Ga(Kd,this.meta)};f.ua=function(a,b,c){if(null==b)return this.fa&&c===this.ba?this:new je(this.meta,this.fa?this.o:this.o+1,this.root,!0,c,null);a=new Md;b=(null==this.root?$d:this.root).la(0,tb(b),b,c,a);return b===this.root?this:new je(this.meta,a.I?this.o+1:this.o,b,this.fa,this.ba,null)};f.Pa=function(a,b){return null==b?this.fa:null==this.root?!1:this.root.wa(0,tb(b),b,fc)!==fc};
f.G=function(){if(0<this.o){var a=null!=this.root?this.root.Za():null;return this.fa?V(new Ad(null,this.ba),a):a}return null};f.R=function(a,b){return b===this.meta?this:new je(b,this.o,this.root,this.fa,this.ba,this.u)};f.U=function(a,b){if($b(b))return this.ua(null,T(b,0),T(b,1));a=this;for(b=I(b);;){if(null==b)return a;var c=J(b);if($b(c))a=ya(a,T(c,0),T(c,1)),b=N(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};f.g=function(a){return this.ia(null,a)};f.h=function(a,b){return this.J(null,a,b)};var Kd=new je(null,0,null,!1,null,wf);je.prototype[yb]=function(){return Cb(this)};f=ke.prototype;
f.W=function(){if(this.D)return this.count;throw Error("count after persistent!");};f.ia=function(a,b){return null==b?this.fa?this.ba:null:null==this.root?null:this.root.wa(0,tb(b),b)};f.J=function(a,b,c){return null==b?this.fa?this.ba:c:null==this.root?c:this.root.wa(0,tb(b),b,c)};
f.Xa=function(a,b){a:if(this.D)if(Bd(b))a=le(this,oe.g?oe.g(b):oe.call(null,b),re.g?re.g(b):re.call(null,b));else if($b(b))a=le(this,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=I(b),b=this;;){var c=J(a);if(u(c))a=N(a),b=le(b,oe.g?oe.g(c):oe.call(null,c),re.g?re.g(c):re.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
f.eb=function(){if(this.D){this.D=null;var a=new je(null,this.count,this.root,this.fa,this.ba,null)}else throw Error("persistent! called twice");return a};f.Ra=function(a,b,c){return le(this,b,c)};f.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",y.g(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(z(b)))};
f.g=function(a){return this.ia(null,a)};f.h=function(a,b){return this.J(null,a,b)};var lf=function lf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return lf.C(0<c.length?new H(c.slice(0),0,null):null)};lf.C=function(a){for(var b=I(a),c=Ta(Kd);;)if(b){var d=N(b);if(null==d)throw Error(["No value supplied for key: ",y.g(J(b))].join(""));a=N(d);b=J(b);d=J(d);c=Wa(c,b,d);b=a}else return Va(c)};lf.K=0;lf.H=function(a){return this.C(I(a))};f=me.prototype;
f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.pa};f.X=function(){var a=(null!=this.A?this.A.l&128||F===this.A.Va||(this.A.l?0:v(ua,this.A)):v(ua,this.A))?this.A.X():N(this.A);return null==a?null:new me(a,null)};f.T=function(){return Eb(this)};
f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return this.A.P(null).key};f.aa=function(){var a=(null!=this.A?this.A.l&128||F===this.A.Va||(this.A.l?0:v(ua,this.A)):v(ua,this.A))?this.A.X():N(this.A);return null!=a?new me(a,null):M};f.G=function(){return this};f.R=function(a,b){return b===this.pa?this:new me(this.A,b)};f.U=function(a,b){return V(b,this)};me.prototype[yb]=function(){return Cb(this)};
f=pe.prototype;f.toString=function(){return kb(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return R(this,b,0);case 2:return R(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return R(this,b,0)};a.h=function(b,c){return R(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return S(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();f.O=function(){return this.pa};f.X=function(){var a=(null!=this.A?this.A.l&128||F===this.A.Va||(this.A.l?0:v(ua,this.A)):v(ua,this.A))?this.A.X():N(this.A);return null==a?null:new pe(a,null)};f.T=function(){return Eb(this)};
f.N=function(a,b){return wc(this,b)};f.V=function(){return M};f.Z=function(a,b){return nc(b,this)};f.$=function(a,b,c){return oc(b,c,this)};f.P=function(){return this.A.P(null).I};f.aa=function(){var a=(null!=this.A?this.A.l&128||F===this.A.Va||(this.A.l?0:v(ua,this.A)):v(ua,this.A))?this.A.X():N(this.A);return null!=a?new pe(a,null):M};f.G=function(){return this};f.R=function(a,b){return b===this.pa?this:new pe(this.A,b)};f.U=function(a,b){return V(b,this)};pe.prototype[yb]=function(){return Cb(this)};
var ye={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};H.prototype.Y=F;H.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};Cc.prototype.Y=F;Cc.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};Ad.prototype.Y=F;Ad.prototype.M=function(a,b,c){return we(b,Y,"["," ","]",c,this)};ae.prototype.Y=F;ae.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};Cd.prototype.Y=F;Cd.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};
Db.prototype.Y=F;Db.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};md.prototype.Y=F;md.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};zc.prototype.Y=F;zc.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};$c.prototype.Y=F;$c.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};je.prototype.Y=F;je.prototype.M=function(a,b,c){return Ee(this,Y,b,c)};ee.prototype.Y=F;ee.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};
Gc.prototype.Y=F;Gc.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};pe.prototype.Y=F;pe.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};X.prototype.Y=F;X.prototype.M=function(a,b,c){return we(b,Y,"["," ","]",c,this)};yc.prototype.Y=F;yc.prototype.M=function(a,b){return E(b,"()")};eb.prototype.Y=F;eb.prototype.M=function(a,b,c){return Ee(this,Y,b,c)};me.prototype.Y=F;me.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};xc.prototype.Y=F;
xc.prototype.M=function(a,b,c){return we(b,Y,"("," ",")",c,this)};wb.prototype.Ta=F;wb.prototype.Qa=function(a,b){if(b instanceof wb)return vb(this,b);throw Error(["Cannot compare ",y.g(this)," to ",y.g(b)].join(""));};W.prototype.Ta=F;W.prototype.Qa=function(a,b){if(b instanceof W)return Ac(this,b);throw Error(["Cannot compare ",y.g(this)," to ",y.g(b)].join(""));};X.prototype.Ta=F;
X.prototype.Qa=function(a,b){if($b(b))return ic(this,b);throw Error(["Cannot compare ",y.g(this)," to ",y.g(b)].join(""));};Ad.prototype.Ta=F;Ad.prototype.Qa=function(a,b){if($b(b))return ic(this,b);throw Error(["Cannot compare ",y.g(this)," to ",y.g(b)].join(""));};var hb=new W(null,"meta","meta",1499536964),jb=new W(null,"print-length","print-length",1931866356),fb=new W(null,"flush-on-newline","flush-on-newline",-151457939),ib=new W(null,"dup","dup",556298533),gb=new W(null,"readably","readably",1129599760),Ie=new W(null,"fallback-impl","fallback-impl",-1501286995),ve=new W(null,"more-marker","more-marker",-14717935),Ge=new W(null,"alt-impl","alt-impl",670969595);var Pe={},Ne={},Oe=[];Re.cache={};Re.resolve=function(a){return a};var Cf=Re(0,{});var hf=Re(1,{});var bf=Re(6,{});var Df=Re(9,{});var Ve=Df.props.coll,Ue=Df.props.prefixColl,mf=Df.props.prefixEdge,ef=Cf.NodeProp.closedBy,ff=Cf.NodeProp.openedBy,gf=Df.props.sameEdge,Ef=function Ef(a){switch(arguments.length){case 1:return Ef.g(arguments[0]);case 2:return Ef.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",y.g(arguments.length)].join(""));}};Ef.g=function(a){var b=Ef.h;var c=a.selection;c=c.asSingle.call(c);c=null!=c?c.ranges:void 0;c=null!=c?c[0]:void 0;c=null!=c?c.from:void 0;return b.call(Ef,a,c)};
Ef.h=function(a,b){var c=nf(a,b);c=null==c?null:We(c.type)||c.from<=b||c.to<=b?Xc(c)||!We(c.type)&&c.from<b&&b<c.to?J(Xe(c,b,-1)):c:null;b=null==c?null:of(b,c);return null==b?null:jf(a,b.from,b.to)};Ef.K=2;export const nodeAtCursor=Ef;